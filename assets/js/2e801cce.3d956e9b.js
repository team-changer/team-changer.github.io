"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9450],{6029:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"git-submodule","metadata":{"permalink":"/git-submodule","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-11-07-Git submodule \ub3c4\uc785\ud558\uae30.mdx","source":"@site/blog/2023-11-07-Git submodule \ub3c4\uc785\ud558\uae30.mdx","title":"Git submodule \ub3c4\uc785\ud558\uae30","description":"\ub4e4\uc5b4\uac00\uae30","date":"2023-11-07T00:00:00.000Z","formattedDate":"2023\ub144 11\uc6d4 7\uc77c","tags":[{"label":"github","permalink":"/tags/github"},{"label":"collaboration","permalink":"/tags/collaboration"}],"readingTime":11.895,"hasTruncateMarker":false,"authors":[{"name":"\ud6c4\ucd94","title":"Backend","url":"https://github.com/Combi153","imageURL":"https://github.com/Combi153.png","key":"huchu"}],"frontMatter":{"title":"Git submodule \ub3c4\uc785\ud558\uae30","slug":"git-submodule","authors":["huchu"],"tags":["github","collaboration"]},"nextItem":{"title":"Git \ubbfc\uac10 \uc815\ubcf4 \ub178\ucd9c \ubb38\uc81c \ud574\uacb0\ud558\uae30","permalink":"/Git-submodule-private"}},"content":"## \ub4e4\uc5b4\uac00\uae30\\n\\n\ud504\ub85c\uc81d\ud2b8\ub97c \uc9c4\ud589\ud558\uba70 \ud658\uacbd\ubcc0\uc218\ub97c private \ud558\uac8c \uad00\ub9ac\ud574\uc57c \ud558\ub294 \uc0c1\ud669\uc744 \ub9c8\uc8fc\ud569\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4, JWT\ub97c \ubc1c\uae09\ud560 \ub54c \uc0ac\uc6a9\ud558\ub294 secret-key \ub294 \uc678\ubd80\uc5d0 \ub178\ucd9c\ub418\uba74 \uc548 \ub429\ub2c8\ub2e4. \ub9cc\uc57d secret-key \uac00 \ub178\ucd9c\ub41c\ub2e4\uba74\\n\ub204\uad6c\ub098 JWT\ub97c \ubc1c\uae09\ud574 \uc11c\ubc84\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\uace0 \ud68c\uc6d0\uc758 \uac1c\uc778\uc815\ubcf4\uae4c\uc9c0 \uc720\ucd9c\ub420 \uc218 \uc788\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.\\n\\n\ud2b8\ub9bd\ub4dc\ub85c\uc6b0\ub294 \ud658\uacbd\ubcc0\uc218\ub97c \uad00\ub9ac\ud558\uae30 \uc704\ud574 Git Submodule\uc744 \ub3c4\uc785\ud558\uae30\ub85c \ud588\uc2b5\ub2c8\ub2e4.\\n\\n# Git Submodule\\n\\n## submodule \uc774\ub780?\\n\\nGit Submodule \uc740 Git Repository \uc548\uc5d0 \ub2e4\ub978 Git Repository\ub97c \ud3ec\ud568\ud574\uc11c \uc0ac\uc6a9\ud558\ub294 \uae30\uc220\uc785\ub2c8\ub2e4.\\n\\n![](https://velog.velcdn.com/images/153plane/post/4c1503e4-c398-435c-8ef4-22832e24b9c7/image.png)\\n\\nA, B \ub450 \uac1c\uc758 Repository \uac00 \uc788\uc744 \ub54c A Repository \uc5d0\uc11c B Repository \ub97c submodule\ub85c \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub7ec\uba74 A Repository \uc5d0\uc11c B Repository \uc5d0\\n\uc790\uc720\ub86d\uac8c \uc811\uadfc\ud560 \uc218 \uc788\uac8c \ub429\ub2c8\ub2e4.\\n\\n## submodule\ub85c \ud658\uacbd\ubcc0\uc218 \uad00\ub9ac\\n\\n\ud2b8\ub9bd\ub4dc\ub85c\uc6b0 Repository\uc5d0 submodule\uc744 \ucd94\uac00\ud558\ub294 \uac83\uc73c\ub85c \uc5b4\ub5bb\uac8c \ud658\uacbd\ubcc0\uc218\ub97c \uad00\ub9ac\ud560 \uc218 \uc788\uc744\uae4c\uc694?\\n\\n\uadf8\uac83\uc740 Private Repository\ub97c submodule\ub85c \uc124\uc815\ud568\uc73c\ub85c\uc368 \uac00\ub2a5\ud569\ub2c8\ub2e4.\\n\\nGithub\uc758 Private Repository\ub294 \uad8c\ud55c\uc774 \ud5c8\uc6a9\ub41c \uc790\ub9cc \uc811\uadfc \uac00\ub2a5\ud569\ub2c8\ub2e4. \uc989, \uc678\ubd80\uc5d0 \ub178\ucd9c\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub530\ub77c\uc11c Private Repository\uc5d0 \ud658\uacbd\ubcc0\uc218\ub97c \ub450\uace0 \ud2b8\ub9bd\ub4dc\ub85c\uc6b0 Repository\uc5d0\\n\uc774\ub97c submodule\ub85c \uc124\uc815\ud55c\ub2e4\uba74 \ud658\uacbd\ubcc0\uc218\ub97c private \ud558\uac8c \uad00\ub9ac\ud558\ub294 \uac83\uc774 \uac00\ub2a5\ud574\uc9d1\ub2c8\ub2e4.\\n\\n## submodule\uc758 \uc7a5\uc810\\n\\n\uc0ac\uc2e4 \ud658\uacbd\ubcc0\uc218\ub97c \ube44\uacf5\uac1c\ub97c \uad00\ub9ac\ud558\ub294 \uac00\uc7a5 \uc26c\uc6b4 \ubc29\ubc95\uc740 \ud658\uacbd\ubcc0\uc218 \uad00\ub828 \ud30c\uc77c\uc744 .gitignore\uc5d0 \ucd94\uac00\ud558\ub294 \uac83\uc785\ub2c8\ub2e4.\\n\\n\uadf8\uc5d0 \ube44\ud574 submodule\uc744 \uc0ac\uc6a9\ud574 \ud658\uacbd\ubcc0\uc218\ub97c \uad00\ub9ac\ud558\ub294 \ubc29\ubc95\uc740 \ubc88\uac70\ub86d\uac8c \ub290\uaef4\uc9d1\ub2c8\ub2e4. \uadf8\ub807\ub2e4\uba74 submodule \uc744 \uc0ac\uc6a9\ud574 \uc5bb\uc744 \uc218 \uc788\ub294 \uc7a5\uc810\uc740 \ubb34\uc5c7\uc77c\uae4c\uc694?\\n\\n#### 1. \uc0ac\ub78c\uc758 \uc2e4\uc218(human error)\ub97c \ubc29\uc9c0\ud560 \uc218 \uc788\ub2e4.\\n\\n\ub9cc\uc57d \uac1c\ubc1c\uc790\uc758 \uc2e4\uc218\ub85c \ubbfc\uac10 \uc815\ubcf4 \ud30c\uc77c\uc744 .gitignore\uc5d0 \ucd94\uac00\ud558\uc9c0 \uc54a\uc73c\uba74 \uc5b4\ub5bb\uac8c \ub420\uae4c\uc694? \ud504\ub85c\uadf8\ub7a8\uc758 \ubcf4\uc548\uc774 \ub9e4\uc6b0 \ucde8\uc57d\ud574\uc9c0\uace0 \ud68c\uc6d0 \uc815\ubcf4 \uc720\ucd9c \uc0ac\ud0dc\uac00 \ubc1c\uc0dd\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4. \ubbfc\uac10 \uc815\ubcf4\ub97c \uacf5\uac1c\uc801\uc778 \uc7a5\uc18c\uc5d0 \ub178\ucd9c\ud558\uc9c0 \uc54a\ub294\\n\uac83\uc774\\n\ub2f9\uc5f0\ud55c \uc0c1\uc2dd\ucc98\ub7fc \ub290\uaef4\uc9c0\uc9c0\ub9cc, \ubab8\uc774 \uc544\ud504\uac70\ub098 \uc77c\uc815\uc774 \uae09\ubc15\ud558\ub2e4\uba74 \uc5b4\ub5a4 \uac1c\ubc1c\uc790\ub4e0 \uc0c1\uc2dd\uc5d0 \uc5b4\uae0b\ub098\ub294 \uc2e4\uc218\ub97c \ubc94\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uacb0\uad6d \uc2e4\uc218\ud560\ub9cc\ud55c \uc0c1\ud669\uc744 \uc6d0\ucc9c \ucc28\ub2e8\ud558\ub294 \uac83\uc774 \uc911\uc694\ud569\ub2c8\ub2e4.\\n\\nPrivate Repository\uc640 submodule \uc744 \uc774\uc6a9\ud55c \ubc29\ubc95\uc740 .gitignore \uc124\uc815\uc744 \ucd94\uac00\ud558\uc9c0 \uc54a\uc544\ub3c4 \ub429\ub2c8\ub2e4. \ub530\ub77c\uc11c \uc0ac\ub78c\uc758 \uc2e4\uc218\ub97c \ubc29\uc9c0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n#### 2. \ubcc0\uacbd \uc0ac\ud56d\uc744 \uccb4\uacc4\uc801\uc73c\ub85c \ucd94\uc801\ud558\uace0 \ud1b5\uc81c\ud560 \uc218 \uc788\ub2e4.\\n\\nsubmodule\uc740 Git Repository\ub97c \uae30\ubc18\uc73c\ub85c \ud569\ub2c8\ub2e4. \uc774\uac83\uc740 \ud658\uacbd\ubcc0\uc218\uc5d0 \ub300\ud574\uc11c\ub3c4 Git\uc758 \ubc84\uc804 \uad00\ub9ac\uac00 \uac00\ub2a5\ud558\ub2e4\ub294 \ub9d0\uc785\ub2c8\ub2e4. submodule\uc744 \uc0ac\uc6a9\ud55c\ub2e4\uba74 \ud544\uc694\uc5d0 \ub530\ub77c \ubcc0\uacbd \uc0ac\ud56d\uc744 \uc0b4\ud3b4\ubcf4\uac70\ub098 \uc774\uc804\uc758\\n\ubc84\uc804\uc73c\ub85c \ub418\ub3cc\ub9ac\ub294 \ub4f1\uc758 \ud589\uc704\ub97c \ud560 \uc218\\n\uc788\uc2b5\ub2c8\ub2e4.\\n\\n#### 3. \ud1b5\uc77c\uc131\uc744 \uc9c0\ud0ac \uc218 \uc788\ub2e4.\\n\\n\ud504\ub85c\uc81d\ud2b8\uc758 \ud300\uc6d0\ub4e4\uc774 .gitignore\ub97c \ud1b5\ud574 \uac1c\ubcc4\ub85c \ubbfc\uac10 \uc815\ubcf4 \ud30c\uc77c\uc744 \uad00\ub9ac\ud55c\ub2e4\uace0 \uc0dd\uac01\ud574\ubd05\uc2dc\ub2e4. \ucc98\uc74c\uc5d0\ub294 \ud30c\uc77c\uc758 \ub0b4\uc6a9\uc774 \ubaa8\ub450 \uac19\uc544\ub3c4 \uc2dc\uac04\uc774 \uc9c0\ub0a8\uc5d0 \ub530\ub77c \ud300\uc6d0 \uac04 \ud30c\uc77c\uc758 \ub0b4\uc6a9\uc774 \ub2ec\ub77c\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud658\uacbd\ubcc0\uc218\uc5d0 \uad00\ud55c\\n\ud300\uc758 \ud1b5\uc77c\uc131\uc774 \uae68\uc9c4\ub2e4\uba74 \\"\ub0b4\\n\ucef4\ud4e8\ud130\uc5d0\uc11c\ub294 \uc798 \ub418\ub294\ub370 \ub124 \ucef4\ud4e8\ud130\uc5d0\uc11c\ub294 \uc798 \uc548 \ub418\ub294\\" \ub2f5\ub2f5\ud55c \uc0c1\ud669\uc774 \uc0dd\uae30\uae30 \ub9c8\ub828\uc785\ub2c8\ub2e4.\\n\\nGit\uc758 submodule\uc740 \ud1b5\uc77c\uc131\uc744 \uc9c0\ud0a4\uae30 \ud3b8\ud569\ub2c8\ub2e4. \ud55c \ud300\uc6d0\uc774 \ud658\uacbd\ubcc0\uc218\ub97c \ubcc0\uacbd\ud588\ub2e4\uba74 commit & push \ud558\uace0, \ub2e4\ub978 \ud300\uc6d0\uc740 \ubcc0\uacbd\uc0ac\ud56d\uc744 update \ud558\uba74 \ud1b5\uc77c\uc131\uc774 \uc9c0\ucf1c\uc9d1\ub2c8\ub2e4. \ubaa8\ub450\uac00 \uac19\uc740\\n\ud30c\uc77c\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uac83 \uc785\ub2c8\ub2e4.\\n\\n# submodule \uc124\uc815\ud558\uae30\\n\\n\uc2e4\uc2b5\uc744 \ud1b5\ud574 Git submodule\uc744 \uc9c1\uc811 \uc0ac\uc6a9\ud574\ubd05\uc2dc\ub2e4.\\n\\n## \ucd08\uae30 \uc124\uc815\\n\\n### Repository \uc0dd\uc131\\n\\n![](https://velog.velcdn.com/images/153plane/post/2a456ec0-a178-4d16-90c1-2e5ecc658bae/image.png)\\n\\nGithub \uc5d0\uc11c Repository\ub97c \ub450 \uac1c \uc0dd\uc131\ud569\ub2c8\ub2e4. submodule\ub85c \uc124\uc815\ud560 Repository\ub294 `Private`\uc73c\ub85c\\n\uc0dd\uc131\ud569\ub2c8\ub2e4. `project-repository`, `submodule-repository` \ub97c \uc0dd\uc131\ud588\uc2b5\ub2c8\ub2e4.\\n\\n### submodule \ucd94\uac00\\n\\n\uba54\uc778 \ud504\ub85c\uc81d\ud2b8\uc778 `project-repository` \uc5d0 `submodule-repository` \ub97c submodule\ub85c \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n```shell\\ngit submodule add {submodule-repository_URL} {target_dir}\\n```\\n\\n\uc704\uc640 \uac19\uc740 \uba85\ub839\uc5b4\ub85c submodule\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. `{target_dir}`\ub85c submodule \ub514\ub809\ud1a0\ub9ac\uc758 \uc774\ub984\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uba85\uc2dc\ud558\uc9c0 \uc54a\ub294\ub2e4\uba74 Repository\uc758 \uc774\ub984\uc73c\ub85c \uc124\uc815\ub429\ub2c8\ub2e4.\\n\\n\uba85\ub839\uc744 \uc2e4\ud589\ud55c \ud6c4 git status \ub85c \ubcc0\uacbd\uc0ac\ud56d\uc744 \ud655\uc778\ud574\ubd05\uc2dc\ub2e4.\\n\\n![](https://velog.velcdn.com/images/153plane/post/01abb7ec-88eb-47e3-aaea-4e30c42c1258/image.png)\\n.gitmodules \ud30c\uc77c\uacfc `submodule-repository`\uac00 \ucd94\uac00\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](https://velog.velcdn.com/images/153plane/post/f6a67169-d9a2-4d2d-b22f-655960cd9533/image.png)\\n\\n.gitmodules \ud30c\uc77c\uc740 \uc11c\ube0c\ubaa8\ub4c8\uc758 URL \ub9e4\ud551 \uc815\ubcf4\ub97c \ub2f4\uc740 \uc124\uc815 \ud30c\uc77c\uc785\ub2c8\ub2e4.\\n\\nsubmodule \ucd94\uac00\uc5d0 \ub530\ub978 \ubcc0\uacbd\uc0ac\ud56d\uc744 commit & push \ud568\uc73c\ub85c\uc368 \ucd08\uae30 \uc124\uc815\uc774 \uc644\ub8cc\ub429\ub2c8\ub2e4.\\n\\n## \ud611\uc5c5\ud560 \ub54c \uc0ac\uc6a9\ud558\uae30\\n\\n### submodule\uc744 \ud3ec\ud568\ud55c \ud504\ub85c\uc81d\ud2b8 \uc0ac\uc6a9\ud558\uae30\\n\\n\ud300\uc6d0 \uc911 \ud55c \uba85\uc774 \ud504\ub85c\uc81d\ud2b8\uc5d0 submodule\uc744 \uc124\uc815\ud588\ub2e4\uba74 \ub2e4\ub978 \ud300\uc6d0\uc740 \uc774\ub97c \uadf8\ub300\ub85c \uc0ac\uc6a9\ud558\uba74 \ub429\ub2c8\ub2e4.\\n\\n\ud504\ub85c\uc81d\ud2b8 clone \ubd80\ud130 \uc2dc\uc791\ud55c\ub2e4\uba74 \ub2e4\uc74c \uba85\ub839\uc744 \ucc28\ub840\ub85c \uc2e4\ud589\ud558\uba74 \ub429\ub2c8\ub2e4. \uc774\ubbf8 clone \ud55c \uc0c1\ud0dc\ub77c\uba74 init, update \uba85\ub839\ub9cc \uc2e4\ud589\ud558\uba74 \ub429\ub2c8\ub2e4. init\uacfc update \uba85\ub839\uc744 \uc2e4\ud589\ud558\uc9c0 \uc54a\ub294\ub2e4\uba74 \ud504\ub85c\uc81d\ud2b8\uc5d0\\nsubmodule \ub514\ub809\ud1a0\ub9ac\ub294 \ube48 \uc0c1\ud0dc \uc785\ub2c8\ub2e4.\\n\\n1. clone\\n\\n``` shell\\ngit clone {Repository_URL}\\n```\\n\\n2. init\\n\\n```shell\\ngit submodule init\\n```\\n\\ninit \uba85\ub839\uc740 submodule \uc815\ubcf4\ub97c \uae30\ubc18\uc73c\ub85c \ub85c\uceec\uc5d0 \ud658\uacbd\uc124\uc815 \ud30c\uc77c(configuration file)\uc744 \ucd08\uae30\ud654\ud569\ub2c8\ub2e4.\\n\\n3. update\\n\\n```shell\\ngit submodule update\\n```\\n\\nupdate \uba85\ub839\uc740 submodule\uc758 \uc6d0\uaca9 Repository\uc5d0\uc11c \ucee4\ubc0b \uc815\ubcf4\ub97c \ud3ec\ud568\ud55c \ub370\uc774\ud130\ub97c \uac00\uc838\uc628 \ud6c4 \ud504\ub85c\uc81d\ud2b8\uc5d0 \ub9de\uac8c Checkout \ud569\ub2c8\ub2e4.\\n\\n### submodule \ubcc0\uacbd\ud558\uae30\\n\\nsubmodule \ub0b4\uc6a9\uc744 \ubcc0\uacbd\ud558\ub294 \ubc29\ubc95\uc740 \ud06c\uac8c \ub450 \uac00\uc9c0\uc785\ub2c8\ub2e4. submodule Repository \uc5d0\uc11c \ubcc0\uacbd\ud558\ub294 \ubc29\ubc95\uacfc \uba54\uc778 \ud504\ub85c\uc81d\ud2b8 Repository\uc5d0\uc11c \uc9c1\uc811 \ubcc0\uacbd\ud558\ub294 \ubc29\ubc95\uc785\ub2c8\ub2e4.\\n\\n#### submodule Repository\uc5d0\uc11c \ubcc0\uacbd\\n\\nsubmodule\ub85c \uc124\uc815\ub41c Repository\uc5d0\uc11c \uc9c1\uc811 \ub0b4\uc6a9\uc744 \ubcc0\uacbd\ud558\ub294 \ubc29\ubc95\uc785\ub2c8\ub2e4.\\n\\n\ub2e4\uc74c \uc808\ucc28\ub97c \ub530\ub985\ub2c8\ub2e4.\\n\\n1. submodule \ubcc0\uacbd\uc0ac\ud56d commit & push\\n\\n```shell\\ngit add .\\ngit commit -m \\"{message}\\"\\ngit push\\n```\\n\\nsubmodule \uc5d0\uc11c \ubcc0\uacbd\uc0ac\ud56d\uc744 commit & push \ud569\ub2c8\ub2e4.\\n\\n2. \uba54\uc778 \ud504\ub85c\uc81d\ud2b8 submodule update\\n\\n```shell\\ngit submodule update --remote\\n```\\n\\n![](https://velog.velcdn.com/images/153plane/post/6ee65291-9998-4328-9863-e3016577fa55/image.png)\\n\\n\uba54\uc778 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c `git submodule update --remote` \uba85\ub839\uc744 \uc2e4\ud589\ud558\uba74, submodule\uc758 HEAD \uac00 \uc0c8\ub85c\uc6b4 commit\uc744 \uac00\ub9ac\ud0a4\uac8c \ub429\ub2c8\ub2e4.\\n\\n\uc774\ub54c `git status` \uba85\ub839\uc744 \uc2e4\ud589\ud574\ubcf4\uba74, submodule\uc774 update \ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n![](https://velog.velcdn.com/images/153plane/post/e8d5e5c4-b282-4c66-9934-c329e20ea129/image.png)\\n\\n3. \uba54\uc778 \ud504\ub85c\uc81d\ud2b8 \ubcc0\uacbd\uc0ac\ud56d commit & push\\n\\n```shell\\ngit add .\\ngit commit -m \\"{message}\\"\\ngit push\\n```\\n\\n\uba54\uc778 \ud504\ub85c\uc81d\ud2b8\uc5d0 submodule\uc758 \ubcc0\uacbd\uc0ac\ud56d\uc744 \ubc18\uc601\ud558\uae30 \uc704\ud574 commit & push \ud569\ub2c8\ub2e4.\\n\\n#### \uba54\uc778 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \ubcc0\uacbd\\n\\n\uba54\uc778 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \uc9c1\uc811 submodule\uc5d0 \uc811\uadfc\ud574 \ub0b4\uc6a9\uc744 \ubcc0\uacbd\ud558\ub294 \ubc29\ubc95\uc785\ub2c8\ub2e4.\\n\\n\uc55e\uc11c submodule Repository\uc5d0\uc11c \uc9c1\uc811 \ubcc0\uacbd\ud558\ub294 \ubc29\ubc95\uacfc \ud06c\uac8c \ub2e4\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub2e4\ub9cc commit & push \uc21c\uc11c\uac00 \uc911\uc694\ud569\ub2c8\ub2e4. submodule\uc758 \ubcc0\uacbd\uc0ac\ud56d\uc744 \uc6b0\uc120 commit & push \ud55c \ud6c4 \uba54\uc778\\n\ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c submodule \ubcc0\uacbd \ub0b4\uc6a9\uc744 commit & push \ud574\uc57c\ud569\ub2c8\ub2e4.\\n\\n**\u26a0\ufe0f \uc8fc\uc758**\\n![](https://velog.velcdn.com/images/153plane/post/165ccd1e-5c06-4b8b-b30d-c0c155a85d6f/image.png)\\n\\n\uc55e\uc11c `git submodule udpate` \uba85\ub839\uc73c\ub85c submodule\uc758 \ubcc0\uacbd\uc0ac\ud56d\uc744 \ubd88\ub7ec\uc654\ub2e4\uba74 submodule\uc740 Detached HEAD \uc0c1\ud0dc\uc785\ub2c8\ub2e4.\\n\\n\uc774\ub54c submodule \uc758 \ub0b4\uc6a9\uc744 \ubcc0\uacbd\ud55c \ud6c4 commit & push \ud558\uba74 \ubcf8\ub798 \uc0ac\uc6a9\ud558\ub358 branch\uc640 \ubb34\uad00\ud558\uac8c commit\uc774 \uc313\uc774\uac8c \ub429\ub2c8\ub2e4. \uae30\uc874\uc5d0 \uc0ac\uc6a9\ud558\ub358 branch\uc5d0 \ubcc0\uacbd\uc0ac\ud56d\uc744 \uc801\uc6a9\ud558\ub824\uba74 \ubcc0\uacbd\uc0ac\ud56d\uc744\\ncommit & push \ud558\uae30 \uc804\uc5d0 \uc0ac\uc6a9\ud558\ub358 branch\ub85c Checkout \uc744 \uc218\ud589\ud574\uc57c \ud569\ub2c8\ub2e4. \ub9cc\uc57d, Remote Repository \ubcf4\ub2e4 commit\uc774 \ub4a4\uc5d0 \uc788\ub2e4\uba74 git pull\ub3c4 \uc218\ud589\ud569\ub2c8\ub2e4.\\n\\n### \ud300\uc6d0\ub4e4\uc774 update \uc0ac\ud56d \ubd88\ub7ec\uc624\uae30\\n\\n\ud55c \ud300\uc6d0\uc774 submodule \ub0b4\uc6a9\uc744 \ubcc0\uacbd \ud6c4 \uba54\uc778 \ud504\ub85c\uc81d\ud2b8\uc5d0 \ubc18\uc601\ud588\ub2e4\uba74, \ub2e4\ub978 \ud300\uc6d0\ub4e4\ub3c4 \uc774\ub97c \ubd88\ub7ec\uc62c \ud544\uc694\uac00 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ud300\uc6d0 \ubaa8\ub450 \uba54\uc778 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c `git submodule update --remote` \uba85\ub839\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4.\\n\\n# \uc0ac\uc6a9\ud558\uae30\\n\\n\uadf8\ub7fc \uc774\uc81c submodule \uc0ac\uc6a9\ubc95\uc744 \uc54c\uc558\uc73c\ub2c8, \uc9c1\uc811 \ud658\uacbd\ubcc0\uc218\ub97c \uad00\ub9ac\ud558\uace0 \uc0ac\uc6a9\ud574\ubd05\ub2c8\ub2e4.\\n\\n### \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ucf54\ub4dc\\n\\n```java\\n\\n@RestController\\npublic class HelloController {\\n\\n    @GetMapping(\\"/hello\\")\\n    public ResponseEntity<String> hello(@Value(\\"${credentials.greeting-message}\\") final String message) {\\n        return ResponseEntity.ok(message);\\n    }\\n}\\n```\\n\\n\ub2e4\uc74c\uacfc \uac19\uc740 \ucf54\ub4dc\ub97c \uc791\uc131\ud588\uc2b5\ub2c8\ub2e4. `/hello`\ub85c \uc811\uadfc\ud558\uba74 \uc778\uc0ac\ub9d0\uc744 \ubc18\ud658\ud558\ub294 \ucf54\ub4dc\uc785\ub2c8\ub2e4. \uc774\ub54c \uc778\uc0ac\ub9d0\uc774 private\uc73c\ub85c \uc124\uc815\ud574\uc57c \ud558\ub294 \ud658\uacbd\ubcc0\uc218\ub77c\uace0 \uc0dd\uac01\ud574\ubd05\uc2dc\ub2e4. `@Value` \uc560\ub178\ud14c\uc774\uc158\uc744 \ud1b5\ud574\\napplication.yml\\n\ud30c\uc77c\uc5d0\uc11c message\ub97c \ubd88\ub7ec\uc624\ub3c4\ub85d \uc124\uc815\ud588\uc2b5\ub2c8\ub2e4.\\n\\n### submodule \ucf54\ub4dc\\n\\n![](https://velog.velcdn.com/images/153plane/post/ce8f59c1-3ac2-4eb4-88e4-ff0c135fc1a9/image.png)\\n\\nPrivate Repository \uc778 submodule \uc5d0 `application-hello.yml` \uc744 \uc791\uc131\ud569\ub2c8\ub2e4. \\"hello\\"\uc640 \uac19\uc740 \uac12\uc774 \uc678\ubd80\uc5d0 \ub178\ucd9c\ub418\uba74 \uc548 \ub418\ub294 \ud658\uacbd\ubcc0\uc218\ub77c\uace0 \uc0dd\uac01\ud558\uc2dc\uba74 \ub429\ub2c8\ub2e4.\\n\\n### application.yml & Profiles\\n\\nSpring \uc744 \uc0ac\uc6a9\ud558\ub294\\n\ud504\ub85c\uadf8\ub7a8\uc5d0\uc11c\ub294 [Profiles](https://docs.spring.io/spring-boot/docs/1.2.0.M1/reference/html/boot-features-profiles.html)\ub97c \uc124\uc815\ud568\uc73c\ub85c\uc368\\napplication\uc758 configuration\uc744 \uc5ec\ub7ec \uac1c\ub85c \ub098\ub204\uc5b4 \uad00\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](https://velog.velcdn.com/images/153plane/post/99a3b170-f41e-41a7-a9fe-c178da4b25fd/image.png)\\n\\n\uba54\uc778 \ud504\ub85c\uc81d\ud2b8 `application.yml`\uc5d0 profiles\ub97c hello\ub85c \uc124\uc815\ud569\ub2c8\ub2e4. \uadf8\ub7ec\uba74 `application-hello.yml` \ud30c\uc77c\uc744 \uc801\uc6a9\ud569\ub2c8\ub2e4. \uc774\ub54c `application-hello.yml` \ud30c\uc77c\uc774\\nresources \ud3f4\ub354\uac00 \uc544\ub2cc submodule \ud3f4\ub354\uc5d0 \uc788\ub2e4\ub294 \uac83\uc5d0 \uc720\uc758\ud569\ub2c8\ub2e4. submodule \ud3f4\ub354\uc5d0\uc11c yml \ud30c\uc77c\uc744 import \ud560 \uc218 \uc788\ub294 \uc124\uc815\ub3c4 \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n![](https://velog.velcdn.com/images/153plane/post/8beb4f45-9abf-4927-a67f-1e3f176f970d/image.png)\\n\\n\uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc2e4\ud589\ud574\ubcf4\uba74 \ud658\uacbd\ubcc0\uc218\ub97c \uc798 \uc77d\uc5b4\uc624\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."},{"id":"Git-submodule-private","metadata":{"permalink":"/Git-submodule-private","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-11-7-Git \ubbfc\uac10 \uc815\ubcf4 \ub178\ucd9c \ubb38\uc81c \ud574\uacb0\ud558\uae30.mdx","source":"@site/blog/2023-11-7-Git \ubbfc\uac10 \uc815\ubcf4 \ub178\ucd9c \ubb38\uc81c \ud574\uacb0\ud558\uae30.mdx","title":"Git \ubbfc\uac10 \uc815\ubcf4 \ub178\ucd9c \ubb38\uc81c \ud574\uacb0\ud558\uae30","description":"\ub4e4\uc5b4\uac00\uae30","date":"2023-11-07T00:00:00.000Z","formattedDate":"2023\ub144 11\uc6d4 7\uc77c","tags":[{"label":"git","permalink":"/tags/git"},{"label":"collaboration","permalink":"/tags/collaboration"}],"readingTime":6.28,"hasTruncateMarker":false,"authors":[{"name":"\ud6c4\ucd94","title":"Backend","url":"https://github.com/Combi153","imageURL":"https://github.com/Combi153.png","key":"huchu"}],"frontMatter":{"title":"Git \ubbfc\uac10 \uc815\ubcf4 \ub178\ucd9c \ubb38\uc81c \ud574\uacb0\ud558\uae30","slug":"Git-submodule-private","authors":["huchu"],"tags":["git","collaboration"]},"prevItem":{"title":"Git submodule \ub3c4\uc785\ud558\uae30","permalink":"/git-submodule"},"nextItem":{"title":"\ud300 \uc778\ud504\ub77c \uc544\ud0a4\ud14d\ucc98 \uac1c\uc120 \ubc29\ud5a5","permalink":"/infrastructure"}},"content":"## \ub4e4\uc5b4\uac00\uae30\\n\\n\ud2b8\ub9bd\ub4dc\ub85c\uc6b0 \ud300 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \ud611\uc5c5\uc744 \uc9c4\ud589\ud558\uba74\uc11c \uacf5\uac1c\ub418\uba74 \uc548 \ub418\ub294 \ubbfc\uac10(private) \uc815\ubcf4\uac00 \uc678\ubd80\uc5d0 \ub178\ucd9c\ub420 \ubed4\ud55c \uc0c1\ud669\uc774 \uc790\uc8fc \uc788\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\nGit submodule\uc744 \uc0ac\uc6a9\ud558\uba74\uc11c Gradle\uc5d0 copy \uc124\uc815\uc744 \ucd94\uac00\ud55c \uac83\uc774 \ubb38\uc81c\uc758 \uc6d0\uc778\uc774\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\ubbfc\uac10 \uc815\ubcf4\uac00 \uc678\ubd80\uc5d0 \ub178\ucd9c\ub418\uc9c0 \uc54a\ub3c4\ub85d \ud558\uae30 \uc704\ud574 \uc774\ub97c \ud574\uacb0\ud558\ub824\uace0 \uc2dc\ub3c4\ud588\uc2b5\ub2c8\ub2e4.\\n\\n# \ubbfc\uac10 \uc815\ubcf4 \ub178\ucd9c \ubb38\uc81c\\n\\n## \ubc30\uacbd\\n\ud2b8\ub9bd\ub4dc\ub85c\uc6b0\uc758 \ubc31\uc5d4\ub4dc \ud300\uc740 Git submodule\uc744 \uc0ac\uc6a9\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![image](https://github.com/woowacourse-teams/2023-trip-draw/assets/106813090/f948787e-1ceb-47d4-bb5a-f5a7a37b13fb)\\n\\nsubmodule \ub0b4\ubd80\uc5d0\ub294 \uc5ec\ub7ec application.yml \ud30c\uc77c\ub4e4\uc774 \uc788\uc2b5\ub2c8\ub2e4. \uc774 yml \ud30c\uc77c\ub4e4\uc740 profile\ub85c \uad6c\ubd84\ub418\uace0 \uc678\ubd80\ub85c \ub178\ucd9c\ub418\uba74 \uc548 \ub418\ub294 private \ud55c \ud658\uacbd\ubcc0\uc218\ub4e4\uc744 \ud3ec\ud568\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](https://velog.velcdn.com/images/153plane/post/3d4664a3-383e-4d7e-ac75-809bc9b1591b/image.png)\\n\\n\\n\uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc2e4\ud589\ud560 \ub54c\ub294 `-Dspring.profiles.active={profile_name}` \uc124\uc815\uc73c\ub85c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc801\ud569\ud55c profile\uc744 \ub9e4\ud551\ud569\ub2c8\ub2e4.\\n\\n\uadf8\ub807\ub2e4\uba74 submodule\uc5d0 \uc788\ub294 application.yml \ud30c\uc77c\uc744 \uc5b4\ub5bb\uac8c \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub0b4\ubd80\ub85c \ubd88\ub7ec\uc624\uace0 \uc788\uc744\uae4c\uc694?\\n\\n\uadf8\uac83\uc740 build.gradle \ud30c\uc77c\uc744 \ubcf4\uba74 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![image](https://github.com/woowacourse-teams/2023-trip-draw/assets/106813090/8ca0d1b7-11e2-4822-8efc-7c5a0abe9112)\\n\\nbuild.gradle \uc744 \ubcf4\uba74, build \uc2dc submodule \ub514\ub809\ud130\ub9ac\uc5d0 \uc788\ub294 \ud30c\uc77c\ub4e4\uc744 \ubaa8\ub450 `src/main/resources` \ub85c copy \ud558\ub294 \ub85c\uc9c1\uc774 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ub530\ub77c\uc11c \ucf54\ub4dc\ub97c build \ud558\uace0 jar \ub97c \uc2e4\ud589\ud560 \ub54c submodule\uc5d0 \uc788\ub294 yml \ud30c\uc77c\ub4e4\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uac83\uc785\ub2c8\ub2e4.\\n\\n\uc774 \ubc29\ubc95\uc740 \ud3b8\ub9ac\ud558\uc9c0\ub9cc \uc2ec\uac01\ud55c \ubb38\uc81c\ub97c \uac16\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n## \ubb38\uc81c\\n\uc5b4\ub290 \ud658\uacbd\uc5d0\uc11c\ub4e0 build \uc2dc submodule \ub514\ub809\ud130\ub9ac\uc5d0 \uc788\ub294 yml \ud30c\uc77c\ub4e4\uc774 \ubaa8\ub450 resources \ub85c \ubcf5\uc0ac\ub418\ub294 \uac83\uc774 \ubb38\uc81c\uc785\ub2c8\ub2e4.\\n\\n![image](https://github.com/woowacourse-teams/2023-trip-draw/assets/106813090/96cf9d21-1fe8-4dbf-b6ca-575cd16df98b)\\n\\n\uc704\ucc98\ub7fc local \ud658\uacbd\uc5d0\uc11c \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \uc2e4\ud589\ud560 \ub54c\uc5d0\ub3c4 yml \ud30c\uc77c\ub4e4\uc774 \ubcf5\uc0ac\ub429\ub2c8\ub2e4.\\n\\nsubmodule \uc5d0 yml \ud30c\uc77c\ub4e4\uc744 \ubd84\ub9ac\ud574\ub454 \uc774\uc720\ub294 \uc774 yml \ud30c\uc77c\ub4e4\uc774 private \uc815\ubcf4\ub4e4\uc744 \ud3ec\ud568\ud558\uace0 \uc788\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.\\n\\n\ud558\uc9c0\ub9cc \uc774 \ud30c\uc77c\ub4e4\uc744 resources \uc5d0 \ubcf5\uc0ac\ud574\uc11c \uc0ac\uc6a9\ud55c\ub2e4\uba74, **\ub2e4\ub978 \ucf54\ub4dc\uc5d0 \ub300\ud55c commit & push \ub97c \uc9c4\ud589\ud560 \ub54c yml \ud30c\uc77c\ub3c4 \ud568\uaed8 \ud3ec\ud568\ub420 \uac00\ub2a5\uc131\uc774 \uc788\uc2b5\ub2c8\ub2e4**.\\n\\n\ud604\uc7ac \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c\ub294 `.gitignore` \uc5d0 private files \ub4e4\uc744 \ub4f1\ub85d\ud574\ub193\uace0 \uc774\ub97c \ubc29\uc9c0\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![image](https://github.com/woowacourse-teams/2023-trip-draw/assets/106813090/ff4f42b7-5814-4ad0-8985-5fa4eab3b1f3)\\n\\n\ub2e4\ub9cc, \uc0c8\ub85c\uc6b4 yml \ud30c\uc77c\uc774 \ucd94\uac00\ub418\uac70\ub098 \uae30\uc874 yml \ud30c\uc77c\uc758 \uc774\ub984\uc744 \uc218\uc815\ud560 \uacbd\uc6b0 `.gitignore` \uc5d0 \uc774\ub7ec\ud55c \ubcc0\uacbd\uc0ac\ud56d\uc744 \ubc18\uc601\ud558\ub294 \uac83\uc744 \uc78a\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n**\uc0ac\ub78c\uc758 \uc2e4\uc218(\ud734\uba3c \uc5d0\ub7ec)\ub85c \uc778\ud574 \ubbfc\uac10 \uc815\ubcf4\uac00 \ub178\ucd9c\ub418\ub294 \ub9e4\uc6b0 \ud070 \uc0ac\uace0\ub97c \uc57c\uae30\ud560 \uc218 \uc788\ub294 \uad6c\uc870**\uc785\ub2c8\ub2e4.\\n\\n\uc2e4\uc81c\ub85c \ud611\uc5c5\uc744 \uc9c4\ud589\ud558\uba74\uc11c \ud300\uc6d0\ub4e4\uc774 `\ud639\uc2dc \ub0b4\uac00 yml\uae4c\uc9c0 push\ud588\ub098?` \ud558\uace0 \ubd88\uc548\uc744 \ub290\ub07c\uac70\ub098, \uc62c\ub77c\uac00\uc9c0 \uc54a\uc740 \uac83\uc744 \ud655\uc778\ud558\uace0 \uc548\ub3c4\uc758 \ud55c\uc228\uc744 \ub0b4\uc26c\ub294 \ubaa8\uc2b5\uc744 \ubaa9\uaca9\ud588\uc2b5\ub2c8\ub2e4.\\n\\n## \ud574\uacb0\\n\\n\ubbfc\uac10 \uc815\ubcf4 \ub178\ucd9c \uc0ac\uace0\ub97c \ub9c9\uae30 \uc704\ud574\uc11c\ub294 gradle.build \ub97c \ud1b5\ud574 resources\uc5d0 \uc9c1\uc811 copy \ud558\ub294 \ub85c\uc9c1\uc744 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc544\uc57c \ud569\ub2c8\ub2e4.\\n\\n\ub3d9\uc77c\ud55c \ub3d9\uc791\uc744 \ud558\uba74\uc11c \ubcf4\ub2e4 \uc548\uc804\ud55c \ub450 \uac00\uc9c0 \ubc29\ubc95\uc744 \ucc3e\uc558\uc2b5\ub2c8\ub2e4.\\n\\n### 1. spring.config.import\\n\\n```yml\\nspring:\\n  config:\\n    import: {yml \ud30c\uc77c \uacbd\ub85c}\\n    activate:\\n      on-profile: {profile \uc774\ub984}\\n```\\n\\nspring.config.import \uc124\uc815\uc744 \ud1b5\ud574 `src/main/resources` \uc678\ubd80\uc5d0 \uc704\uce58\ud55c yml \ud30c\uc77c\uc744 \ubd88\ub7ec\uc640 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\nresources \ub514\ub809\ud130\ub9ac\uc5d0 copy \ud558\uc9c0 \uc54a\uc544\ub3c4 \ub418\ub294 \ubc29\ubc95\uc785\ub2c8\ub2e4.\\n\\n### 2. config \ub514\ub809\ud130\ub9ac\\n![image](https://github.com/woowacourse-teams/2023-trip-draw/assets/106813090/444da9d8-0621-4576-b4e3-b03b60b2d568)\\n\\n[Spring \uacf5\uc2dd\ubb38\uc11c](https://docs.spring.io/spring-boot/docs/1.5.22.RELEASE/reference/html/boot-features-external-config.html#boot-features-external-config-application-property-files)\ub97c \uc0b4\ud3b4\ubcf4\uba74, SpringApplication\uc774 \ub85c\ub4dc\ub420 \ub54c yml \ud30c\uc77c\uc744 \uc77d\ub294 \uc21c\uc11c\uac00 \uba85\uc2dc\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n1. \ud604\uc7ac \ub514\ub809\ud130\ub9ac\uc5d0 \uc874\uc7ac\ud558\ub294 `/config` \ub514\ub809\ud130\ub9ac\\n2. \ud604\uc7ac \ub514\ub809\ud130\ub9ac\\n3. classpath \uc5d0 \uc874\uc7ac\ud558\ub294 `/config` \ub514\ub809\ud130\ub9ac\\n4. classpath\\n\\nclasspath \ud639\uc740 \ud504\ub85c\uc81d\ud2b8 \ub514\ub809\ud130\ub9ac\uc5d0\uc11c `config` \ub77c\ub294 \uc774\ub984\uc758 \ub514\ub809\ud130\ub9ac\uc5d0 \uc874\uc7ac\ud558\ub294 yml \ud30c\uc77c\uc744 \uc77d\ub294 \uac83\uc744 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ub530\ub77c\uc11c submodule\uc758 \uc774\ub984\uc744 config \ub85c \uc124\uc815\ud574\ub454\ub2e4\uba74 \ubcc4\ub2e4\ub978 import \uc5c6\uc774\ub3c4 yml \ud30c\uc77c\uc744 \uc77d\uac8c \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\nsubmodule\uc758 \uc774\ub984\uacfc \uacbd\ub85c\ub97c \ubcc0\uacbd\ud558\ub294 \uba85\ub839\uc5b4\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n```shell\\ngit mv /{\ud604\uc7ac submodule \uacbd\ub85c}/{\ud604\uc7ac submodule \uc774\ub984} /{\ubcc0\uacbd\ud560 submodule \uacbd\ub85c}/{\ubcc0\uacbd\ud560 submodule \uc774\ub984}\\n```\\n\\n## \uc120\ud0dd\\n\ub450 \ubc88\uc9f8 \ubc29\ubc95(/config \ub514\ub809\ud130\ub9ac)\uc744 \uc120\ud0dd\ud558\uae30\ub85c \uacb0\uc815\ud588\uc2b5\ub2c8\ub2e4.\\n\\n\uc720\uc9c0\ubcf4\uc218\uc5d0 \ub354 \uc720\ub9ac\ud558\ub2e4\uace0 \ud310\ub2e8\ud588\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.\\n\\nsubmodule \ub514\ub809\ud130\ub9ac\uc758 \uc774\ub984\uc744 config\ub85c \uc9d3\ub294\ub2e4\uba74, import\ub97c \uba85\uc2dc\ud558\uc9c0 \uc54a\uc544\ub3c4 \ub418\ub294 \uc810\uc774 \ud3b8\ub9ac\ud558\uac8c \ub290\uaef4\uc84c\uc2b5\ub2c8\ub2e4. import \uacbd\ub85c\ub97c \uc124\uc815\ud558\ub294 \uac83\ub3c4 \uad00\ub9ac\ud574\uc57c \ud560 \uc694\uc18c\uac00 \ub420 \uc218 \uc788\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.\\n\\n`git mv` \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 submodule\uc758 \uc704\uce58\uc640 \uc774\ub984\uc744 \ubcc0\uacbd\ud588\uc2b5\ub2c8\ub2e4.\\n\\n![](https://velog.velcdn.com/images/153plane/post/f3c2db3c-efd0-40fa-b7dc-37cf4aeb3836/image.png)\\n\\n\uc774\uc81c resources \ub514\ub809\ud130\ub9ac \ud558\uc704\uc5d0 `config` \ub77c\ub294 \uc774\ub984\uc758 submodule\uc774 \uc874\uc7ac\ud558\uace0 \uc5ec\uae30\uc11c yml \ud30c\uc77c\ub4e4\uc774 \uad00\ub9ac\ub429\ub2c8\ub2e4.\\n\\n\uae30\uc874\uc5d0 build.gradle\uc5d0 \uc788\ub358 copy \ub85c\uc9c1\uc740 \uc0ad\uc81c\ud588\uc2b5\ub2c8\ub2e4.\\n\\n\ub354 \uc774\uc0c1 \uc774 \ubb38\uc81c\ub85c \ubbfc\uac10 \uc815\ubcf4\uac00 \ub178\ucd9c\ub418\uc9c0 \uc54a\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4!"},{"id":"infrastructure","metadata":{"permalink":"/infrastructure","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-10-19-\ud300 \uc778\ud504\ub77c \uc544\ud0a4\ud14d\ucc98 \uac1c\uc120 \ubc29\ud5a5/2023-10-19-\ud300 \uc778\ud504\ub77c \uc544\ud0a4\ud14d\ucc98 \uac1c\uc120 \ubc29\ud5a5.mdx","source":"@site/blog/2023-10-19-\ud300 \uc778\ud504\ub77c \uc544\ud0a4\ud14d\ucc98 \uac1c\uc120 \ubc29\ud5a5/2023-10-19-\ud300 \uc778\ud504\ub77c \uc544\ud0a4\ud14d\ucc98 \uac1c\uc120 \ubc29\ud5a5.mdx","title":"\ud300 \uc778\ud504\ub77c \uc544\ud0a4\ud14d\ucc98 \uac1c\uc120 \ubc29\ud5a5","description":"\uac1c\uc694","date":"2023-10-19T00:00:00.000Z","formattedDate":"2023\ub144 10\uc6d4 19\uc77c","tags":[{"label":"infrastructure","permalink":"/tags/infrastructure"}],"readingTime":6.545,"hasTruncateMarker":false,"authors":[{"name":"\ud5c8\ube0c","title":"Backend","url":"https://github.com/greeng00se","imageURL":"https://github.com/greeng00se.png","key":"herb"}],"frontMatter":{"title":"\ud300 \uc778\ud504\ub77c \uc544\ud0a4\ud14d\ucc98 \uac1c\uc120 \ubc29\ud5a5","slug":"infrastructure","authors":["herb"],"tags":["infrastructure"]},"prevItem":{"title":"Git \ubbfc\uac10 \uc815\ubcf4 \ub178\ucd9c \ubb38\uc81c \ud574\uacb0\ud558\uae30","permalink":"/Git-submodule-private"},"nextItem":{"title":"HikariCP \uc124\uc815","permalink":"/hikari-cp"}},"content":"### \uac1c\uc694 \\n\\n> \ud604\uc7ac \ud300\uc758 \uc544\ud0a4\ud14d\ucc98\uc5d0\uc11c \uc0ac\uc6a9\uc790\uac00 \ub298\uc5b4\ub0ac\uc744 \ub54c \ubb38\uc81c\uac00 \ub420 \uc218 \uc788\ub294 \ubd80\ubd84\uc744 \uc124\uba85\ud558\uace0, \uc774\ub97c \uac1c\uc120\ud560 \uc218 \uc788\ub294 \ubc29\ubc95\uc5d0 \ub300\ud574 \uc791\uc131\ud55c\ub2e4.  \\n> \ub9cc\uba85, 10\ub9cc\uba85, 1,000\ub9cc\uba85\uc774 \uc0ac\uc6a9\ud574\ub3c4 \uc11c\ube44\uc2a4\ud560 \uc218 \uc788\ub3c4\ub85d \ud300\uc758 \uc778\ud504\ub77c \uc544\ud0a4\ud14d\ucc98 \uac1c\uc120 \ubc29\ud5a5\\n\\n\uc0ac\uc6a9\uc790\uac00 1000\ub9cc\uba85\uc774 \ub418\uc5c8\uc73c\uba74 \uc88b\uaca0\uc9c0\ub9cc, \uadf8\ub7f4 \uc218 \uc5c6\uc73c\ub2c8 \uc0ac\uc6a9\uc790\uc5d0 \ub300\ud55c \uac00\uc815\uc744 \uc138\uc6b0\uace0 \ud574\ub2f9 \ubd80\ubd84\uc5d0 \ub300\ud574 \uace0\ubbfc\ud574\ubcf4\ub824\uace0 \ud569\ub2c8\ub2e4.  \\n\\n### \uc0ac\uc6a9\uc790\uc5d0 \ub300\ud55c \uac00\uc815\\n\\n1\uc778\ub2f9 \uad6d\ub0b4 \uc5ec\ud589 \ud69f\uc218\ub294 \ud3c9\uade0 \uc57d 7\ud68c\ub77c\uace0 \ud569\ub2c8\ub2e4.  \\n\uc6b0\ub9ac \uc11c\ube44\uc2a4\uc758 \uc0ac\uc6a9\uc790\ub294 1\ub144\uc5d0 \ub2f9\uc77c\uce58\uae30 \uc5ec\ud589\uc744 7\ubc88\uc529 \uac00\uace0, \uc5ec\ud589\ub9c8\ub2e4 \ud2b8\ub9bd\ub4dc\ub85c\uc6b0\ub97c \uc801\uadf9\uc801\uc73c\ub85c \uc0ac\uc6a9\ud55c\ub2e4\uace0 \uac00\uc815\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.  \\n\ud558\ub8e8\uc5d0 12\uc2dc\uac04\uc758 \uc5ec\ud589\uc744 \ub2e4\ub2c8\uace0, 5\ubd84 \ub2e8\uc704\ub85c \uc704\uce58\uc815\ubcf4 \uc800\uc7a5\uc744 \ud558\uae30 \ub54c\ubb38\uc5d0 \uc2dc\uac04 \ub2f9 12\ubc88\uc758 \uc704\uce58\uc815\ubcf4 \uc800\uc7a5 \uc694\uccad\uc774 \uc774\ub8e8\uc5b4\uc9c0\uac8c \ub429\ub2c8\ub2e4.  \\n\\n> 7(\uc77c) x 12(\uc2dc\uac04) x 12(\uc704\uce58 \uc815\ubcf4) = 1008  \\n\\n\uc5f0\uac04 1\uc778\ub2f9 \uc57d 1008\ud68c\uc758 \uc704\uce58 \uc815\ubcf4 \uc800\uc7a5 \uc694\uccad\uc744 \ud558\uac8c \ub429\ub2c8\ub2e4.  \\n\uc870\ud68c\uc758 \uacbd\uc6b0 \uba85\ub839 \ucffc\ub9ac\uc758 3\ubc30 \uc815\ub3c4\ub85c \uac00\uc815\ud558\uace0, \uc5ec\ud589\uc744 \uc790\uc8fc \ub2e4\ub2c8\ub294 \uc131\uc218\uae30(3\ubc30) x \uc548\uc804\uacc4\uc218(3\ubc30) \uc815\ub3c4\ub85c \uac00\uc815\uc744 \ud558\uace0 \uc9c4\ud589\ud574\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.  \\n\\n### \ud604\uc7ac \ud2b8\ub9bd\ub4dc\ub85c\uc6b0\uc758 \uc11c\ube44\uc2a4 \uad6c\uc131\ub3c4\\n\\n![./infra1.png](./infra1.png)\\n\\n\ud604\uc7ac \ud2b8\ub9bd\ub4dc\ub85c\uc6b0 \uc11c\ube44\uc2a4\uc758 \uacbd\uc6b0 \uc704\uc5d0\uc11c \ub0b4\ub9b0 \uac00\uc815\uc744 \ud1b5\ud574 1000\uba85\uc758 \uc0ac\uc6a9\uc790 \uc815\ub3c4\ub97c \ubb34\ub09c\ud558\uac8c \ubc1b\uc744 \uc218 \uc788\uc744 \uac83\uc73c\ub85c \ubcf4\uc785\ub2c8\ub2e4.  \\n\\n### 1\ub9cc\uba85\\n\\n\uc704\uc5d0\uc11c \uc124\uc815\ud55c \uc218\uce58\ub85c \uacc4\uc0b0\ud55c\ub2e4\uba74 1\ub9cc\uba85\uc758 \uc0ac\uc6a9\uc790\uac00 \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uace0 \ud558\ub354\ub77c\ub3c4 \uac10\ub2f9\ud560 \uc218 \uc5c6\ub294 \uc591\uc758 \uc694\uccad\uc774 \ub4e4\uc5b4\uc624\uc9c0\ub294 \uc54a\uc2b5\ub2c8\ub2e4.  \\n\ud558\uc9c0\ub9cc \uac11\uc790\uae30 \ud2b8\ub798\ud53d\uc774 \ub298\uc5b4\ub0a0 \ub54c\ub97c \ub300\ube44 AutoScaling, \ub610\ud55c \uc11c\ube44\uc2a4 \uc815\ubcf4\ub4e4\uc758 \ubc31\uc5c5\uc744 \uc704\ud574 DB \uc774\uc911\ud654\ub97c \uc9c4\ud589\ud560 \uc218 \uc788\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4.  \\nSPOF\ub97c \uc904\uc774\uace0 \uc11c\ube44\uc2a4\uc758 \uac00\uc6a9\uc131\uc744 \uc99d\uac00\uc2dc\ud0ac \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\n![./infra2.png](./infra2.png)\\n\\n### 10\ub9cc\uba85\\n\\n\uace0\uc131\ub2a5 \uc778\uc2a4\ud134\uc2a4\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0 1\ub9cc\uba85\uc758 \uc778\ud504\ub77c \uad6c\uc870\uc5d0\uc11c 10\ub9cc\uba85\uc758 \uc0ac\uc6a9\uc790\uac00 \ub4e4\uc5b4\uc628\ub2e4\uba74, \uc870\ud68c \uc694\uccad\uc744 \ucc98\ub9ac\ud560 \uc218 \uc5c6\ub294 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud560 \uac83 \uac19\uc2b5\ub2c8\ub2e4.  \\n10\ub9cc\uba85\uc774 \uc0ac\uc6a9\ud558\ub294 \uc11c\ube44\uc2a4\uac00 \ub41c\ub2e4\uba74, \ucd08\ub2f9 230 TPS \uc815\ub3c4\uc758 \ubd80\ud558\ub97c \uacac\ub38c\ub0b4\uc57c \ud558\ub294\ub370\uc694.  \\n\uac10\uc0c1\uacfc \uc5ec\ud589 \uc870\ud68c\uc758 \uacbd\uc6b0 \uac00\uc7a5 \ucd5c\uadfc\uc758 \uc815\ubcf4\ubd80\ud130 \uc870\ud68c\ub418\uae30 \ub54c\ubb38\uc5d0, \uc694\uccad\uc744 \uce90\uc2f1\ud560 \uc218 \uc788\ub294 Redis\ub97c \ub450\uace0 \uce90\uc2dc \ud788\ud2b8\uc5d0 \uc2e4\ud328\ud558\ub294 \uacbd\uc6b0 Replica DB\ub85c \uc870\ud68c \uc694\uccad\uc774 \uac00\ub3c4\ub85d \ud569\ub2c8\ub2e4.  \\n\ubcf5\uc7a1\ud55c \uc11c\ube44\uc2a4\uc758 \uacbd\uc6b0 10\ub9cc\uc758 \uc0ac\uc6a9\uc790\uac00 \uc788\uc73c\uba74 \ud074\ub77c\uc6b0\ub4dc\uac00 \uc81c\uacf5\ud558\ub294 \uad00\ub9ac\ud615 \uc11c\ube44\uc2a4\ub97c `\uc608) RDS, ElasticCache` \uc0c1\ud669\uc5d0 \ub530\ub77c \uace0\ub824\ud560 \uc218 \uc788\uaca0\uc9c0\ub9cc, \ud604\uc7ac \uc11c\ube44\uc2a4\uc758 \uaddc\ubaa8\ub85c\ub294 \uad00\ub9ac\ud615 \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc544\ub3c4 \ucda9\ubd84\ud788 \uc694\uccad\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\uc744 \uac83 \uc73c\ub85c \uc0dd\uac01\ub429\ub2c8\ub2e4.  \\n\ucd94\ud6c4 \ud655\uc7a5 & \uc131\uc7a5 \uac00\ub2a5\uc131\uc744 \uace0\ub824\ud558\uc5ec \uad00\ub9ac \ube44\uc6a9\uacfc \uc11c\ube44\uc2a4\uc758 \ube44\uc6a9\uc744 \uc798 \uace0\ub824\ud558\uc5ec \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc744 \uc9c4\ud589\ud574\uc57c\ud560 \uac83 \uac19\uc2b5\ub2c8\ub2e4.  \\n\\n![./infra3.png](./infra3.png)\\n\\n### 100\ub9cc\uba85\\n\\n100\ub9cc\uba85\uc758 \uc0ac\uc6a9\uc790\uac00 \ub4e4\uc5b4\uc628\ub2e4\uba74 10\ub9cc\uba85\uc758 \uc778\ud504\ub77c \uad6c\uc870\uc5d0\uc11c \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc2dc \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud560 \uac83 \uac19\uc2b5\ub2c8\ub2e4.  \\n\uc77c\uc815 \uc774\uc0c1\uc758 TPS\uac00 \ub098\uc624\uae30 \ub54c\ubb38\uc5d0 \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc758 \uacbd\uc6b0 Labmda\uc640 \uac19\uc740 \uc11c\ubc84\ub9ac\uc2a4 \ud50c\ub7ab\ud3fc\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4.  \\n\ud604\uc7ac \uc11c\ube44\uc2a4 \uae30\uc900\uc73c\ub85c \uac10\uc0c1 \uc800\uc7a5, \uc5ec\ud589 \uc800\uc7a5\uc2dc \uacbd\ub85c \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.  \\n\uacbd\ub85c \uc774\ubbf8\uc9c0\ub97c \ubcf4\uc5ec\uc8fc\ub294 \uae30\ub2a5\uc744 \ud074\ub77c\uc774\uc5b8\ud2b8 \ucabd\uc73c\ub85c \uc62e\uae30\uac70\ub098(\uc548\ub4dc\ub85c\uc774\ub4dc\uc5d0\uc11c \uc704\uce58 \uc815\ubcf4\ub9cc\uc73c\ub85c \uadf8\ub9ac\uac8c \ud558\ub3c4\ub85d) Lambda\ub97c \uc774\uc6a9\ud558\uc5ec python \uc2a4\ud06c\ub9bd\ud2b8\ub85c \uacbd\ub85c \uc774\ubbf8\uc9c0\ub97c \ub9cc\ub4dc\ub294 \ubc29\ubc95\uc774 \uc788\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4.  \\n\ucd94\uac00\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc2e4\ud328\uc2dc \uc7ac\uc2dc\ub3c4\uac00 \ud544\uc694\ud558\ub2e4\uba74 SQS\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc2e4\ud328\ud55c \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc694\uccad\uc744 \uc7ac\uc2dc\ub3c4 \ud050\uc5d0 \ub123\uc5b4 \uc11c\ube44\uc2a4\uc5d0 \uc548\uc815\uc131\uc744 \ub354\ud560 \uc218 \uc788\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4.  \\n\\n![./infra4.png](./infra4.png)\\n\\n### 1000\ub9cc\uba85\\n\\n\uc0ac\uc2e4 1000\ub9cc\uba85\uc774 \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uace0 \ud558\uba74 \uc0c1\uc0c1\uc774 \uac00\uc9c0 \uc54a\ub294\ub370\uc694.      \\n\ub2e4\ub7c9\uc758 \uc694\uccad\uc774 \ubc1c\uc0dd\ud558\uae30 \ub54c\ubb38\uc5d0, \ubb34\uc218\ud55c \ub85c\uadf8\uc640 DB\uc5d0 \ub370\uc774\ud130\uac00 \ucd95\uc801\ub418\uba74\uc11c \ubaa8\ub4e0 \ubd80\ubd84\uc5d0\uc11c \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud560 \uac83 \uac19\uc2b5\ub2c8\ub2e4.  \\n\ub9ce\uc740 \uc0ac\uc6a9\uc790\uac00 \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \ub9cc\ud07c \uc11c\ube44\uc2a4\uc758 \uace0\uac00\uc6a9\uc131\uc774 \uac00\uc7a5 \uc911\uc694\ud560 \uac83 \uac19\uc2b5\ub2c8\ub2e4.  \\n100\ub9cc\uba85 \uc778\ud504\ub77c \uad6c\uc870\uc5d0\uc11c SPOF\ub97c \ucd5c\ub300\ud55c \uc81c\uac70\ud558\uace0, Multi AZ\ub97c \uace0\ub824\ud560 \uac83 \uac19\uc2b5\ub2c8\ub2e4.  \\n\ub2e4\ub9cc \uc11c\ube44\uc2a4\uc758 \ubcf5\uc7a1\ub3c4\uac00 \ub9e4\uc6b0 \ub0ae\uae30 \ub54c\ubb38\uc5d0, \uc11c\ube44\uc2a4\ub97c \ubd84\ub9ac\ud558\ub294 \uac83\uc740 \ud544\uc694\uc5c6\uc5b4 \ubcf4\uc785\ub2c8\ub2e4.  \\n\\n### \ucc38\uace0 \uc790\ub8cc\\n\\nhttps://www.youtube.com/watch?v=fhNpjPr-f54&t=1494s  \\nhttps://www.youtube.com/watch?v=z68l2X5KoC4  \\nhttps://www.youtube.com/watch?v=eLOURl9hP5c  \\nhttps://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/AuroraUserGuide/rds-proxy.html"},{"id":"hikari-cp","metadata":{"permalink":"/hikari-cp","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-10-18-HikariCP \uc124\uc815/2023-10-18-HikariCP \uc124\uc815.mdx","source":"@site/blog/2023-10-18-HikariCP \uc124\uc815/2023-10-18-HikariCP \uc124\uc815.mdx","title":"HikariCP \uc124\uc815","description":"\ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc11c\ubc84\ub294 DB\uc640 Connecting \ube44\uc6a9\uc744 \uc904\uc774\uae30 \uc704\ud574 \ucee4\ub125\uc158 \ud480\uc744 \uc0dd\uc131\ud558\uace0 \uad00\ub9ac\ud55c\ub2e4.","date":"2023-10-18T00:00:00.000Z","formattedDate":"2023\ub144 10\uc6d4 18\uc77c","tags":[{"label":"database","permalink":"/tags/database"},{"label":"hikari-cp","permalink":"/tags/hikari-cp"}],"readingTime":4.18,"hasTruncateMarker":false,"authors":[{"name":"\ud6c4\ucd94","title":"Backend","url":"https://github.com/Combi153","imageURL":"https://github.com/Combi153.png","key":"huchu"}],"frontMatter":{"title":"HikariCP \uc124\uc815","slug":"hikari-cp","authors":["huchu"],"tags":["database","hikari-cp"]},"prevItem":{"title":"\ud300 \uc778\ud504\ub77c \uc544\ud0a4\ud14d\ucc98 \uac1c\uc120 \ubc29\ud5a5","permalink":"/infrastructure"},"nextItem":{"title":"\ubb34\uc911\ub2e8 \ubc30\ud3ec \uacfc\uc815","permalink":"/nonstop-deploy"}},"content":"\ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc11c\ubc84\ub294 DB\uc640 Connecting \ube44\uc6a9\uc744 \uc904\uc774\uae30 \uc704\ud574 \ucee4\ub125\uc158 \ud480\uc744 \uc0dd\uc131\ud558\uace0 \uad00\ub9ac\ud55c\ub2e4.  \\nSpringBoot \ub294 \ucee4\ub125\uc158 \ud480 \ud504\ub808\uc784\uc6cc\ud06c\ub85c HikariCP\ub97c \uc0ac\uc6a9\ud55c\ub2e4.  \\n\uac1c\ubc1c\uc790\ub294 application.yml \ud30c\uc77c \ub4f1\uc744 \uc870\uc791\ud558\uc5ec HikariCP\uc758 \uc124\uc815\uc744 \uc81c\uc5b4\ud560 \uc218 \uc788\uc73c\uba70, \uc774\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc131\ub2a5\uc5d0 \uc601\ud5a5\uc744 \ubbf8\uce5c\ub2e4.  \\n\ud2b8\ub9bd\ub4dc\ub85c\uc6b0\ub294 HikariCP\uc758 Pool size \ub97c \uc870\uc815\ud574 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uc131\ub2a5\uc744 \ub192\uc774\uace0\uc790 \uc2dc\ub3c4\ud588\ub2e4.  \\n\\n### \uacf5\uc2dd\ubb38\uc11c \ucc38\uc870\\n\\nHikariCP\uc758 Github wiki \uc5d0\ub294 \ucd5c\uc801 Pool Size\ub97c \ub3c4\ucd9c\ud558\ub294 \uacf5\uc2dd\uc774 \uba85\uc2dc\ub418\uc5b4 \uc788\ub2e4.\\n\\n> **The Formula**  \\n> Connections = (core_count * 2) + effective_spindle_count\\n>\\n\\ncore_count : \ucef4\ud4e8\ud130 CPU \ucf54\uc5b4\uc758 \uc218\ub97c \uc758\ubbf8\ud55c\ub2e4.  \\neffective_spindle_count : \ud68c\uc804\ud558\ub294 \ud558\ub4dc\ub514\uc2a4\ud06c(HDD)\uc758 \uc218\ub97c \uc758\ubbf8\ud55c\ub2e4.  \\n\ub9cc\uc57d 4-Core\uc758 CPU\uc640 \ud558\ub098\uc758 \ud558\ub4dc \ub514\uc2a4\ud06c\ub97c \uac16\ub294 \ucef4\ud4e8\ud130\ub77c\uba74, \ucd5c\uc801\uc758 Connection Pool Size\ub294 9\uc774\ub2e4.\\n\\n> 9 = (4 * 2) + 1\\n\\n\ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 EC2 \uc778\uc2a4\ud134\uc2a4\uc5d0 \ub300\ud574\uc11c \ud574\ub2f9 \uacf5\uc2dd\uc758 \ud574\ub97c \ub3c4\ucd9c\ud574\ubcf4\uc558\ub2e4.  \\n\ud2b8\ub9bd\ub4dc\ub85c\uc6b0\uc758 \uc778\uc2a4\ud134\uc2a4\ub294 t4g.small \uc774\uba70, SSD\ub85c \uad6c\uc131\ub41c AMI\ub97c \uc0ac\uc6a9\ud55c\ub2e4.  \\n\\n![./t4gsmall.png](./t4gsmall.png)\\n\\nAWS\uc758 \ubb38\uc11c\uc5d0 \ub530\ub974\uba74 t4g.small \uc778\uc2a4\ud134\uc2a4\uc758 CPU \ucf54\uc5b4\ub294 2\uac1c\uc774\ub2e4. \ub530\ub77c\uc11c core_count = 2\uc774\ub2e4.  \\nEC2\ub294 HDD \uac00 \uc544\ub2c8\ub77c SSD\ub97c \uc0ac\uc6a9\ud55c\ub2e4. \ub530\ub77c\uc11c \uacf5\uc2dd\uc758 effective_spindle_count\uc758 \uac12\uc744 \uc815\ud558\uae30 \ubaa8\ud638\ud588\ub2e4.\\n\\n> There hasn\'t been any analysis so far regarding how well the formula works with SSDs.\\n>\\n\\nHikariCP \ubb38\uc11c\uc5d0\uc11c\ub294 SSD\uc5d0 \ub300\ud574\uc11c\ub294 \uba85\ud655\ud55c \uacb0\ub860\uc744 \ub0b4\ub9ac\uc9c0 \uc54a\uace0 \uc788\ub2e4.  \\n\uacb0\uad6d \uc9c1\uc811 \uc2e4\ud5d8\uc744 \ud1b5\ud574 \ucd5c\uc801\uc758 Pool size\ub97c \ucc3e\uc544\uc57c \ud588\ub2e4.\\n\\n### \uc2e4\ud5d8\\n\\n\uc2e4\ud5d8\uc740 NGrinder\ub85c \ub2e4\uc218\uc758 \uc0ac\uc6a9\uc790\uac00 \uc11c\ubc84\uc5d0 \uc694\uccad\uc744 \ubcf4\ub0b4\ub294 \uc0c1\ud669\uc744 \uac00\uc815\ud558\uace0 HikariCP\uc758 `maximum-pool-size`\ub97c \ub2ec\ub9ac\ud558\uba70 TPS\ub97c \uce21\uc815\ud588\ub2e4.  \\n\ucd1d 100\uba85\uc758 \uac00\uc0c1 \uc0ac\uc6a9\uc790\uac00 \uc810\uc9c4\uc801\uc73c\ub85c 3\ubd84 \ub3d9\uc548 \uc11c\ubc84\uc5d0 \uc694\uccad\uc744 \ubcf4\ub0b4\ub3c4\ub85d \ud588\ub2e4.  \\n\ub610\ud55c DB\uac00 \ucc98\ub9ac\ud558\ub294 \ucffc\ub9ac\uc5d0 \ub530\ub77c \uc2e4\ud5d8 \uacb0\uacfc\uac00 \ub2ec\ub77c\uc9c8 \uc218 \uc788\uc74c\uc744 \uc5fc\ub450\uc5d0 \ub450\uace0 `\uc5ec\ud589 \uc800\uc7a5`, `\uc704\uce58\uc815\ubcf4 \uc800\uc7a5`, `\uc5ec\ud589 \uc804\uccb4 \uc870\ud68c` \uc138 \uc885\ub958\uc758 API \ub97c \uc2e4\ud5d8 \ub300\uc0c1\uc73c\ub85c \uc120\uc815\ud588\ub2e4.\\n\\n### \uc2e4\ud5d8 \uc815\ubcf4\\n\\n\uad6c\uccb4\uc801\uc778 \uc2e4\ud5d8 \uc815\ubcf4\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\nNGrinder \uc124\uc815\\n\\n- VUser : 200\\n- ramp-up : \ucd08\ub2f9 1\uc529 \uc99d\uac00\\n- Test time : 3 minute\\n\\nAPI\\n\\n- POST : /trips\\n- POST : /points\\n- GET : /trips (\uc784\uc758\uc758 \ub370\uc774\ud130 10\ub9cc\uac1c \uae30\uc900)\\n\\nmaximum-pool-size \uc124\uc815\\n\\n- 3\\n- 5 (SSD\ub97c effective_spindle_count = 1\ub85c \uce58\ud658\ud588\uc744 \ub54c \uacf5\uc2dd\uc758 \ud574)\\n- 10 (Spring boot default)\\n- 20\\n\\n### \uc2e4\ud5d8 \uacb0\uacfc\\n\\n\uc2e4\ud5d8 \uacb0\uacfc \uc138 \uc885\ub958\uc758 API \uc5d0\uc11c \ubaa8\ub450 HikariCP\uc758 `maximum-pool-size` \uac00 5\uc77c \ub54c TPS\uac00 \uac00\uc7a5 \ub192\uc558\ub2e4.\\n\\n![./result.png](./result.png)\\n\\n\uc2e4\uc81c \uac12\uc744 \ubcf4\uba74, \uc5ec\ud589 \uc800\uc7a5 : 251, \uc704\uce58\uc815\ubcf4 \uc800\uc7a5 : 262, \uc5ec\ud589 \uc804\uccb4 \uc870\ud68c : 126 TPS \ub97c \uae30\ub85d\ud588\ub2e4.\\n\\n### \uacb0\ub860\\n\\n\ud2b8\ub9bd\ub4dc\ub85c\uc6b0\ub294 HikariCP\uc758 maximum-pool-size \ub97c 5\ub85c \uc124\uc815\ud55c\ub2e4.  \\n\uc774\ub294 NGrinder \ub97c \ud1b5\ud55c \uc131\ub2a5 \uc2e4\ud5d8 \uc911 \uac00\uc7a5 \ub192\uc740 TPS\ub97c \uae30\ub85d\ud55c maximum-pool-size \uc774\ub2e4.  \\n\uad6c\uccb4\uc801\uc73c\ub85c, Spring boot\uc758 default \uc124\uc815 \uac12\ubcf4\ub2e4\ub3c4 \ub192\uc740 \uc131\ub2a5\uc744 \ubcf4\uc600\ub2e4.  \\n\ub610\ud55c SSD\ub97c effective_spindle_count = 1\ub85c \uce58\ud658\ud588\uc744 \ub54c Connections \uacf5\uc2dd\uc758 \ud574\uc774\uae30\ub3c4 \ud558\ub2e4.   \\n\uacf5\uc2dd \ubb38\uc11c\uc758 \uc815\ubcf4\uc640 \uacb0\uc744 \uac19\uc774 \ud558\ub294 \uacb0\uacfc\ub77c\uace0 \ubcfc \uc218 \uc788\ub2e4.\\n\\n### \ucc38\uace0\uc790\ub8cc\\n\\nhttps://github.com/brettwooldridge/HikariCP/wiki/About-Pool-Sizing#the-formula  \\nhttps://dba.stackexchange.com/questions/228663/what-is-effective-spindle-count  \\nhttps://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/cpu-options-supported-instances-values.html"},{"id":"nonstop-deploy","metadata":{"permalink":"/nonstop-deploy","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-10-16-\ubb34\uc911\ub2e8-\ubc30\ud3ec/2023-10-16-\ubb34\uc911\ub2e8-\ubc30\ud3ec.mdx","source":"@site/blog/2023-10-16-\ubb34\uc911\ub2e8-\ubc30\ud3ec/2023-10-16-\ubb34\uc911\ub2e8-\ubc30\ud3ec.mdx","title":"\ubb34\uc911\ub2e8 \ubc30\ud3ec \uacfc\uc815","description":"\ubb34\uc911\ub2e8 \ubc30\ud3ec \uacfc\uc815\uc744 \uc124\uba85\ud55c\ub2e4.","date":"2023-10-16T00:00:00.000Z","formattedDate":"2023\ub144 10\uc6d4 16\uc77c","tags":[{"label":"\ubb34\uc911\ub2e8\ubc30\ud3ec","permalink":"/tags/\ubb34\uc911\ub2e8\ubc30\ud3ec"},{"label":"\ube14\ub8e8-\uadf8\ub9b0","permalink":"/tags/\ube14\ub8e8-\uadf8\ub9b0"}],"readingTime":7.69,"hasTruncateMarker":false,"authors":[{"name":"\ub9ac\uc624","title":"Backend","url":"https://github.com/Jaeyoung22","imageURL":"https://github.com/Jaeyoung22.png","key":"reo"}],"frontMatter":{"title":"\ubb34\uc911\ub2e8 \ubc30\ud3ec \uacfc\uc815","slug":"nonstop-deploy","authors":["reo"],"tags":["\ubb34\uc911\ub2e8\ubc30\ud3ec","\ube14\ub8e8-\uadf8\ub9b0"]},"prevItem":{"title":"HikariCP \uc124\uc815","permalink":"/hikari-cp"},"nextItem":{"title":"Android ViewModel \uc0dd\uc131 \uacfc\uc815","permalink":"/viewmodel-creation-process"}},"content":"\ubb34\uc911\ub2e8 \ubc30\ud3ec \uacfc\uc815\uc744 \uc124\uba85\ud55c\ub2e4.\\n\\n## \ubc30\ud3ec \ubc29\uc2dd\\n\\n\ubb34\uc911\ub2e8 \ubc30\ud3ec \ubc29\uc2dd\uc5d0\ub294 \uc5ec\ub7ec \uc885\ub958\uac00 \uc788\uc73c\ub098, \ud604\uc7ac\uc758 \uc81c\ud55c\ub41c \uc778\uc2a4\ud134\uc2a4 \ud658\uacbd\uc5d0\uc11c \uac00\uc7a5 \ucd5c\uc801\uc758 \ubc29\uc2dd\uc774 \ud3ec\ud2b8 \ud560\ub2f9 \ubc29\uc2dd\uc758 \ube14\ub8e8-\uadf8\ub9b0 \ubc29\uc2dd\uc774\ub77c\uace0 \ud310\ub2e8\ud588\ub2e4. \uae30\uc874\uc5d0 \uc0ac\uc6a9\ud558\ub358 EC2\uc5d0 \uadf8\ub300\ub85c \uc801\uc6a9\ud558\uae30 \ub54c\ubb38\uc5d0 \uac00\uc7a5 \uc800\ub834\ud55c \ubc29\uc2dd\uc774\uae30\ub3c4 \ud558\ub2e4.\\n\ud558\ub098\uc758 \uc778\uc2a4\ud134\uc2a4 \ub0b4\uc5d0\uc11c \ub450 \uac1c\uc758 WAS\uc5d0 \uac01\uac01 \ub2e4\ub978 \ud3ec\ud2b8\ub97c \ud560\ub2f9\ud558\uc5ec \uc9c4\ud589\ud55c\ub2e4. \uc0c1\uc138\ud55c \uc9c4\ud589 \uacfc\uc815\uc740 \uc544\ub798\uc640 \uac19\ub2e4.\\n\\n1. EC2(\ub9ac\ub205\uc2a4 \uc11c\ubc84)\uc5d0 Nginx 1\ub300\uc640 \uc2a4\ud504\ub9c1\ubd80\ud2b8 jar 2\uac1c\ub97c \uc0ac\uc6a9\ud55c\ub2e4.\\n-> Nginx\ub294 80(http), 443(https) \ud3ec\ud2b8\ub97c \uc0ac\uc6a9\ud558\uace0 8080(\uc2a4\ud504\ub9c1\ubd80\ud2b81), 8081(\uc2a4\ud504\ub9c1\ubd80\ud2b82)\uc5d0 \ud3ec\ud2b8 \ud3ec\uc6cc\ub529\uc744 \ud55c\ub2e4.\\n2. \uc0ac\uc6a9\uc790\ub294 \uc11c\ube44\uc2a4 \uc8fc\uc18c\ub85c \uc811\uc18d\ud55c\ub2e4 (80 \ub610\ub294 443 \ud3ec\ud2b8)\\n3. Nginx\ub294 \uc0ac\uc6a9\uc790\uc758 \uc694\uccad\uc744 \ubc1b\uc544\xa0**\ud604\uc7ac \uc5f0\uacb0\ub41c \uc2a4\ud504\ub9c1\ubd80\ud2b8\ub85c \uc694\uccad\uc744 \uc804\ub2ec**\ud55c\ub2e4.\\n4. \ubc30\ud3ec\uac00 \ud544\uc694\ud558\uba74\xa0**Nginx\uc640 \uc5f0\uacb0\ub418\uc9c0 \uc54a\uc740**\xa0\uc2a4\ud504\ub9c1\ubd80\ud2b8\ub85c \ubc30\ud3ec\ud55c\ub2e4.\\n5. \uc0c8\ub85c \ubc30\ud3ec\ub418\ub294 \uc2a4\ud504\ub9c1\ubd80\ud2b8\ub294 \ud604\uc7ac \uc5f0\uacb0\ub41c \uc2a4\ud504\ub9c1\ubd80\ud2b8\uc640 **\ub2e4\ub978 \ud504\ub85c\ud30c\uc77c\uc744 \uc0ac\uc6a9\ud55c\ub2e4.**\\n6. \ubc30\ud3ec\uac00 \ub05d\ub098\uace0 \uc815\uc0c1\uc801\uc73c\ub85c \ubc30\ud3ec\ub97c \ud55c \uc2a4\ud504\ub9c1\ubd80\ud2b8\uac00 \uad6c\ub3d9\uc911\uc778\uc9c0 \ud655\uc778\ud55c\ub2e4.\\n7. 5\uc5d0\uc11c \ud655\uc778\ud55c \uc2a4\ud504\ub9c1\ubd80\ud2b8\uac00 \uc815\uc0c1 \uad6c\ub3d9\uc911\uc774\uba74\xa0`nginx reload`\ub97c \ud1b5\ud574 \ud574\ub2f9 \uc2a4\ud504\ub9c1\ubd80\ud2b8\uc758 \ud3ec\ud2b8\ub97c nginx\uac00 \uc5f0\uacb0\ud558\ub3c4\ub85d \ud55c\ub2e4.\\n8. **Nginx Reload\ub294 1\ucd08 \uc774\ub0b4\uc5d0 \uc2e4\ud589\uc774 \uc644\ub8cc\ub41c\ub2e4**\\n9. \uc774 \ub54c, \ud504\ub85c\ud30c\uc77c \ubcc4\ub85c \ubd84\uae30\ub97c \ud0c0\uc11c \ud3ec\ud2b8 \ud3ec\uc6cc\ub529\uc744 \uc9c4\ud589\ud55c\ub2e4.\\n10. \ub9cc\uc57d \ubc30\ud3ec\uc2dc \ubb38\uc81c\uac00 \uc0dd\uaca8\uc11c rollback\uc774 \ud544\uc694\ud558\uba74 ngix\uac00 \ubc30\ud3ec\uc804\uc5d0 \uc5f0\uacb0\ub418\uc5c8\ub358 \uc2a4\ud504\ub9c1\ubd80\ud2b8\ub97c \ub2e4\uc2dc \uc5f0\uacb0\ud55c\ub2e4.\\n\\n<br></br>\\n\\n\\n## \uc0c1\uc138 \uacfc\uc815\\n\\n\uc0c1\uc138 \uacfc\uc815\uc740 \uc544\ub798\uc640 \uac19\ub2e4.\\n\\n### \uc18c\uc2a4 \ud30c\uc77c \ucd94\uac00\\n\\n\uc6b0\uc120, \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc0ac\uc6a9\ud560 \ud504\ub85c\ud30c\uc77c\uc744 \uc120\ud0dd\ud558\uae30 \uc704\ud574 \ud604\uc7ac \ud504\ub85c\ud30c\uc77c\uc744 \ud655\uc778\ud558\ub294 API\ub97c \uad6c\ud604\ud55c\ub2e4.\\n\\n```java\\n@RequiredArgsConstructor\\n@RequestMapping(\\"/profile\\")\\n@RestController\\npublic class ProfileController {\\n\\nprivate final Environment environment;\\n\\n\\t@GetMapping\\n\\tpublic String readProfile() {\\n\\t\\treturn Arrays.stream(environment.getActiveProfiles())\\n\\t\\t\\t\\t.findFirst()\\n\\t\\t\\t\\t.orElse(\\"\\");\\n\\t}\\n}\\n\\n```\\n\\n```java\\nclass ProfileControllerTest extends ControllerTest {\\n\\n@Test\\nvoid \ud604\uc7ac_\ud504\ub85c\ud30c\uc77c\uc744_\uc77d\ub294\ub2e4() {\\n\\t// when\\n\\tString profile = RestAssured.given().log().all()\\n\\t\\t\\t.when().get(\\"/profile\\")\\n\\t\\t\\t.then().log().all()\\n\\t\\t\\t.statusCode(OK.value())\\n\\t\\t\\t.extract().asString();\\n\\n\\t// then\\n\\tassertThat(profile).isEqualTo(\\"local\\");\\n\\t}\\n}\\n\\n```\\n\\n```java\\n@Override\\npublic void addInterceptors(InterceptorRegistry registry) {\\n\\t\\tregistry.addInterceptor(authInterceptor)\\n\\t\\t// ...\\n\\t\\t.excludePathPatterns(\\"/profile\\");\\n\\t\\t// ...\\n}\\n\\n```\\n\\n\\n\\n\uc774\uc81c \ud604\uc7ac \uc0ac\uc6a9\uc911\uc778 \ud504\ub85c\ud30c\uc77c\uc744 \ubc18\ud658\ud560 \uc218 \uc788\uac8c \ub418\uc5c8\ub2e4.\\n<br></br>\\n\\n\ub2e4\uc74c\uc73c\ub85c, \ud504\ub85c\ud30c\uc77c \ubcc4\ub85c \uc0ac\uc6a9\ud560 \ud3ec\ud2b8\ub97c application.yml\uc5d0\uc11c \uc9c0\uc815\ud574\uc8fc\uc790.\\n\\napplication-prod1.yml\\n```\\nspring:\\n    profiles: prod1\\n\\n// ...\\n\\nserver:\\n    port: 8080\\n\\n```\\napplication-prod2.yml\\n```\\nspring:\\n    profiles: prod2\\n\\n// ...\\n\\nserver:\\n    port: 8081\\n\\n```\\n\\n\ucc98\uc74c\uc5d0\ub294 application-prod.yml\uc5d0\uc11c \uad6c\ubd84\uc120\uc744 \uc774\uc6a9\ud574 \ub450 \ud504\ub85c\ud30c\uc77c\uc744 \ubd84\ub9ac\ud574\uc8fc\uc5c8\ub294\ub370, \uc778\uc2dd\uc744 \ud558\uc9c0 \ubabb\ud55c\ub2e4.\\n\uadf8\ub7ec\ubbc0\ub85c yml\ud30c\uc77c\uc744 \ud504\ub85c\ud30c\uc77c\ub9c8\ub2e4 \ubd84\ub9ac\ud574\uc900\ub2e4.\\n<br></br>\\n\\n### \uc11c\ubc84 \uc124\uc815 \ubcc0\uacbd\\n\\n\ub2e4\uc74c\uc73c\ub85c, \uc11c\ubc84\uc758 \uc124\uc815\uc744 \ubcc0\uacbd\ud55c\ub2e4. \uc544\ub798\uc640 \uac19\uc740 \uc21c\uc11c\ub85c \uc9c4\ud589\ud55c\ub2e4.\\n\\n1. nginx\uac00 service-url.inc \ub0b4\ubd80\uc5d0\uc11c \uc815\uc758\ub41c \ud3ec\ud2b8\ub97c \uc774\uc6a9\ud558\ub3c4\ub85d \uc124\uc815\ud55c\ub2e4.\\n2. \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\uc5d0\uc11c \ud604\uc7ac \uc11c\ube44\uc2a4 \uc911\uc778 \uc2a4\ud504\ub9c1\ubd80\ud2b8\uc758 \ud504\ub85c\ud30c\uc77c\uc744 \ud655\uc778\ud558\uc5ec \ubc30\ud3ec\ub420 \uc2a4\ud504\ub9c1\ubd80\ud2b8\uc758 \ud504\ub85c\ud30c\uc77c\uacfc \ud3ec\ud2b8\ub97c \uc124\uc815\ud55c\ub2e4.\\n3. switch.sh\uc5d0\uc11c service-url.inc \ub0b4\ubd80\uc758 \ud3ec\ud2b8\ub97c \ubcc0\uacbd\ud55c\ub2e4.\\n\\n<br></br>\\n\\n#### 1. nginx\uac00 service-url.inc \ub0b4\ubd80\uc5d0\uc11c \uc815\uc758\ub41c \ud3ec\ud2b8\ub97c \uc774\uc6a9\ud558\ub3c4\ub85d \uc124\uc815\ud55c\ub2e4.\\n\\n\uae30\uc874\uc758 nginx \uc124\uc815 \ud30c\uc77c\uc744 \uc544\ub798\uc640 \uac19\uc774 \ubcc0\uacbd\ud55c\ub2e4.\\n\\n```\\nserver {\\n        // ...\\n        include /(\uc0dd\ub7b5)/service-url.inc;\\n\\n        location / {\\n\\t\\tproxy_pass $service_url$request_uri;\\n\\t}\\n\\n        location /post-images {\\n                alias /var/www/html/file/post-images;\\n                try_files $uri $uri/ =404;\\n        }\\n\\n        location /route-images {\\n                alias /var/www/html/file/route-images;\\n                try_files $uri $uri/ =404;\\n        }\\n}\\n\\n```\\n\\n`include /(\uc0dd\ub7b5)/service-url.inc;`\\n: \ud574\ub2f9 \uc124\uc815 \ud30c\uc77c\uc5d0\uc11c `service-url.inc` \ub0b4\ubd80\uc758 \ubcc0\uc218 \ub4f1\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uac8c \ud55c\ub2e4.\\n\\n`proxy_pass $service_url$request_uri;`\\n: service-url.inc\uc5d0 \uc124\uc815\ub41c url\uacfc \ud604\uc7ac \uc694\uccad\uc774 \uac00\uc9c0\uace0 \uc788\ub294 uri\ub97c \ud569\uce5c Path\ub85c \uc694\uccad\uc744 \ubcf4\ub0b8\ub2e4.\\n\\nservice-url.inc\\n\\n```\\nset $service_url <http://127.0.0.1:8080>;\\n\\n```\\n\\nnginx \uc124\uc815 \ud30c\uc77c\uc5d0 `$service_url` \uc744 \uc81c\uacf5\ud55c\ub2e4. \uae30\ubcf8\uc740 \ub8e8\ud504\ubc31 IP\uc640 8080\ud3ec\ud2b8\uc774\ub2e4.\\n<br></br>\\n\\n#### 2. \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\uc5d0\uc11c \ud604\uc7ac \uc11c\ube44\uc2a4 \uc911\uc778 \uc2a4\ud504\ub9c1\ubd80\ud2b8\uc758 \ud504\ub85c\ud30c\uc77c\uc744 \ud655\uc778\ud558\uc5ec \ubc30\ud3ec\ub420 \uc2a4\ud504\ub9c1\ubd80\ud2b8\uc758 \ud504\ub85c\ud30c\uc77c\uacfc \ud3ec\ud2b8\ub97c \uc124\uc815\ud55c\ub2e4.\\n\\n\ub2e4\uc74c\uc73c\ub85c, \ubc30\ud3ec \uc2dc\uc5d0 \ud504\ub85c\ud30c\uc77c \ubcc4\ub85c \ud574\ub2f9\ud558\ub294 \ud3ec\ud2b8\uc0ac\uc6a9\ud558\ub3c4\ub85d \uc2a4\ud06c\ub9bd\ud2b8\ub97c \ubcc0\uacbd\ud558\uc790.\\n\\n\uae30\uc874\uc758 \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\ub294 \uc544\ub798\uc640 \uac19\ub2e4.\\n\\n```\\necho \\"Start Deploy Script\\"\\n// ...\\n\\ncd $ACTIONS_REPO_NAME\\ngit pull origin main\\ngit switch main\\n\\necho \\"Change Directory\\"\\ncd $REPOSITORY_NAME\\n\\necho \\"Build\\"\\n./gradlew bootJar\\n\\necho \\"Copy\\"\\nmv ./build/libs/$PROJECT_NAME.jar .\\n\\necho \\"Shutdown Application\\"\\nPID=$(pgrep -f $PROJECT_NAME)\\n\\nif [ -n $PID ]; then\\n        kill -9 $PID\\n    sleep 5\\nfi\\n\\necho \\"Start Server\\"\\nnohup java -jar -Dspring.profiles.active=prod $PROJECT_NAME.jar 1>stdout.txt 2>err.txt &\\n\\n```\\n\\n\ubcc0\uacbd\ub41c \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\\n\\n```\\necho \\"Start Deploy Script\\"\\n// ...\\n\\ncd $ACTIONS_REPO_NAME\\ngit pull origin develop-backend\\ngit switch develop-backend\\n\\necho \\"Change Directory\\"\\ncd $REPOSITORY_NAME\\n\\necho \\"Build\\"\\n./gradlew bootJar\\n\\necho \\"Copy\\"\\nmv ./build/libs/$PROJECT_NAME.jar .\\n\\necho \\"Check Current Profile\\"\\n# \ud604\uc7ac \uc0ac\uc6a9\uc911\uc778 \ud504\ub85c\ud544\uc744 \ud655\uc778\ud55c\ub2e4\\nCURRENT_PROFILE=$(curl -s <https://dev.tripdraw.site/profile>)\\necho \\"Current Profile : $CURRENT_PROFILE\\"\\n\\nprod1=\\"prod1\\"\\nprod2=\\"prod2\\"\\n\\n# \uc0ac\uc6a9\ud560 \ud504\ub85c\ud30c\uc77c\uacfc \ud3ec\ud2b8\ub97c \uc124\uc815\ud55c\ub2e4.\\nif [ \\"$CURRENT_PROFILE\\" = \\"$prod1\\" ]\\nthen\\n        IDLE_PROFILE=\\"$prod2\\"\\n        IDLE_PORT=8081\\nelif [ \\"$CURRENT_PROFILE\\" = \\"$prod2\\" ]\\nthen\\n        IDLE_PROFILE=\\"$prod1\\"\\n        IDLE_PORT=8080\\nelse\\n        echo \\"No Valid Profile\\"\\n        echo \\"Set Profile as prod1\\"\\n        IDLE_PROFILE=\\"$prod1\\"\\n        IDLE_PORT=8080\\nfi\\n\\necho \\"Idle Profile : $IDLE_PROFILE, Idle Port : $IDLE_PORT\\"\\n\\n// \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ub744\uc6b8 \ud3ec\ud2b8\ub97c \ubcc0\uacbd\ud55c\ub2e4.\\necho \\"Switching\\"\\nsleep 10\\n(\uc0dd\ub7b5)/switch.sh\\n\\necho \\"Shutdown Existing Application\\"\\nPID=$(pgrep -f $PROJECT_NAME)\\n\\nif [ -n \\"$PID\\" ]; then\\n        kill -9 $PID\\n        sleep 5\\nfi\\n\\necho \\"Start Server\\"\\nnohup java -jar -Dspring.profiles.active=$IDLE_PROFILE $PROJECT_NAME.jar 1>stdout.txt 2>err.txt &\\n\\n```\\n\\n\uc2a4\ud06c\ub9bd\ud2b8\uc5d0 \uc8fc\uc11d\uc73c\ub85c \ud574\ub2f9 \uacfc\uc815\uc5d0 \ub300\ud55c \uc124\uba85\uc744 \uc791\uc131\ud588\ub2e4.\\n<br></br>\\n\\n#### 3. switch.sh\uc5d0\uc11c service-url.inc \ub0b4\ubd80\uc758 \ud3ec\ud2b8\ub97c \ubcc0\uacbd\ud55c\ub2e4.\\n\\nswitch.sh\\n\\n```\\nCURRENT_PROFILE=$(curl -s (\uc0dd\ub7b5))\\n\\n// \uc0ac\uc6a9\ud560 \ud3ec\ud2b8 \uc124\uc815\\nprod1=\\"prod1\\"\\nprod2=\\"prod2\\"\\n\\nif [ \\"$CURRENT_PROFILE\\" = \\"$prod1\\" ]\\nthen\\n  IDLE_PORT=8081\\nelif [ \\"$CURRENT_PROFILE\\" = \\"$prod2\\" ]\\nthen\\n  IDLE_PORT=8080\\nelse\\n  echo \\"No Valid Profile\\"\\n  echo \\"Set profile as prod1\\"\\n  IDLE_PORT=8080\\nfi\\n\\necho \\"Switch Target Port: $IDLE_PORT\\"\\necho \\"Swith\\"\\n// servic-url.inc\uc5d0 \uc788\ub294 $service_url\uc744 \uc124\uc815 \uac12\uc73c\ub85c \ubcc0\uacbd\ud558\uba70 \ucd9c\ub825\ub3c4 \ub3d9\uc2dc\uc5d0 \ud55c\ub2e4.\\necho \\"set \\\\\\\\$service_url <http://127.0.0.1>:${IDLE_PORT};\\" |sudo tee /etc/nginx/conf.d/service-url.inc\\n\\necho \\"Nginx Reload\\"\\nsudo service nginx reload\\n\\n```\\n\\n\uc704\uc640 \uac19\uc740 \ubc29\ubc95\uc73c\ub85c \ubcc0\uacbd\ub41c \ud3ec\ud2b8\ub97c \uc0ac\uc6a9\ud558\ub3c4\ub85d nginx\ub97c reload\ud558\uc5ec \ubb34\uc911\ub2e8 \ubc30\ud3ec\ub97c \uad6c\ud604\ud588\ub2e4."},{"id":"viewmodel-creation-process","metadata":{"permalink":"/viewmodel-creation-process","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-10-04-Android ViewModel \uc0dd\uc131 \uacfc\uc815/2023-10-04-Android ViewModel \uc0dd\uc131 \uacfc\uc815.md","source":"@site/blog/2023-10-04-Android ViewModel \uc0dd\uc131 \uacfc\uc815/2023-10-04-Android ViewModel \uc0dd\uc131 \uacfc\uc815.md","title":"Android ViewModel \uc0dd\uc131 \uacfc\uc815","description":"\uc548\ub155\ud558\uc138\uc694. \ud2b8\ub9bd\ub4dc\ub85c\uc6b0\uc758 \ud551\uad6c\uc785\ub2c8\ub2e4.","date":"2023-10-04T00:00:00.000Z","formattedDate":"2023\ub144 10\uc6d4 4\uc77c","tags":[{"label":"android","permalink":"/tags/android"},{"label":"viewmodel","permalink":"/tags/viewmodel"}],"readingTime":8.07,"hasTruncateMarker":false,"authors":[{"name":"\ud551\uad6c","title":"Android","url":"https://github.com/pingu244","imageURL":"https://github.com/pingu244.png","key":"pingu"}],"frontMatter":{"title":"Android ViewModel \uc0dd\uc131 \uacfc\uc815","slug":"viewmodel-creation-process","authors":["pingu"],"tags":["android","viewmodel"]},"prevItem":{"title":"\ubb34\uc911\ub2e8 \ubc30\ud3ec \uacfc\uc815","permalink":"/nonstop-deploy"},"nextItem":{"title":"\uc2a4\ud504\ub9c1 \ud14c\uc2a4\ud2b8 \uaca9\ub9ac","permalink":"/spring-test-isolation"}},"content":"\uc548\ub155\ud558\uc138\uc694. \ud2b8\ub9bd\ub4dc\ub85c\uc6b0\uc758 \ud551\uad6c\uc785\ub2c8\ub2e4.  \\n\uc800\ub294 \uc774\ubc88 \ud504\ub85c\uc81d\ud2b8\ub97c \ud558\uba74\uc11c \ucc98\uc74c\uc73c\ub85c MVVM\uc744 \uc811\ud558\uac8c \ub418\uc5c8\ub294\ub370\uc694, \uc774\ubc88 \uae00\uc5d0\uc11c\ub294 ViewModel\uc758 \uc0dd\uc131 \uacfc\uc815\uc5d0 \ub300\ud574 \ub9d0\uc500\ub4dc\ub9ac\ub824\uace0 \ud569\ub2c8\ub2e4.  \\n\ub3c4\ub300\uccb4 \uc598\ub294 \ubb50\ud558\ub294 \uc544\uc774\uc774\uace0 \uc5b4\ub5bb\uac8c \ub9cc\ub4e4\uc5b4\uc9c0\ub294 \uac78\uae4c\uc694?\\n\\n\\n## ViewModel\uc774\ub780?\\n\\nViewModel\uc740 \ubb34\uc5c7\uc77c\uae4c\uc694? \uacf5\uc2dd \ubb38\uc11c\uc5d0\ub294 \uc774\ub807\uac8c \ub098\uc640\uc788\uc2b5\ub2c8\ub2e4. \\n> ViewModel \ud074\ub798\uc2a4\ub294 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \ub610\ub294 \ud654\uba74 \uc218\uc900 \uc0c1\ud0dc \ud640\ub354\uc785\ub2c8\ub2e4. UI\uc5d0 \uc0c1\ud0dc\ub97c \ub178\ucd9c\ud558\uace0 \uad00\ub828 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc744 \ucea1\uc290\ud654\ud569\ub2c8\ub2e4.\\n\\n\uc0ac\uc6a9\uc790 \uc774\ubca4\ud2b8\ub97c \ucc98\ub9ac\ud558\uc5ec \ub370\uc774\ud130, \ub3c4\uba54\uc778 \uce21\uc5d0\uc11c \ud654\uba74 UI\ub85c \ub370\uc774\ud130\ub97c \ubcc0\ud658\ud574\uc8fc\ub294 \uc5ed\ud560 \ub610\ub294 \ud654\uba74\uc5d0 \ud45c\uc2dc\ud574\uc57c\ud558\ub294 \ud56d\ubaa9\uc744 \ub4e4\uace0 \uc788\uc5b4\uc8fc\ub294 (holder) \uc5ed\ud560\uc785\ub2c8\ub2e4.\\n\\n![./blog_udf.png](./blog_udf.png)\\n\\n\uacf5\uc2dd\ubb38\uc11c\uc5d0\uc11c\ub294 \uc704\uc640 \uac19\uc740 \ub2e8\ubc29\ud5a5 \ub370\uc774\ud130 \ud750\ub984(UDF)\ub97c \uad8c\uc7a5\ud569\ub2c8\ub2e4.  \\n\ubcf4\uc774\ub294 \uac83\uacfc \uac19\uc774 UI \uc694\uc18c\uc5d0\uc11c \uc774\ubca4\ud2b8\ub97c ViewModel\ub85c \ubcf4\ub0b4\uba74 ViewModel \uce21\uc5d0\uc11c \uc774\ub97c \ucc98\ub9ac\ud558\uba70 \ub370\uc774\ud130\uc640 \ub3c4\uba54\uc778 \uacc4\uce35\uc5d0\uc11c \ub370\uc774\ud130\ub97c \ubc1b\uace0 \uc774\ub97c \ub2e4\uc2dc \ud654\uba74\uc5d0 \ub744\uc6cc\uc8fc\uac8c \ub429\ub2c8\ub2e4.  \\n\ub610\ud55c ViewModel\uc740 UI \uc0c1\ud0dc(UI State)\uc5d0 \ub300\ud55c \uc815\ubcf4\ub3c4 \ub4e4\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub807\uac8c ViewModel\uc740 **UI \uad00\ub828 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\uace0 \uad00\ub9ac\ud574\uc8fc\ub294 \uc5ed\ud560**\uc744 \ud569\ub2c8\ub2e4.\\n\\n\\n## ViewModel\uc758 \uc774\uc810\\n\\nViewModel\uc758 \uac00\uc7a5 \ud070 \uc7a5\uc810\uc740 \uad6c\uc131 \ubcc0\uacbd\uc5d0\ub3c4 UI \uc0c1\ud0dc\ub97c \uc720\uc9c0\ud55c\ub2e4\ub294 \uac83\uc785\ub2c8\ub2e4.\\n\\n\uae00\uaf34 \ud06c\uae30, \uc5b8\uc5b4, \ud14c\ub9c8 \ubcc0\uacbd, \ud654\uba74 \ubc29\ud5a5 \ub4f1 \uae30\uae30 \uc124\uc815\uc744 \ubcc0\uacbd\ud558\ub294 \uac83\uc744 \uad6c\uc131 \ubcc0\uacbd\uc774\ub77c\uace0 \ud569\ub2c8\ub2e4.  \\n\uc774\ub807\uac8c \uad6c\uc131 \ubcc0\uacbd\uc774 \ubc1c\uc0dd\ud558\uac8c \ub418\uba74 Activity\ub294 \uc5c6\uc5b4\uc84c\ub2e4\uac00 \ub2e4\uc2dc \ub9cc\ub4e4\uc5b4\uc9c0\uac8c \ub429\ub2c8\ub2e4.\\n\uadf8\ub807\uac8c \ub41c\ub2e4\uba74 \ud654\uba74\uc5d0 \uc788\ub358 \uac12\uc774 \ub2e4 \ub0a0\ub77c\uac00\uac8c \ub418\uaca0\uc8e0? \\n\\n\uc608\ub97c \ub4e4\uc5b4 \ubc84\ud2bc\uc744 \ub204\ub974\uba74 \uc22b\uc790\uac00 \uc62c\ub77c\uac00\ub294 Activity\uac00 \uc788\ub2e4\uace0 \ud588\uc744 \ub54c,  \\n\ubc84\ud2bc\uc744 10\ubc88 \ub20c\ub7ec \ud654\uba74\uc758 \uc22b\uc790\ub97c 10\uc73c\ub85c \ub9cc\ub4e4\uace0 \ud654\uba74 \ud68c\uc804\uc744 \ud55c\ub2e4\uba74 \ud654\uba74\uc758 \uc22b\uc790\ub294 \ub2e4\uc2dc 0\uc774 \ub418\uc5b4 \uc788\uc744 \uac83 \uc785\ub2c8\ub2e4.\\n\\n\uc774\ub7ec\ud55c \ubb38\uc81c\uc810\uc740 ViewModel\uc744 \uc0ac\uc6a9\ud558\uac8c \ub418\uba74 \ud574\uacb0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4!\\n\\n![./blog_viewmodel_lifecycle.png](./blog_viewmodel_lifecycle.png)\\n\\n\uc704\uc758 \uadf8\ub9bc\uc740 ViewModel\uc758 \uc0dd\uba85\uc8fc\uae30\ub97c \uc798 \ubcf4\uc5ec\uc90d\ub2c8\ub2e4.  \\nActivity\uac00 \ucd5c\ucd08\ub85c \uc0dd\uc131\ub420 \ub54c ViewModel\uc774 \uc0dd\uc131\ub418\uac8c \ub418\uace0 \uad6c\uc131\ubcc0\uacbd\uc73c\ub85c \uc778\ud574 Activity\uac00 \ub2e4\uc2dc \uc2dc\uc791\ud558\ub354\ub77c\ub3c4 ViewModel\uc740 \uacc4\uc18d \uba54\ubaa8\ub9ac\uc5d0 \ub0a8\uc544\uc788\uc2b5\ub2c8\ub2e4.\\n\\n\\n# ViewModel \uc0dd\uc131 \uacfc\uc815\\n\\n\uadf8\ub807\ub2e4\uba74 \uc774\ub7f0 ViewModel\uc740 \uc5b4\ub5a4 \uc21c\uc11c\ub85c \ub9cc\ub4e4\uc5b4\uc9c0\ub294 \uac78\uae4c\uc694?\\n\\n![./blog_viewmodel_creation_process.png](./blog_viewmodel_creation_process.png)\\n\\nViewModel\uc740 \uc704\uc640 \uac19\uc740 \uacfc\uc815\uc744 \uac70\uccd0 \ub9cc\ub4e4\uc5b4\uc9d1\ub2c8\ub2e4. \ucf54\ub4dc\ub97c \ub72f\uc5b4 \ubcf4\uba70 \uc774\ud574\ud574\ubd05\uc2dc\ub2e4.\\n\\n\uba3c\uc800 Activity\uc5d0\uc11c ViewModel\uc744 \uc694\uccad\ud558\uba70 ViewModelProvider\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.\\n\\n```kotlin\\nprivate val viewModel: MainViewModel by lazy {\\n\\tViewModelProvider(this)[MainViewModel::class.java]\\n}\\n```\\n\\n\uc5ec\uae30\uc11c ViewModelProvider\ub294 \uc0dd\uc131\ub418\uba74\uc11c `ViewModelStoreOwner`\uc640 `Factory`(optional)\uc744 \uc694\uad6c\ud569\ub2c8\ub2e4. Factory\ub97c \uc8fc\uc9c0\uc54a\uc73c\uba74 DefaultFactory\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\\n\\n\uc7a0\uae50! \uc5ec\uae30\uc11c \uc65c ViewModelStoreOwner\uc790\ub9ac\uc5d0 `this`(\uc5ec\uae30\uc11c\ub294 Activity)\ub97c \ub118\uae30\uac8c \ub418\ub294\uac78\uae4c\uc694? \\nViewModelStoreOwner \ub294 \ub9d0\uadf8\ub300\ub85c ViewModelStore\ub97c \uac00\uc9c0\uace0 \uc788\ub294 \uc778\ud130\ud398\uc774\uc2a4\uc785\ub2c8\ub2e4.\\n\\n```java\\npublic interface ViewModelStoreOwner {\\n    /**\\n     * Returns owned {@link ViewModelStore}\\n     *\\n     * @return a {@code ViewModelStore}\\n     */\\n    @NonNull\\n    ViewModelStore getViewModelStore();\\n}\\n```\\n\\n[ComponentActivity](https://developer.android.com/reference/androidx/activity/ComponentActivity),\xa0[Fragment](https://developer.android.com/reference/androidx/fragment/app/Fragment),\xa0[NavBackStackEntry](https://developer.android.com/reference/androidx/navigation/NavBackStackEntry) \uc774 `ViewModelStoreOwner`\ub97c \uad6c\ud604\ud558\uace0 \uc788\uc5b4\uc694. \uadf8\ub9ac\uace0 `ViewModelStoreOwner`\ub294 `ViewModelStore`\ub97c \uc8fc\ub294 `getViewModelStore()`\ub97c \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\\n```java\\n@NonNull\\n@Override\\npublic ViewModelStore getViewModelStore() {\\n    if (getApplication() == null) {\\n        throw new IllegalStateException(\\"Your activity is not yet attached to the \\"\\n                + \\"Application instance. You can\'t request ViewModel before onCreate call.\\");\\n        }\\n    ensureViewModelStore();\\n    return mViewModelStore;\\n}\\n\\n@SuppressWarnings(\\"WeakerAccess\\") /* synthetic access */\\nvoid ensureViewModelStore() {\\n    if (mViewModelStore == null) {\\n        NonConfigurationInstances nc =\\n                (NonConfigurationInstances) getLastNonConfigurationInstance();\\n        if (nc != null) {\\n            // Restore the ViewModelStore from NonConfigurationInstances\\n            mViewModelStore = nc.viewModelStore;\\n        }\\n        if (mViewModelStore == null) {\\n            mViewModelStore = new ViewModelStore();\\n        }\\n    }\\n}\\n```\\n\\nComponentActivity\uc5d0\uc11c\uc758 getviewModelStroe()\uc785\ub2c8\ub2e4.\\nNonConfigurationInstances \ub294 \uad6c\uc131\ubcc0\uacbd \uc2dc\uc5d0\ub3c4 \ud654\uba74\uc758 \uc774\uc804 \uc0c1\ud0dc\ub97c \uc720\uc9c0\ud558\uace0 \ub370\uc774\ud130\ub97c \ubcf4\uc874\ud558\ub294 \ub370 \uc0ac\uc6a9\ub418\ub294 \ud074\ub798\uc2a4 \uc785\ub2c8\ub2e4.\\n\uc9c0\ub09c\ubc88\uc5d0 \uc800\uc7a5\ud574\ub193\uc558\ub358 \uac83\ub4e4\uc744 \uaebc\ub0b4\uc624\uac70\ub098 \uc544\ub2c8\uba74 \uc0c8\ub85c \ub9cc\ub4e4\uc5b4 \ubc18\ud658\ud558\uac8c \ub429\ub2c8\ub2e4.\\n\\n\\n\ub2e4\uc2dc \ub3cc\uc544\uc640\uc11c, ViewModelProvider\uc5d0\uc11c get()\uc744 \ud638\ucd9c\ud558\uc5ec ViewModel\uc744 \uc0dd\uc131\ud558\uac8c \ub429\ub2c8\ub2e4.\\n\\n```kotlin\\n@MainThread\\npublic open operator fun <T : ViewModel> get(modelClass: Class<T>): T {\\n    val canonicalName = modelClass.canonicalName\\n        ?: throw IllegalArgumentException(\\"Local and anonymous classes can not be ViewModels\\")\\n    return get(\\"$DEFAULT_KEY:$canonicalName\\", modelClass)\\n}\\n```\\n```kotlin\\n@Suppress(\\"UNCHECKED_CAST\\")\\n@MainThread\\npublic open operator fun <T : ViewModel> get(key: String, modelClass: Class<T>): T {\\n    val viewModel = store[key]\\n    if (modelClass.isInstance(viewModel)) {\\n        (factory as? OnRequeryFactory)?.onRequery(viewModel)\\n        return viewModel as T\\n    } else {\\n        @Suppress(\\"ControlFlowWithEmptyBody\\")\\n        if (viewModel != null) {\\n            // TODO: log a warning.\\n        }\\n    }\\n    val extras = MutableCreationExtras(defaultCreationExtras)\\n    extras[VIEW_MODEL_KEY] = key\\n    // AGP has some desugaring issues associated with compileOnly dependencies so we need to\\n    // fall back to the other create method to keep from crashing.\\n    return try {\\n        factory.create(modelClass, extras)\\n    } catch (e: AbstractMethodError) {\\n        factory.create(modelClass)\\n    }.also { store.put(key, it) }\\n}\\n```\\n\\n\ubc14\ub85c \uc774 \ud568\uc218\uc785\ub2c8\ub2e4.\\n\\nget\uc73c\ub85c ViewModel\uc744 \uc694\uccad\ud588\uc744 \ub54c ViewModelStore\uc5d0 \uc788\uc73c\uba74 \uaebc\ub0b4\uc624\uace0 \uc5c6\ub2e4\uba74 factory\ub85c \uc0c8\ub85c \ub9cc\ub4e4\uc5b4\uc8fc\uac8c \ub429\ub2c8\ub2e4. \\n\\n\uadf8\ub807\ub2e4\uba74 ViewModelStore\ub294 \ubb34\uc5c7\uc77c\uae4c\uc694?\\n\\n\\n```java\\npublic class ViewModelStore {\\n\\n    private final HashMap<String, ViewModel> mMap = new HashMap<>();\\n\\n    final void put(String key, ViewModel viewModel) {\\n        ViewModel oldViewModel = mMap.put(key, viewModel);\\n        if (oldViewModel != null) {\\n            oldViewModel.onCleared();\\n        }\\n    }\\n\\n    final ViewModel get(String key) {\\n        return mMap.get(key);\\n    }\\n\\n    Set<String> keys() {\\n        return new HashSet<>(mMap.keySet());\\n    }\\n\\n    /**\\n     *  Clears internal storage and notifies ViewModels that they are no longer used.\\n     */\\n    public final void clear() {\\n        for (ViewModel vm : mMap.values()) {\\n            vm.clear();\\n        }\\n        mMap.clear();\\n    }\\n}\\n```\\n\\n\uc774\ub984\ucc98\ub7fc ViewModel\ub4e4\uc744 \uc800\uc7a5\ud558\ub294 \ud074\ub798\uc2a4\uc785\ub2c8\ub2e4. \\n\\nkey \uac12\uc5d0 \ud328\ud0a4\uc9c0 \uc774\ub984\uacfc \ud074\ub798\uc2a4 \uc774\ub984\uc774 \ud569\uccd0\uc9c4 \ud615\ud0dc(canonicalName)\uac00 \ub4e4\uc5b4\uac00\uace0 value \uac12\uc5d0\ub294 viewModel\uc774 \ub4e4\uc5b4\uac00\uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uad6c\uc131\ubcc0\uacbd\uc73c\ub85c ViewModelStore\uc758 Owner\uac00 destroy\ub418\uc5c8\ub2e4\uac00 \ub2e4\uc2dc \uc0dd\uc131\ub418\uc5b4\ub3c4 Owner\ub294 \uc774\uc804\uc758 ViewModelStore\ub97c \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4. destroy\ub418\uc5c8\ub2e4\uac00 \ub2e4\uc2dc \uc0dd\uc131\ub418\uc9c0 \uc54a\ub294\ub2e4\uba74 clear()\ub97c \ud638\ucd9c\ud574 \uc90d\ub2c8\ub2e4.\\n\\n### \uc815\ub9ac\ub97c \ud574\ubd05\uc2dc\ub2e4\\n\\n1. ViewModelProvider\ub97c \uc0dd\uc131\ud55c\ub2e4.\\n2. ViewModelProvider\uc740 ViewModelStoreOwner\ub97c \ucc38\uc870\ud558\uace0 \uc5ec\uae30\uc11c ViewModelStore\ub97c \uc694\uccad\ud55c\ub2e4.\\n    - ViewModelStore\uac00 \uc788\ub2e4\uba74 \uc8fc\uace0 \uc5c6\ub2e4\uba74 \ub9cc\ub4e4\uc5b4\ub0b8\ub2e4.\\n3. ViewModelStore\uac00 \uc694\uccad\ud558\ub294 ViewModel\uc744 \uac00\uc838\uc628\ub2e4.\\n    - \uc5c6\uc73c\uba74 Factory\ub85c \uc0c8\ub85c \ub9cc\ub4e4\uc5b4\ub0b4\uba70 ViewModelStore\uc5d0 \uc800\uc7a5\ud55c\ub2e4.\\n\\n\\n\ud558\ub098\ud558\ub098 \ucf54\ub4dc\ub85c \ubcf4\ub2c8 \ubcf5\uc7a1\ud574 \ubcf4\uc77c \uc218\ub3c4 \uc788\uc9c0\ub9cc \uc694\uc57d\ud558\uc790\uba74 \uc704\uc640 \uac19\uc774 \uac04\ub2e8\ud569\ub2c8\ub2e4.\\n\\n\uad81\uae08\ud558\ub2e4\uba74 \uc9c1\uc811 \ucf54\ub4dc\ub85c \ud655\uc778\ud574\ubcf4\ub294 \uac83\uc744 \ucd94\ucc9c\ub4dc\ub9bd\ub2c8\ub2e4.\\n\\n\\n## \ucc38\uace0\uc790\ub8cc\\n[ViewModel \uac1c\uc694 \xa0|\xa0 Android \uac1c\ubc1c\uc790 \xa0|\xa0 Android Developers](https://developer.android.com/topic/libraries/architecture/viewmodel?hl=ko)\\n\\n[ViewModel\uc774\ub780 \ubb34\uc5c7\uc778\uac00? ViewModel \ucd08\ubcf4\ub97c \uc704\ud55c \uac00\uc774\ub4dc | \ucc30\uc2a4\uc758 \uc548\ub4dc\ub85c\uc774\ub4dc](https://www.charlezz.com/?p=44167)\\n\\n[\uc0c1\ud0dc \ud640\ub354 \ubc0f UI \uc0c1\ud0dc \xa0|\xa0 Android \uac1c\ubc1c\uc790 \xa0|\xa0 Android Developers](https://developer.android.com/topic/architecture/ui-layer/stateholders?hl=ko)"},{"id":"spring-test-isolation","metadata":{"permalink":"/spring-test-isolation","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-10-03-\uc2a4\ud504\ub9c1 \ud14c\uc2a4\ud2b8 \uaca9\ub9ac.md","source":"@site/blog/2023-10-03-\uc2a4\ud504\ub9c1 \ud14c\uc2a4\ud2b8 \uaca9\ub9ac.md","title":"\uc2a4\ud504\ub9c1 \ud14c\uc2a4\ud2b8 \uaca9\ub9ac","description":"\ud14c\uc2a4\ud2b8 \uaca9\ub9ac","date":"2023-10-03T00:00:00.000Z","formattedDate":"2023\ub144 10\uc6d4 3\uc77c","tags":[{"label":"test","permalink":"/tags/test"}],"readingTime":5.105,"hasTruncateMarker":false,"authors":[{"name":"\ud5c8\ube0c","title":"Backend","url":"https://github.com/greeng00se","imageURL":"https://github.com/greeng00se.png","key":"herb"}],"frontMatter":{"title":"\uc2a4\ud504\ub9c1 \ud14c\uc2a4\ud2b8 \uaca9\ub9ac","slug":"spring-test-isolation","authors":["herb"],"tags":["test"]},"prevItem":{"title":"Android ViewModel \uc0dd\uc131 \uacfc\uc815","permalink":"/viewmodel-creation-process"},"nextItem":{"title":"\ube44\ub3d9\uae30 \uc608\uc678 \ub85c\uae45","permalink":"/log-async-exception"}},"content":"### \ud14c\uc2a4\ud2b8 \uaca9\ub9ac\\n\\n\ud14c\uc2a4\ud2b8\uc758 \uc21c\uc11c\uc5d0 \ub530\ub77c \uc131\uacf5 \uc2e4\ud328 \uc5ec\ubd80\uac00 \uacb0\uc815\ub418\ub294 \ube44\uacb0\uc815\uc801\uc778(non-determinism) \ud14c\uc2a4\ud2b8\uac00 \ub418\uc5b4\uc11c\ub294 \uc548\ub418\uace0, \ud14c\uc2a4\ud2b8\ub294 \ud56d\uc0c1 \uc21c\uc11c\uc5d0 \uc0c1\uad00\uc5c6\uc774 \ub3c5\ub9bd\uc801\uc73c\ub85c \uc218\ud589\ub418\ub3c4\ub85d \ubcf4\uc7a5\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4. \uc77c\ubc18\uc801\uc73c\ub85c \uc790\uc6d0\uc758 \uacf5\uc720, \uc678\ubd80 API, \uc2dc\uac04 \ub4f1\uc73c\ub85c \ube44\uacb0\uc815\uc801\uc778 \ud14c\uc2a4\ud2b8\uac00 \ub418\uace0\ub294 \ud569\ub2c8\ub2e4. \uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \ud14c\uc2a4\ud2b8 \ub300\uc5ed\uc744 \uc0ac\uc6a9\ud558\uac70\ub098, \ucee8\ud14d\uc2a4\ud2b8\ub97c \uc7ac\uc2e4\ud589\ud558\ub294 `@DirtiesContext`, \uc790\uc6d0\uc744 \ucd08\uae30\ud654\ud558\uae30 \uc704\ud574 \ud14c\uc2a4\ud2b8 \uc774\ud6c4\uc5d0 \ud14c\uc774\ube14\uc744 \ub864\ubc31 \ud558\ub294 `@Transactional`\ub4f1 \ub2e4\uc591\ud55c \ubc29\ubc95\uc774 \uc788\uc2b5\ub2c8\ub2e4.  \\n\ud574\ub2f9 \uae00\uc5d0\uc11c\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc790\uc6d0\uc758 \uacf5\uc720\ub97c \ubc29\uc9c0\ud558\uae30 \uc704\ud574 \ud14c\uc2a4\ud2b8 \uaca9\ub9ac\ub97c \uc218\ud589\ud558\ub294 \ubd80\ubd84\uc5d0 \ub300\ud574 \uc791\uc131\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4.  \\n\\n:::note Independent - FIRST\\n\\n\ud14c\uc2a4\ud2b8\ub07c\ub9ac \uc11c\ub85c \uc758\uc874\ud558\uba74 \uc548 \ub41c\ub2e4.  \\n\uc11c\ub85c \uc758\uc874\ud558\uac8c \ub41c\ub2e4\uba74 \ud558\ub098\uc758 \ud14c\uc2a4\ud2b8\uac00 \uc2e4\ud328\ud560 \ub54c, \ub610 \ub2e4\ub978 \ud558\ub098\uc758 \ud14c\uc2a4\ud2b8\uac00 \uc2e4\ud328\ud560 \uc218 \uc788\ub2e4.  \\n\ub2e4\ub978 \ud14c\uc2a4\ud2b8\uc5d0 \uc758\uc874\ud558\uc9c0 \uc54a\uace0, \ub3c5\ub9bd\uc801\uc73c\ub85c \uc2e4\ud589 \uac00\ub2a5\ud55c \ud14c\uc2a4\ud2b8\uac00 \uc88b\uc740 \ud14c\uc2a4\ud2b8\ub2e4.  \\n\\n:::\\n\\n### \uae30\uc874\uc758 \ud14c\uc2a4\ud2b8 \uaca9\ub9ac\\n\\n\uae30\uc874 \ud14c\uc2a4\ud2b8\uc758 \uacbd\uc6b0 @Sql \uc560\ub108\ud14c\uc774\uc158\uc744 \uc774\uc6a9\ud558\uc5ec \uac01 \ud14c\uc2a4\ud2b8 \uc774\ud6c4\ub9c8\ub2e4 truncate \uad6c\ubb38\uc744 \uc2e4\ud589\ud558\uc5ec \ud14c\uc2a4\ud2b8\ub97c \uc9c4\ud589\ud588\uc2b5\ub2c8\ub2e4. \ube60\ub974\uac8c \uc801\uc6a9\ud560 \uc218 \uc788\uc9c0\ub9cc \ud504\ub85c\uc81d\ud2b8\ub97c \uc9c4\ud589\ud558\uba74\uc11c \uc0c8\ub85c\uc6b4 \ud14c\uc774\ube14\uc774 \ucd94\uac00\ub418\ub294 \uacbd\uc6b0, \ud14c\uc774\ube14\uc744 \uc9c1\uc811 \ucd94\uac00\ud574 \uc918\uc57c \ud55c\ub2e4\ub294 \ubb38\uc81c\uc810\uc774 \uc788\uc5c8\uc2b5\ub2c8\ub2e4.  \\n\\n```java title=AcceptanceTest\\n@Sql(value = \\"/truncate.sql\\", executionPhase = ExecutionPhase.AFTER_TEST_METHOD)\\n@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)\\npublic abstract class AcceptanceTest {\\n\\n    @LocalServerPort\\n    private int port;\\n\\n    @BeforeEach\\n    public void setUp() {\\n        RestAssured.port = port;\\n    }\\n}\\n```\\n\\n### TestExecutionListener\\n\\n\uc2a4\ud504\ub9c1\uc5d0\uc11c\ub294 TextExecutionListner\ub97c \uc774\uc6a9\ud558\uc5ec \uac01 \ud14c\uc2a4\ud2b8 \uc2e4\ud589 \ub2e8\uacc4\uc5d0\uc11c \uc774\ubca4\ud2b8\ub97c \uc218\uc2e0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\uc774\ub97c \uc774\uc6a9\ud558\uba74 JUnit\uc758 @BeforeEach\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uacfc \uc720\uc0ac\ud558\uac8c, \ud14c\uc2a4\ud2b8\uc758 \uc0dd\uba85\uc8fc\uae30 \uc774\uc804 \ub610\ub294 \uc774\ud6c4\uc5d0 \ud544\uc694\ud55c \uc791\uc5c5\uc744 \uc2e4\ud589\uc2dc\ud0ac \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\n```java title=TextExecutionListner\\npublic interface TestExecutionListener {\\n    default void beforeTestClass(TestContext testContext) throws Exception {}\\n    default void prepareTestInstance(TestContext testContext) throws Exception {}\\n    default void beforeTestMethod(TestContext testContext) throws Exception {}\\n    default void beforeTestExecution(TestContext testContext) throws Exception {}\\n    default void afterTestExecution(TestContext testContext) throws Exception {}\\n    default void afterTestMethod(TestContext testContext) throws Exception {}\\n    default void afterTestClass(TestContext testContext) throws Exception {}\\n}\\n```\\n\\n### AbstractTestExecutionListener \uc0c1\uc18d\ud558\uc5ec \uad6c\ud604\\n\\nAbstractTestExecutionListener\ub97c \uc0c1\uc18d\ubc1b\uc544 \ud14c\uc2a4\ud2b8 \uaca9\ub9ac \ud658\uacbd\uc744 \ub9cc\ub4e4\uc5b4\uc8fc\ub294 \ud074\ub798\uc2a4\uc785\ub2c8\ub2e4. \ub610\ud55c \uc778\ud130\ud398\uc774\uc2a4\uc778 TextExecutionListner\uc640 \ub2ec\ub9ac Ordered\uac00 \uad6c\ud604\ub418\uc5b4 \uc788\uc5b4 \ud574\ub2f9 \ud074\ub798\uc2a4\ub97c \uc0c1\uc18d\ubc1b\uc544 \uad6c\ud604\ud55c \ud074\ub798\uc2a4\ub294 \ud504\ub808\uc784\uc6cc\ud06c\uac00 \uc81c\uacf5\ud558\ub294 \ub9ac\uc2a4\ub108 \ub2e4\uc74c\uc5d0 \uc2e4\ud589\uc2dc\ud0a4\ub3c4\ub85d \ud569\ub2c8\ub2e4.  \\n\ub2e4\uc74c\uacfc \uac19\uc774 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c \uac01\uac01\uc758 \ud14c\uc774\ube14\uc5d0 \ud574\ub2f9\ud558\ub294 Truncate \ucffc\ub9ac\ub97c \ub9cc\ub4e4\uc5b4\uc11c \uc870\ud68c\ud558\uace0, Test \uba54\uc11c\ub4dc\uac00 \ub05d\ub0a0\ub54c \ub9c8\ub2e4 \ud574\ub2f9 \ucffc\ub9ac\ub97c \uc2e4\ud589\ud558\uc5ec \ud14c\uc774\ube14\uc744 \ucd08\uae30\ud654\uc2dc\ud0a4\ub3c4\ub85d \uc124\uc815\ud588\uc2b5\ub2c8\ub2e4.  \\n\\n```java title=DatabaseCleaner\\n\\npublic class DatabaseCleaner extends AbstractTestExecutionListener {\\n\\n    private static final String TRUNCATE_TABLE_QUERY = \\"\\"\\"\\n            SELECT Concat(\'TRUNCATE TABLE \', TABLE_NAME, \';\') \\n            FROM INFORMATION_SCHEMA.TABLES\\n            WHERE TABLE_SCHEMA = \'PUBLIC\'\\n            \\"\\"\\";\\n\\n    @Override\\n    public void afterTestMethod(TestContext testContext) {\\n        JdbcTemplate jdbcTemplate = getJdbcTemplate(testContext);\\n        List<String> truncateTableQueries = getTruncateTableQueries(jdbcTemplate);\\n        truncateTables(jdbcTemplate, truncateTableQueries);\\n    }\\n\\n    private JdbcTemplate getJdbcTemplate(TestContext testContext) {\\n        return testContext.getApplicationContext().getBean(JdbcTemplate.class);\\n    }\\n\\n    private List<String> getTruncateTableQueries(JdbcTemplate jdbcTemplate) {\\n        return jdbcTemplate.queryForList(TRUNCATE_TABLE_QUERY, String.class);\\n    }\\n\\n    private void truncateTables(JdbcTemplate jdbcTemplate, List<String> truncateTableQueries) {\\n        jdbcTemplate.execute(\\"SET REFERENTIAL_INTEGRITY FALSE\\");\\n        truncateTableQueries.forEach(jdbcTemplate::execute);\\n        jdbcTemplate.execute(\\"SET REFERENTIAL_INTEGRITY TRUE\\");\\n    }\\n}\\n\\n```\\n\\n### Listener \ub4f1\ub85d\\n\\n@TestExecutionListeners\ub97c \uc774\uc6a9\ud558\uc5ec \uc0ac\uc6a9\uc790 \uc815\uc758 \ub9ac\uc2a4\ub108\ub97c \ub4f1\ub85d\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\nmergeMode\uc758 \uae30\ubcf8\uac12\uc740 REPLACE_DEFAULTS\ub85c \ub9ac\uc2a4\ub108\uac00 \uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uacbd\uc6b0 \ub4f1\ub85d\ub41c \ub9ac\uc2a4\ub108\ub85c \ubcc0\uacbd\ub429\ub2c8\ub2e4.  \\nMERGE_WITH_DEFAULTS\ub85c \uc124\uc815\ud55c\ub2e4\uba74 Ordered \uae30\uc900\uc73c\ub85c \uc21c\uc11c\uac00 \uacb0\uc815\ub429\ub2c8\ub2e4.  \\n\uc774\ud6c4 \uaca9\ub9ac\uac00 \ud544\uc694\ud55c \ud14c\uc2a4\ud2b8\ub4e4\uc740 \ub2e4\uc74c\uc758 \ucd94\uc0c1 \ud074\ub798\uc2a4\ub97c \uc0c1\uc18d\ud558\uba74 \ub429\ub2c8\ub2e4.\\n\\n```java title=AcceptanceTest\\n\\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\\n@TestExecutionListeners(\\n        value = DatabaseCleaner.class,\\n        mergeMode = TestExecutionListeners.MergeMode.MERGE_WITH_DEFAULTS\\n)\\npublic abstract class AbcceptanceTest {\\n\\n    @LocalServerPort\\n    private int port;\\n\\n    @BeforeEach\\n    public void setUp() {\\n        RestAssured.port = port;\\n    }\\n}\\n\\n```\\n\\n### \ucc38\uace0 \uc790\ub8cc\\n\\n[The Spring TestExecutionListener, Baeldung](https://www.baeldung.com/spring-testexecutionlistener)  \\n[\uc778\uc218\ud14c\uc2a4\ud2b8\uc5d0\uc11c \ud14c\uc2a4\ud2b8 \uaca9\ub9ac\ud558\uae30, \ud14c\ucf54\ube14](https://tecoble.techcourse.co.kr/post/2020-09-15-test-isolation/)  \\n[Eradicating Non-Determinism in Tests, martin fowler](https://martinfowler.com/articles/nonDeterminism.html)  \\n[@SpringBootTest\uc758 \ud14c\uc2a4\ud2b8 \uaca9\ub9ac\uc2dc\ud0a4\uae30, MangKyu](https://mangkyu.tistory.com/264)"},{"id":"log-async-exception","metadata":{"permalink":"/log-async-exception","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-09-18-\ube44\ub3d9\uae30 \uc608\uc678 \ucc98\ub9ac/2023-09-18-\ube44\ub3d9\uae30 \uc608\uc678 \ucc98\ub9ac.mdx","source":"@site/blog/2023-09-18-\ube44\ub3d9\uae30 \uc608\uc678 \ucc98\ub9ac/2023-09-18-\ube44\ub3d9\uae30 \uc608\uc678 \ucc98\ub9ac.mdx","title":"\ube44\ub3d9\uae30 \uc608\uc678 \ub85c\uae45","description":"\ubb38\uc81c \uc0c1\ud669","date":"2023-09-18T00:00:00.000Z","formattedDate":"2023\ub144 9\uc6d4 18\uc77c","tags":[{"label":"async","permalink":"/tags/async"},{"label":"exception","permalink":"/tags/exception"}],"readingTime":3.705,"hasTruncateMarker":false,"authors":[{"name":"\ud5c8\ube0c","title":"Backend","url":"https://github.com/greeng00se","imageURL":"https://github.com/greeng00se.png","key":"herb"}],"frontMatter":{"title":"\ube44\ub3d9\uae30 \uc608\uc678 \ub85c\uae45","slug":"log-async-exception","authors":["herb"],"tags":["async","exception"]},"prevItem":{"title":"\uc2a4\ud504\ub9c1 \ud14c\uc2a4\ud2b8 \uaca9\ub9ac","permalink":"/spring-test-isolation"},"nextItem":{"title":"Android ViewModel Test","permalink":"/viewmodel-test"}},"content":"### \ubb38\uc81c \uc0c1\ud669\\n\\n\ud604\uc7ac \ud2b8\ub9bd\ub4dc\ub85c\uc6b0\uc758 \uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uae30\ub2a5\uc740 \ube44\ub3d9\uae30\ub85c \ucc98\ub9ac\ub418\uace0 \uc788\uc2b5\ub2c8\ub2e4. \ub85c\uadf8\ub97c \ud655\uc778\ud558\ub294 \ub3c4\uc911 `@Async`\uac00 \uc801\uc6a9\ub41c \uba54\uc11c\ub4dc\uc5d0\uc11c \uc608\uc678\uac00 \ubc1c\uc0dd\ud558\ub294 \uacbd\uc6b0 \ub85c\uadf8\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ucd9c\ub825\ub418\uc9c0 \uc54a\ub294 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.  \\n\ud655\uc778\ud574 \ubcf4\ub2c8 Spring\uc758 `@ControllerAdvice` + `@ExceptionHandler`\uc758 \uacbd\uc6b0 \ub3d9\uae30 \uc608\uc678\ub9cc \ucc98\ub9ac\ud558\uace0, \ube44\ub3d9\uae30 \uc608\uc678\ub97c \ucc98\ub9ac\ud558\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0 \ubc1c\uc0dd\ud55c \ubb38\uc81c\uc600\uc2b5\ub2c8\ub2e4. \\n\\n### \ube44\ub3d9\uae30 \uc608\uc678 \ubc1c\uc0dd\uc2dc \ub85c\uae45 \uc124\uc815\\n\\n\uc2a4\ud504\ub9c1 4.1 \ubd80\ud130 \uc81c\uacf5\ub418\ub294 [AsyncUncaughtExceptionHandler](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/aop/interceptor/AsyncUncaughtExceptionHandler.html)\uc758 \uacbd\uc6b0 \ubc18\ud658 \ud0c0\uc785\uc774 void\uc778 \ube44\ub3d9\uae30 \uba54\uc11c\ub4dc\ub97c \uc608\uc678 \ucc98\ub9ac\ud558\uae30 \uc27d\ub3c4\ub85d \ub3c4\uc640\uc90d\ub2c8\ub2e4.  \\n\\n\ub530\ub77c\uc11c AsyncUncaughtExceptionHandler \uad6c\ud604\ud574\uc11c \uc608\uc678\ub97c \ud578\ub4e4\ub9c1\ud558\ub294 \ud074\ub798\uc2a4\ub97c \uc0dd\uc131\ud588\uc2b5\ub2c8\ub2e4.  \\n\uae30\uc874\uc758 \ub3d9\uae30 \uc608\uc678 \ucc98\ub9ac\uc758 \uacbd\uc6b0 \uc608\uc678\uac00 \ubc1c\uc0dd\ud560 \ub54c \uc2e4\ud589 \ud750\ub984\uc744 \ucd94\uc801\ud558\uae30 \uc704\ud574 MDC(Mapped Diagnostic Context)\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.  \\n\ube44\ub3d9\uae30 \uc608\uc678 \ucc98\ub9ac\uc758 \uacbd\uc6b0\uc5d0\ub3c4 \ub9c8\ucc2c\uac00\uc9c0\ub85c MDC\uc758 \uc815\ubcf4\ub97c \uac00\uc838\uc640\uc11c \ub85c\uadf8\ub97c \ucd9c\ub825\ud558\ub3c4\ub85d \uc124\uc815\ud588\uc2b5\ub2c8\ub2e4.  \\n\\n```java title=AsyncExceptionHandler\\n@Slf4j\\npublic class AsyncExceptionHandler implements AsyncUncaughtExceptionHandler {\\n\\n    private static final String LOG_FORMAT = \\"[%s] %s\\";\\n\\n    @Override\\n    public void handleUncaughtException(Throwable throwable, Method method, Object... obj) {\\n        log.info(String.format(LOG_FORMAT, MDC.get(REQUEST_ID.key()), throwable.getMessage()), throwable);\\n    }\\n}\\n```\\n\\nAsyncExceptionHandler\uc758 \uacbd\uc6b0 AsyncConfigurer\ub97c \uad6c\ud604\ud55c Configuration \ud074\ub798\uc2a4\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub4f1\ub85d\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\ngetAsyncUncaughtExceptionHandler() \uba54\uc11c\ub4dc\ub97c \uc624\ubc84\ub77c\uc774\ub529\ud558\uc5ec AsyncExceptionHandler\ub97c \ubc18\ud658\ud558\ub3c4\ub85d \uc124\uc815\ud574\uc8fc\uc5c8\uc2b5\ub2c8\ub2e4.  \\n\\n```java title=AsyncConfig\\n@EnableAsync\\n@Configuration\\npublic class AsyncConfig implements AsyncConfigurer {\\n\\n    @Override\\n    public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {\\n        return new AsyncExceptionHandler();\\n    }\\n}\\n```\\n\\n\uc774\uc81c \ube44\ub3d9\uae30 \uc0c1\ud669\uc5d0\uc11c \uc608\uc678\uac00 \ubc1c\uc0dd\ud558\ub294 \uacbd\uc6b0 AsyncUncaughtExceptionHandler\uc758 \uad6c\ud604\uccb4\uc778 AsyncExceptionHandler\uac00 \uc608\uc678\ub97c \uc7a1\uc544\uc11c \ucc98\ub9ac\ub97c \ud569\ub2c8\ub2e4.  \\n\\n### MDC \uc815\ubcf4 \uc5f0\ub3d9 \ubb38\uc81c\\n\\n\ube44\ub3d9\uae30 \ucc98\ub9ac\uc758 \uacbd\uc6b0 \ubcc4\ub3c4\uc758 \uc2a4\ub808\ub4dc\uc5d0\uc11c \ub3d9\uc791\ud558\uae30 \ub54c\ubb38\uc5d0 ThreadLocal \uae30\ubc18\uc73c\ub85c \ub3d9\uc791\ud558\ub294 MDC\uc758 \uc815\ubcf4\ub97c \uc5bb\uc5b4\uc62c \uc218 \uc5c6\uc5c8\uc2b5\ub2c8\ub2e4.  \\n\\n![./mdc-null.png](./mdc-null.png)\\n\\n\uc2a4\ud504\ub9c1 4.3 \uc774\uc0c1\ubd80\ud130 \uc81c\uacf5\ub418\ub294 [TaskDecorator](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/task/TaskDecorator.html)\ub97c \uc774\uc6a9\ud558\uba74 TaskExecutor\ub97c \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. TaskDecorator\ub97c \uad6c\ud604\ud55c \ud074\ub798\uc2a4\ub97c \ud558\ub098 \uc0dd\uc131\ud558\uace0, Task\uac00 \uc2e4\ud589\ub418\uae30 \uc804 MDC\uc758 \uc815\ubcf4\ub97c \ubcf5\uc0ac\ud558\ub3c4\ub85d \uc124\uc815\ud569\ub2c8\ub2e4.  \\n\\n```java title=MdcTaskDecorator\\npublic class MdcTaskDecorator implements TaskDecorator {\\n\\n    @Override\\n    public Runnable decorate(final Runnable runnable) {\\n        Map<String, String> threadContext = MDC.getCopyOfContextMap();\\n        return () -> {\\n            MDC.setContextMap(threadContext);\\n            runnable.run();\\n        };\\n    }\\n}\\n```\\n\\n\ud574\ub2f9 Decorator \ud074\ub798\uc2a4\ub97c \uc124\uc815 \ud30c\uc77c\uc5d0 \ub4f1\ub85d\ud569\ub2c8\ub2e4.\\n\\n```java title=AsyncConfig\\n@RequiredArgsConstructor\\n@EnableAsync\\n@Configuration\\npublic class AsyncConfig implements AsyncConfigurer {\\n\\n    private final AsyncConfigurationProperties properties;\\n\\n    @Bean\\n    public ThreadPoolTaskExecutor taskExecutor() {\\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\\n        executor.setCorePoolSize(properties.coreSize());\\n        executor.setMaxPoolSize(properties.maxSize());\\n        executor.setQueueCapacity(properties.queueCapacity());\\n        \\n        // highlight-next-line\\n        executor.setTaskDecorator(new MdcTaskDecorator());\\n        executor.setWaitForTasksToCompleteOnShutdown(true);\\n        executor.initialize();\\n        return executor;\\n    }\\n\\n    @Override\\n    public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {\\n        return new AsyncExceptionHandler();\\n    }\\n}\\n```\\n\\n\uc124\uc815 \ud6c4\uc5d0\ub294 \uc815\uc0c1\uc801\uc73c\ub85c MDC\uc5d0 \ub4e4\uc5b4\uac00 \uc788\ub294 UUID\uac00 \ucd9c\ub825\ub418\ub294 \uac83\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![./mdc-not-null.png](./mdc-not-null.png)\\n\\n\\n### \ucc38\uace0 \uc790\ub8cc\\n\\n[spring async, baeldung](https://www.baeldung.com/spring-async)  \\n[@Async will not call by @ControllerAdvice for global exception](https://stackoverflow.com/questions/61885358/async-will-not-call-by-controlleradvice-for-global-exception)  \\n[Spring \uc758 \ub3d9\uae30, \ube44\ub3d9\uae30, \ubc30\uce58 \ucc98\ub9ac\uc2dc \ud56d\uc0c1 context \ub97c \uc720\uc9c0\ud558\uace0 \ub85c\uae45\ud558\uae30, \uac15\ub0a8\uc5b8\ub2c8](https://blog.gangnamunni.com/post/mdc-context-task-decorator/)  \\n[TaskDecorator, Spring docs](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/task/TaskDecorator.html)  \\n[AsyncUncaughtExceptionHandler](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/aop/interceptor/AsyncUncaughtExceptionHandler.html)"},{"id":"viewmodel-test","metadata":{"permalink":"/viewmodel-test","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-09-06-Android ViewModel Test/2023-09-06-Android ViewModel Test.md","source":"@site/blog/2023-09-06-Android ViewModel Test/2023-09-06-Android ViewModel Test.md","title":"Android ViewModel Test","description":"\uc548\ub155\ud558\uc138\uc694! \ud2b8\ub9bd\ub4dc\ub85c\uc6b0 \ud300\uc758 \uc218\ub2ec\uc785\ub2c8\ub2e4!","date":"2023-09-06T00:00:00.000Z","formattedDate":"2023\ub144 9\uc6d4 6\uc77c","tags":[{"label":"android","permalink":"/tags/android"},{"label":"viewmodel","permalink":"/tags/viewmodel"},{"label":"test","permalink":"/tags/test"}],"readingTime":8.475,"hasTruncateMarker":false,"authors":[{"name":"\uc218\ub2ec","title":"Android","url":"https://github.com/otter66","imageURL":"https://github.com/otter66.png","key":"otter"}],"frontMatter":{"title":"Android ViewModel Test","slug":"viewmodel-test","authors":["otter"],"tags":["android","viewmodel","test"]},"prevItem":{"title":"\ube44\ub3d9\uae30 \uc608\uc678 \ub85c\uae45","permalink":"/log-async-exception"},"nextItem":{"title":"CloudWatch\ub97c \uc774\uc6a9\ud55c \ub85c\uae45, \uba54\ud2b8\ub9ad \ubaa8\ub2c8\ud130\ub9c1 \ud658\uacbd \uad6c\uc131","permalink":"/cloudwatch"}},"content":"\uc548\ub155\ud558\uc138\uc694! \ud2b8\ub9bd\ub4dc\ub85c\uc6b0 \ud300\uc758 \uc218\ub2ec\uc785\ub2c8\ub2e4!  \\n\uc774 \uae00\uc744 \ud1b5\ud574 \uc548\ub4dc\ub85c\uc774\ub4dc\uc5d0\uc11c ViewModel\uc5d0 \ub300\ud55c \ud14c\uc2a4\ud2b8\ub97c \uc791\uc131\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud574 \uc124\uba85\ub4dc\ub824\uace0 \ud569\ub2c8\ub2e4.  \\n\ub2e8\uc704 \ud14c\uc2a4\ud2b8\uac00 \ubb34\uc5c7\uc778\uc9c0 \uc774\ud574\ud558\uace0, \uc801\uc6a9\ud574 \ubcf8 \uacbd\ud5d8\uc774 \uc788\ub294 \uc0ac\ub78c\uc744 \ub300\uc0c1\uc73c\ub85c \uc124\uba85\ud558\uaca0\uc2b5\ub2c8\ub2e4. \uc774 \uc678\uc5d0\ub3c4 MVVM, LiveData, Coroutine, Thread\uc5d0 \ub300\ud574\uc11c \uc644\ubcbd\ud788\ub294 \uc544\ub2c8\ub354\ub77c\ub3c4 \uc54c\uace0 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4\uba74 \uc774\ud574\uc5d0 \ub3c4\uc6c0\uc774 \ub420 \uac83\uc774\ub77c \uc0dd\uac01\ud569\ub2c8\ub2e4.  \\n\uc774 \uae00\uc744 \uc77d\uace0 ViewModel \ud14c\uc2a4\ud2b8\uc640 \uce5c\ud574\uc9c0\uae38 \ubc14\ub78d\ub2c8\ub2e4! \ud654\uc774\ud305!\\n\\n## Android ViewModel Test\\n\\n\uc77c\ubc18\uc801\uc778 ViewModel\uc740 \uc0ac\uc804 \uc900\ube44 \uc5c6\uc774 \ud14c\uc2a4\ud2b8\ud558\uac8c \ub41c\ub2e4\uba74 \ud14c\uc2a4\ud2b8\uc5d0 \uc2e4\ud328\ud569\ub2c8\ub2e4. \uc5ec\uae30\uc5d0\ub294 \ud06c\uac8c \ub450 \uac00\uc9c0 \uacbd\uc6b0\uac00 \uc788\uc2b5\ub2c8\ub2e4. ViewModel\uc758 LiveData value \ubcc0\uacbd\uc5d0 \ub300\ud55c \ud14c\uc2a4\ud2b8, Coroutine\uacfc \uac19\uc740 \ube44\ub3d9\uae30 \uc791\uc5c5\uc5d0 \ub300\ud55c \ud14c\uc2a4\ud2b8\uc785\ub2c8\ub2e4. \ub450 \uacbd\uc6b0\uc5d0 \ub300\ud55c \uc2e4\ud328 \uc6d0\uc778\uc740 \uac19\uc2b5\ub2c8\ub2e4. \uc774\ub294 \ud14c\uc2a4\ud2b8\uac00 MainThread\uc5d0\uc11c \uc791\ub3d9\ud558\uc9c0 \uc54a\ub294\ub2e4\ub294 \uac83\uc785\ub2c8\ub2e4.\\n\\n### WorkerThread\\n\\n\ud14c\uc2a4\ud2b8\ub294 WorkerThread\uc5d0\uc11c \uc791\ub3d9\ud569\ub2c8\ub2e4.\\n\\n\ud14c\uc2a4\ud2b8\ub294 MainThread\uc5d0\uc11c \uc218\ud589\ud558\uc9c0 \uc54a\uace0, WorkerThread\uc5d0\uc11c \uc791\ub3d9\ud569\ub2c8\ub2e4. \uc774\uac83\uc774 \uc65c LiveData value \ubcc0\uacbd \ud14c\uc2a4\ud2b8\uc640 Coroutine \ud14c\uc2a4\ud2b8\uc758 \uc2e4\ud328\uc758 \uc6d0\uc778\uc774 \ub420\uae4c\uc694?  \\n\uc6b0\uc120, \ud14c\uc2a4\ud2b8\uac00 WorkerThread\uc5d0\uc11c \uc791\ub3d9\ud55c\ub2e4\ub294 \uac83\uc744 \ud655\uc778\ud574 \ubcf4\uace0, \uc774\uac83\uc774 \uc65c \ud14c\uc2a4\ud2b8 \uc2e4\ud328\uc758 \uc6d0\uc778\uc774 \ub418\ub294\uc9c0 \uc54c\uc544\ubcf4\uaca0\uc2b5\ub2c8\ub2e4. \uc544\ub798\uc758 \ucf54\ub4dc\ub97c \ubcf4\uba74 \ud14c\uc2a4\ud2b8\uac00 \\"Test worker\\" \uc2a4\ub808\ub4dc\uc5d0\uc11c \ub3d9\uc791\ud558\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n```kotlin\\nclass StudyTestThread {\\n\\n    @Test\\n    fun `\ud14c\uc2a4\ud2b8\ub294 \ud14c\uc2a4\ud2b8 \uc791\uc5c5 \uc2a4\ub808\ub4dc\uc5d0\uc11c \uc218\ud589\ub41c\ub2e4`() {\\n        val currentThreadName = Thread.currentThread().name\\n        assertEquals(\\"Test worker\\", currentThreadName)\\n    }\\n}\\n```\\n\\n## LiveData Test\\n\\n\uc544\ub798\uc758 `ViewModel`\ucf54\ub4dc\ub97c \ubcf4\uba74 \\\\_products\ub77c\ub294 LivaData value\uc5d0 \ubcc0\uacbd\uc774 \ubc1c\uc0dd\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n```kotlin\\nclass MainViewModel(private val productRepository: ProductRepository) : ViewModel() {\\n\\n    private val _products: MutableLiveData<List<Product>> = MutableLiveData(emptyList())\\n    val products: LiveData<List<Product>> get() = _products\\n\\n    fun fetchAllProducts() {\\n        _products.value = productRepository.getAllProducts()\\n    }\\n}\\n```\\n\\n\uc544\ub798\uc758 `ViewModelTest` \ucf54\ub4dc\ub97c \ubcf4\uba74 products\ub77c\ub294 LivaData value\uc5d0 \ubcc0\uacbd\uc774 \ubc1c\uc0dd\ud558\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n```kotlin\\ninternal class MainViewModelTest {\\n\\n    private lateinit var sut: MainViewModel\\n    private lateinit var productRepository: ProductRepository\\n\\n    @Before\\n    fun setUp() {\\n        productRepository = Fake.ProductRepository()    // \ud14c\uc2a4\ud2b8\ub97c \uc704\ud55c \uac00\uc9dc \uac1d\uccb4\ub85c \uc124\uc815\ud574\uc90d\ub2c8\ub2e4\\n        sut = MainViewModel(productRepository)\\n    }\\n\\n    @Test\\n    fun `\uc804\uccb4 \uc0c1\ud488\uc744 \uc870\ud68c\ud55c\ub2e4`() {\\n        // given\\n        val products = productRepository.getAllProducts()\\n\\n        // when\\n        sut.fetchAllProducts()\\n\\n        // then\\n        assertEquals(products, sut.products.value)\\n    }\\n}\\n```\\n\\n\uc774\ub807\uac8c \ud14c\uc2a4\ud2b8\ud558\uba74 LiveData\uc758 value\ub97c \ubcc0\uacbd\ud558\ub294 `sut.fetchAllProducts()` \ubd80\ubd84\uc5d0\uc11c \uc624\ub958\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4.  \\n![Alt text](image-3.png)\\n\\n### setValue() / postValue()\\n\\nLiveData\uc758 setValue() / postValue()\ub294 MainThread\uc5d0\uc11c \uc791\ub3d9\ud569\ub2c8\ub2e4.\\n\\n```java\\n@MainThread\\nprotected void setValue(T value) {\\n    assertMainThread(\\"setValue\\");   // \uba54\uc778 \uc2a4\ub808\ub4dc\uc5d0\uc11c \uc218\ud589\\n    mVersion++;\\n    mData = value;\\n    dispatchingValue(null);\\n}\\n\\nprotected void postValue(T value) {\\n    boolean postTask;\\n    synchronized (mDataLock) {\\n        postTask = mPendingData == NOT_SET;\\n        mPendingData = value;\\n    }\\n    if (!postTask) {\\n        return;\\n    }\\n    // \uba54\uc778 \uc2a4\ub808\ub4dc\uc5d0\uc11c \uc218\ud589\\n    ArchTaskExecutor.getInstance().postToMainThread(mPostValueRunnable);\\n}\\n```\\n\\n\uc55e\uc11c \uc124\uba85\ub4dc\ub838\ub4ef\uc774 \ud14c\uc2a4\ud2b8\ub294 `Test worker` \uc2a4\ub808\ub4dc\uc5d0\uc11c \ub3d9\uc791\ud558\uc9c0\ub9cc, \ud14c\uc2a4\ud2b8\uc5d0\uc11c \ud655\uc778\ud558\uace0\uc790\ud558\ub294 LiveData\uc758 \uac12 \ubcc0\uacbd\uc740 `Main` \uc2a4\ub808\ub4dc\uc5d0\uc11c \uc791\uc5c5\uc774 \uc77c\uc5b4\ub098\uc57c\ud569\ub2c8\ub2e4. \uc774 \uacfc\uc815\uc5d0\uc11c \uc624\ub958\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4.\\n\\n### InstantTaskExecutorRule()\\n\\n\uc2a4\ub808\ub4dc\uac00 \ub2ec\ub77c\uc11c \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 InstantTaskExecutorRule\uc744 \uc124\uc815\ud574\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.\\n\\n```kotlin\\ninternal class MainViewModelTest {\\n\\n    @get:Rule\\n    val instantExecutorRule = InstantTaskExecutorRule() //rule \uc124\uc815\\n\\n    private lateinit var sut: MainViewModel\\n    private lateinit var productRepository: ProductRepository\\n\\n    @Before\\n    fun setUp() { /* ... */ }\\n\\n    @Test\\n    fun `\uc804\uccb4 \uc0c1\ud488\uc744 \uc870\ud68c\ud55c\ub2e4`() { /* ... */ }\\n}\\n```\\n\\n[InstantTaskExecutorRule](https://developer.android.com/reference/androidx/arch/core/executor/testing/InstantTaskExecutorRule)\uc740 \uc548\ub4dc\ub85c\uc774\ub4dc \uc571 \uad6c\uc131\uc694\uc18c\uc5d0 \ub300\ud55c \ud14c\uc2a4\ud2b8\ub97c \ub3d9\uae30\uc801\uc778 \ud658\uacbd\uc5d0\uc11c \uc2e4\ud589\ud558\uace0, \uba54\uc778 \uc2a4\ub808\ub4dc\uc5d0\uc11c \ub3d9\uc791\ud558\ub294 \uac83\ucc98\ub7fc \uc2e4\ud589\ud569\ub2c8\ub2e4.\\n\\n```java\\npublic class InstantTaskExecutorRule extends TestWatcher {\\n    @Override\\n    protected void starting(Description description) {\\n        super.starting(description);\\n        ArchTaskExecutor.getInstance().setDelegate(new TaskExecutor() {\\n            @Override\\n            public void executeOnDiskIO(@NonNull Runnable runnable) {\\n                runnable.run();\\n            }\\n\\n            @Override\\n            public void postToMainThread(@NonNull Runnable runnable) {\\n                runnable.run();\\n            }\\n\\n            @Override\\n            public boolean isMainThread() {\\n                return true;    // \ud56d\uc0c1 \uba54\uc778 \uc2a4\ub808\ub4dc\uc778 \uac83\ucc98\ub7fc \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n            }\\n        });\\n    }\\n\\n    @Override\\n    protected void finished(Description description) {\\n        super.finished(description);\\n        ArchTaskExecutor.getInstance().setDelegate(null);\\n    }\\n}\\n```\\n\\n## Coroutine Test\\n\\n`viewModelscope.launch`\ub97c \uc0ac\uc6a9\ud558\ub294 \ucf54\ub4dc\uc5d0 \ub300\ud55c \ud14c\uc2a4\ud2b8\ub97c \uae30\uc900\uc73c\ub85c \uc124\uba85\ub4dc\ub9ac\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```kotlin\\nclass MainViewModel(private val productRepository: ProductRepository) : ViewModel() {\\n\\n    private val _products: MutableLiveData<List<Product>> = MutableLiveData(emptyList())\\n    val products: LiveData<List<Product>> get() = _products\\n\\n    fun fetchAllProducts() {\\n        viewModelScope.launch {\\n            _products.value = productRepository.getAllProducts()\\n        }\\n    }\\n}\\n```\\n\\n```kotlin\\ninternal class MainViewModelTest {\\n\\n    @get:Rule\\n    val instantExecutorRule = InstantTaskExecutorRule()\\n\\n    private lateinit var sut: MainViewModel\\n    private lateinit var productRepository: ProductRepository\\n\\n    @Before\\n    fun setUp() { /* ... */ }\\n\\n    @Test\\n    fun `\uc804\uccb4 \uc0c1\ud488\uc744 \uc870\ud68c\ud55c\ub2e4`() { /* ... */ }\\n}\\n```\\n\\n\uc774 \ub610\ud55c LiveData\uc640 \uac19\uc740 \uc774\uc720\ub85c \ud14c\uc2a4\ud2b8\uc5d0 \uc2e4\ud328\ud569\ub2c8\ub2e4.\\n\\n![Alt text](image-11.png)\\n\\n### viewModelScope.launch\\n\\nviewModelScope.launch\ub294 Dispatcher\uac00 \uc801\uc6a9\ub418\uc9c0 \uc54a\uc73c\uba74 MainThread\uc5d0\uc11c \uc791\ub3d9\ud569\ub2c8\ub2e4.\\n\\n```kotlin\\npublic val ViewModel.viewModelScope: CoroutineScope\\n    get() {\\n        val scope: CoroutineScope? = this.getTag(JOB_KEY)\\n        if (scope != null) {\\n            return scope\\n        }\\n        return setTagIfAbsent(\\n            JOB_KEY,\\n            CloseableCoroutineScope(SupervisorJob() + Dispatchers.Main.immediate)\\n        )\\n    }\\n```\\n\\n![Alt text](image.png)\\n\\n\ud14c\uc2a4\ud2b8\ub294 `Test worker` \uc2a4\ub808\ub4dc\uc5d0\uc11c \ub3d9\uc791\ud558\uace0, \ucf54\ub8e8\ud2f4\uc740 `Main` \uc2a4\ub808\ub4dc\uc5d0\uc11c \uc791\uc5c5\uc774 \uc77c\uc5b4\ub098\uc57c\ud569\ub2c8\ub2e4. \uc774 \uacfc\uc815\uc5d0\uc11c \uc624\ub958\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4.\\n\\n### Dispatchers.setMain / Dispatchers.resetMain\\n\\n\uc2a4\ub808\ub4dc\uac00 \ub2ec\ub77c\uc11c \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \uba54\uc778\uc744 \uc0ac\uc6a9\ud558\ub294 Dispatcher\uac00 TestDispatcher\ub97c \uc0ac\uc6a9\ud558\ub3c4\ub85d \ubcc0\uacbd\ud569\ub2c8\ub2e4. \uc989, \ud14c\uc2a4\ud2b8\uac00 \uc77c\uc5b4\ub098\ub294 \uc2a4\ub808\ub4dc\ub97c \ud1b5\uc77c\ud569\ub2c8\ub2e4.  \\n\ud14c\uc2a4\ud2b8\uac00 \uc885\ub8cc\ub41c \ud6c4\uc5d0\ub294 \ub2e4\uc2dc \ucd08\uae30 \uc0c1\ud0dc\ucc98\ub7fc \uba54\uc778 \uc2a4\ub808\ub4dc\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d Dispatcher\uc758 Main\uc744 \ucd08\uae30\ud654\ud569\ub2c8\ub2e4.\\n\\n```kotlin\\ninternal class MainViewModelTest {\\n\\n    @get:Rule\\n    val instantExecutorRule = InstantTaskExecutorRule()\\n\\n    private lateinit var sut: MainViewModel\\n    private lateinit var productRepository: ProductRepository\\n\\n    @Before\\n    @OptIn(ExperimentalCoroutinesApi::class)\\n    fun setUp() {\\n        Dispatchers.setMain(UnconfinedTestDispatcher()) // Main Dispatcher\ub97c \ubcc0\uacbd\ud55c\ub2e4.\\n        productRepository = Fake.ProductRepository()\\n        sut = MainViewModel(productRepository)\\n    }\\n\\n    @After\\n    @OptIn(ExperimentalCoroutinesApi::class)\\n    fun tearDown() {\\n        Dispatchers.resetMain() // Main Dispatcher\ub97c \ucd08\uae30 \uc0c1\ud0dc\ub85c \ubcf5\uad6c\uc2dc\ud0a8\ub2e4.\\n    }\\n\\n    @Test\\n    fun `\uc804\uccb4 \uc0c1\ud488\uc744 \uc870\ud68c\ud55c\ub2e4`() {\\n        // given\\n        val products = productRepository.getAllProducts()\\n\\n        // when\\n        sut.fetchAllProducts()\\n\\n        // then\\n        assertEquals(products, sut.products.value)\\n    }\\n}\\n\\n```\\n\\n### Coroutine Rule\\n\\n\uc55e\uc11c \uc124\uba85 \ub4dc\ub9b0 \ub300\ub85c \ud14c\uc2a4\ud2b8\uac00 \uc2dc\uc791\ud560 \ub54c \uc2a4\ub808\ub4dc\ub97c \uc124\uc815\ud558\uace0, \ud14c\uc2a4\ud2b8\uac00 \ub05d\ub0a0 \ub54c \uc2a4\ub808\ub4dc\ub97c \ub2e4\uc2dc \uc124\uc815\ud558\ub294 \ucf54\ub4dc\uac00 \uc788\uc73c\uba74 \ud14c\uc2a4\ud2b8\uac00 \uc870\uae08 \ub354 \uadc0\ucc2e\uc544\uc9c8 \uac81\ub2c8\ub2e4. \uadf8\ub7ec\ub2c8 \ub8f0\uc744 \uc0dd\uc131\ud574 \uc774 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.  \\n\uc544\ub798\uc758 \ucf54\ub4dc\ucc98\ub7fc \ub8f0\uc744 \uc791\uc131\ud574 \uc90d\ub2c8\ub2e4.\\n\\n```kotlin\\n@OptIn(ExperimentalCoroutinesApi::class)\\nclass MainCoroutineRule constructor(\\n    private val testDispatcher: TestDispatcher = UnconfinedTestDispatcher()\\n) : TestWatcher() {\\n\\n    @OptIn(ExperimentalCoroutinesApi::class)\\n    override fun starting(description: Description) {\\n        super.starting(description)\\n        Dispatchers.setMain(testDispatcher)\\n    }\\n\\n    @OptIn(ExperimentalCoroutinesApi::class)\\n    override fun finished(description: Description) {\\n        super.finished(description)\\n        Dispatchers.resetMain()\\n    }\\n}\\n```\\n\\n\ub9cc\ub4e4\uc5b4 \ub454 \ub8f0\uc744 \ud14c\uc2a4\ud2b8 \ub8f0\uc5d0 \uc801\uc6a9\ud574 \uc900\ub2e4\uba74 \ud14c\uc2a4\ud2b8 \uc2dc\uc791\uacfc \uc885\ub8cc \uc2dc\uc810\uc5d0 \uc2a4\ub808\ub4dc\ub97c \uc124\uc815\ud558\ub294 \ucf54\ub4dc\ub97c \ucd94\uac00\ub85c \uc791\uc131\ud558\uc9c0 \uc54a\uc544\ub3c4 \ub429\ub2c8\ub2e4.\\n\\n```kotlin\\ninternal class MainViewModelTest {\\n\\n    @get:Rule\\n    val instantExecutorRule = InstantTaskExecutorRule()\\n\\n    @get:Rule\\n    val mainCoroutineRule = MainCoroutineRule() // Dispatchers\ub97c \uc0ac\uc6a9\ud558\ub294 \uc2a4\ub808\ub4dc\uac00 \uba54\uc778 \uc2a4\ub808\ub4dc\uac00 \ub418\ub3c4\ub85d \ud569\ub2c8\ub2e4.\\n\\n    private lateinit var sut: MainViewModel\\n    private lateinit var productRepository: ProductRepository\\n\\n    @Before\\n    fun setUp() {\\n        productRepository = Fake.ProductRepository()\\n        sut = MainViewModel(productRepository)\\n    }\\n\\n    // \uc774\uc81c \ub9e4\ubc88 \uc124\uc815\ud574\uc904 \ud544\uc694\uac00 \uc5c6\uc5b4\uc84c\uc2b5\ub2c8\ub2e4!\\n\\n    @Test\\n    fun `\uc804\uccb4 \uc0c1\ud488\uc744 \uc870\ud68c\ud55c\ub2e4`() { /* ... */ }\\n}\\n```\\n\\n\uc774\ud574\uac00 \uc798 \ub418\uc168\uae30\ub97c \ubc14\ub77c\uba70... \ucd1d\ucd1d...\\n\\n## \ucc38\uace0\uc790\ub8cc\\n\\nhttps://tech.kakao.com/2021/11/08/test-code/"},{"id":"cloudwatch","metadata":{"permalink":"/cloudwatch","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-08-17-Cloudwatch/2023-08-17.md","source":"@site/blog/2023-08-17-Cloudwatch/2023-08-17.md","title":"CloudWatch\ub97c \uc774\uc6a9\ud55c \ub85c\uae45, \uba54\ud2b8\ub9ad \ubaa8\ub2c8\ud130\ub9c1 \ud658\uacbd \uad6c\uc131","description":"CloudWatch","date":"2023-08-17T00:00:00.000Z","formattedDate":"2023\ub144 8\uc6d4 17\uc77c","tags":[{"label":"cloudwatch","permalink":"/tags/cloudwatch"},{"label":"log","permalink":"/tags/log"},{"label":"monitoring","permalink":"/tags/monitoring"}],"readingTime":6,"hasTruncateMarker":false,"authors":[{"name":"\ud5c8\ube0c","title":"Backend","url":"https://github.com/greeng00se","imageURL":"https://github.com/greeng00se.png","key":"herb"}],"frontMatter":{"title":"CloudWatch\ub97c \uc774\uc6a9\ud55c \ub85c\uae45, \uba54\ud2b8\ub9ad \ubaa8\ub2c8\ud130\ub9c1 \ud658\uacbd \uad6c\uc131","slug":"cloudwatch","authors":["herb"],"tags":["cloudwatch","log","monitoring"]},"prevItem":{"title":"Android ViewModel Test","permalink":"/viewmodel-test"},"nextItem":{"title":"\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \ube44\ub3d9\uae30 \ucc98\ub9ac","permalink":"/route-image-async-with-event"}},"content":"## CloudWatch\\n\\nAWS \ub9ac\uc18c\uc2a4\uc640 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uc9c0\ud45c\uc640 \ub85c\uadf8\uc5d0 \ub300\ud55c \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc81c\uacf5\ud558\ub294 \uc11c\ube44\uc2a4\uc785\ub2c8\ub2e4.  \\n\uc9c0\ud45c\ub97c \uac10\uc2dc\ud558\uc5ec \uc54c\ub9bc\uc744 \ubcf4\ub0b4\ub294 \uae30\ub2a5\ub3c4 \uc81c\uacf5\ud569\ub2c8\ub2e4.  \\n\ud504\ub9ac\ud2f0\uc5b4\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \ub300\uc2dc\ubcf4\ub4dc\ub2f9 3$/M \uc758 \ube44\uc6a9\uc774 \uccad\uad6c\ub418\uace0, \uc9c0\ud45c\ub098 \ub85c\uadf8\uc758 \uc591\uc5d0 \ub530\ub77c \ube44\uc6a9\uc774 \ucd94\uac00\uc801\uc73c\ub85c \uccad\uad6c\ub429\ub2c8\ub2e4.  \\n\uc694\uae08 \uc815\ubcf4\uc5d0 \ub300\ud55c \uc790\uc138\ud55c \uc815\ubcf4\ub294 [\ub2e4\uc74c \ub9c1\ud06c](https://aws.amazon.com/ko/cloudwatch/pricing/)\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\n## CloudWatch Metrics\\n\\n\uae30\ubcf8\uc801\uc73c\ub85c 5\ubd84\ub9c8\ub2e4 \uc815\ubcf4\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\uc138\ubd80 \ubaa8\ub2c8\ud130\ub9c1(Detailed Monitoring)\uc744 \ud65c\uc131\ud654\ud558\uba74 1\ubd84\ub9c8\ub2e4 \uc9c0\ud45c\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\ub300\uc2dc\ubcf4\ub4dc\uc5d0\uc11c InstanceId\ub85c \uac80\uc0c9\ud558\uc5ec \uc9c0\ud45c\ub97c\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\n![./cloudwatch1.png](./cloudwatch1.png)\\n\\nCPUUtilization, NetworkIn, NetworkOut\uacfc \uac19\uc740 \uae30\ubcf8\uc801\uc778 \uc9c0\ud45c\ub97c \uc81c\uacf5\ud558\uace0, \uba54\ubaa8\ub9ac, \ub514\uc2a4\ud06c \uacf5\uac04\uacfc \uac19\uc740 \uc9c0\ud45c\ub97c \ud655\uc778\ud558\ub824\uba74 \uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc9c0\ud45c\ub97c \uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n## CloudWatch Agent \uc124\uce58\\n\\n\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc9c0\ud45c\uc640 \ub85c\uadf8\ub97c \uc218\uc9d1\ud558\ub824\uba74 CloudWatch Agent\ub97c \uc124\uce58\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n### IAM \uc5ed\ud560 \uc124\uc815\\n\\n\uae30\ubcf8\uc801\uc73c\ub85c EC2 \uc778\uc2a4\ud134\uc2a4\uac00 CloudWatchAgentServerPolicy\uc5d0 \ub300\ud55c \uad8c\ud55c\uc774 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4.  \\nIAM \u2192 \uc5ed\ud560\uc5d0\uc11c \uc5ed\ud560 \uc0dd\uc131\uc744 \ud074\ub9ad\ud569\ub2c8\ub2e4.\\n\\n![./cloudwatch2.png](./cloudwatch2.png)\\n\\nCloudWatchAgentServerPolicy \uad8c\ud55c \uc815\ucc45\uc744 \uc120\ud0dd\ud558\uace0, \uc801\ub2f9\ud55c \uc5ed\ud560 \uc774\ub984\uc744 \uc785\ub825\ud574\uc11c \uc5ed\ud560\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4.\\n\\n![./cloudwatch3.png](./cloudwatch3.png)\\n\\nEC2 \uc778\uc2a4\ud134\uc2a4 \ubaa9\ub85d\uc73c\ub85c \ub4e4\uc5b4\uac00\uc11c, CloudWatch Agent\ub97c \uc124\uce58\ud560 EC2 \uc778\uc2a4\ud134\uc2a4\ub97c \ud074\ub9ad\ud569\ub2c8\ub2e4.  \\n\uc791\uc5c5 \u2192 \ubcf4\uc548 \u2192 IAM \uc5ed\ud560 \uc218\uc815\uc5d0\uc11c \uc774\uc804\uc5d0 \uc0dd\uc131\ud55c \uc5ed\ud560\uc744 \uc9c0\uc815\ud574\uc90d\ub2c8\ub2e4.\\n\\n![./cloudwatch4.png](./cloudwatch4.png)\\n\\n### \uc124\uce58\\n\\n\ud658\uacbd\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.  \\n\\nOS: ubuntu 22.04  \\n\uc778\uc2a4\ud134\uc2a4 \uc720\ud615: t4g.small (ARM64)  \\n\\n\uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc785\ub825\ud558\uc5ec \uc124\uce58\ud569\ub2c8\ub2e4.\\n\\n```bash\\nwget https://s3.amazonaws.com/amazoncloudwatch-agent/ubuntu/arm64/latest/amazon-cloudwatch-agent.deb\\nsudo dpkg -i -E ./amazon-cloudwatch-agent.deb\\n```\\n\\n[\uc0ac\uc6a9 \uc124\uba85\uc11c](https://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/monitoring/install-CloudWatch-Agent-commandline-fleet.html)\ub97c \ub4e4\uc5b4\uac00 \ubcf4\uc2dc\uba74, \uac01 \uc778\uc2a4\ud134\uc2a4 \uc720\ud615\ub9c8\ub2e4 \ub2e4\uc6b4\ub85c\ub4dc \ub9c1\ud06c\uac00 \uc790\uc138\ud558\uac8c \uc548\ub0b4\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n### Wizard\\n\\nCloudWatch Wizard\ub97c \uc0ac\uc6a9\ud558\uba74 \uac04\ub2e8\ud558\uac8c \uc124\uc815 \ud30c\uc77c \uc0dd\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\ub85c\uadf8\ub97c \uc218\uc9d1\ud558\ub3c4\ub85d \uc124\uc815\ud558\ub294 \uacbd\uc6b0 Wizard \uc2e4\ud589 \uba85\ub839\uc5b4 \uc785\ub825 \uc804 log \ud30c\uc77c\uc758 \uc808\ub300 \uacbd\ub85c\ub97c \ubcf5\uc0ac\ud574\ub450\ub294 \uac83\uc744 \ucd94\ucc9c\ub4dc\ub9bd\ub2c8\ub2e4.  \\n\uc544\ub798\uc758 \uba85\ub839\uc5b4\ub97c \uc785\ub825\ud558\uc5ec Wizard\ub97c \uc2e4\ud589\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\n```bash\\nsudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-config-wizard\\n```\\n\\n\ucd94\uac00\uc801\uc73c\ub85c \ud544\uc694\ud55c \uac83\uc774 \uc5c6\ub294 \uacbd\uc6b0 Default \uc124\uc815\uc744 \uc120\ud0dd\ud558\uba74 \ub429\ub2c8\ub2e4.  \\n\uc124\uc815\uc744 \uc9c4\ud589\ud558\ub2e4 \ubcf4\uba74 \uc124\uc815 \ud30c\uc77c\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc744 \ubcf4\uc5ec\uc90d\ub2c8\ub2e4.  \\n\ub85c\uadf8\ub97c \ucd94\uac00\ud560 \uac83\uc774\ub0d0\uace0 \ubb3c\uc5b4\ubcf4\ub294 \uc785\ub825\ucc3d\uc774 \ub098\uc624\uba74 \uc900\ube44\ud574\ub480\ub358 \ub85c\uadf8 \ud30c\uc77c\uc758 \uc808\ub300 \uacbd\ub85c\ub97c \uc785\ub825\ud569\ub2c8\ub2e4.  \\n\\n![./cloudwatch5.png](./cloudwatch5.png)\\n\\n\uc911\uac04\uc5d0 SSM parameter store\uc5d0 \uc124\uc815 \ud30c\uc77c\uc744 \uc800\uc7a5\ud560 \uac83\uc774\ub0d0\uace0 \ubb3c\uc5b4\ubcf4\ub294 \ucc3d\uc774 \ub098\uc635\ub2c8\ub2e4. \\n\\n```bash\\nDo you want to store the config in the SSM parameter store?\\n1. yes\\n2. no\\n```\\n\\n\uae30\ubcf8\uac12\uc774 1\ubc88\uc778 yes \uc785\ub2c8\ub2e4. \ud604\uc7ac \uc124\uc815 \uae30\uc900\uc5d0\uc11c\ub294 2\ubc88\uc744 \uc120\ud0dd\ud569\ub2c8\ub2e4.  \\nParameter Store \uad00\ub9ac\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc740 \ub2e4\uc74c\uc758 [\ubb38\uc11c](https://dev.classmethod.jp/articles/manage-the-cloudwatch-agent-from-the-parameter-store/)\ub97c \ucc38\uace0\ud574 \ubcf4\uc2dc\uba74 \uc88b\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4.  \\n\uc124\uc815\uc774 \uc644\ub8cc\ub418\uba74 `/opt/aws/amazon-cloudwatch-agent/bin/config.json` \uc5d0 \uc124\uc815\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc774 \uc800\uc7a5\ub429\ub2c8\ub2e4.  \\n\\n### \uc124\uc815 \ud30c\uc77c \uc801\uc6a9\\n\\n\uc544\ub798\uc758 \uba85\ub839\uc5b4\ub97c \uc785\ub825\ud558\uc5ec \uc124\uc815\ud30c\uc77c\uc744 \uc801\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\nfile \ub4a4\uc5d0\ub294 \uc124\uc815 \ud30c\uc77c\uc5d0 \ub300\ud55c \uc808\ub300\uacbd\ub85c(\uc544\ub798 \uba85\ub839\uc5b4 \uae30\uc900 \uae30\ubcf8 \uc0dd\uc131 \uc704\uce58)\ub97c \uc785\ub825\ud558\uba74 \ub429\ub2c8\ub2e4.  \\n\\n```bash\\nsudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -s -c file:/opt/aws/amazon-cloudwatch-agent/bin/config.json\\n```\\n\\n### types.db: no such file or directory \uc5d0\ub7ec\\n\\n\ub2e4\uc74c\uacfc \uac19\uc740 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud55c\ub2e4\uba74 types.db \ud30c\uc77c\uc744 \uc0dd\uc131\ud574\uc11c \ubb38\uc81c\ub97c \ud574\uacb0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n```bash\\nError running agent: Error loading config file /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.toml: error parsing socket_listener, open /usr/share/collectd/types.db: no such file or directory\\n```\\n\\ntypes.db \ud30c\uc77c \uc0dd\uc131\\n\\n```bash\\nsudo mkdir /usr/share/collectd\\nsudo touch /usr/share/collectd/types.db\\n```\\n\\n### \uc9c0\ud45c \ud655\uc778\\n\\nCloudWatch Metrics\uc5d0 \uac00\ubcf4\uc2dc\uba74 CWAgent\ub77c\ub294 \uc0ac\uc6a9\uc790 \uc9c0\uc815 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uac00 \ucd94\uac00\ub41c \uac83\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\uc124\uc815 \ud30c\uc77c\uc5d0 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub97c \ucd94\uac00\ud558\ub294 \ubc29\ubc95\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\n![./cloudwatch6.png](./cloudwatch6.png)\\n\\n### \ub85c\uadf8\\n\\nCloudWatch \u2192 \ub85c\uadf8 \uadf8\ub8f9\uc73c\ub85c \uac00\uba74 Wizard\ub85c \ucd94\uac00\ud55c \ub85c\uadf8\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![./cloudwatch7.png](./cloudwatch7.png)\\n\\n### \ud074\ub77c\uc6b0\ub4dc \uc6cc\uce58 \uc124\uc815\\n\\n\uc704\uc758 \uc124\uc815 \ubc29\ubc95\uc744 \uc774\uc6a9\ud558\uc5ec \ucd5c\uc885\uc801\uc73c\ub85c \ud2b8\ub9bd\ub4dc\ub85c\uc6b0 \uc11c\ubc84\uc5d0 \uba54\ud2b8\ub9ad\uacfc \ub85c\uae45\uc5d0 \ub300\ud55c \uc815\ubcf4\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\uae30 \uc704\ud574 \ub300\uc2dc\ubcf4\ub4dc\uc5d0 \uc124\uc815\ud55c \ud654\uba74\uc785\ub2c8\ub2e4.\\n\\n![./cloudwatch8.png](./cloudwatch8.png)\\n\\n## \ucc38\uace0 \uc790\ub8cc\\n\\n[CloudWatch\ub780 \ubb34\uc5c7\uc785\ub2c8\uae4c?](https://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/monitoring/WhatIsCloudWatch.html)  \\n[Amazon CloudWatch \uc694\uae08](https://aws.amazon.com/ko/cloudwatch/pricing/)  \\n[Linux \uc778\uc2a4\ud134\uc2a4 \uc9c0\ud45c](https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/viewing_metrics_with_cloudwatch.html)  \\n[\uc11c\ubc84\uc5d0 CloudWatch \uc5d0\uc774\uc804\ud2b8 \uc124\uce58 \ubc0f \uc2e4\ud589](https://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/monitoring/install-CloudWatch-Agent-commandline-fleet.html)  \\n[CloudWatch Agent\ub97c Parameter Store\uc5d0\uc11c \uad00\ub9ac\ud574 \ubcf4\uae30](https://dev.classmethod.jp/articles/manage-the-cloudwatch-agent-from-the-parameter-store/)"},{"id":"route-image-async-with-event","metadata":{"permalink":"/route-image-async-with-event","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-08-13-\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \ube44\ub3d9\uae30 \ucc98\ub9ac/2023-08-13-\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \ube44\ub3d9\uae30 \ucc98\ub9ac.md","source":"@site/blog/2023-08-13-\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \ube44\ub3d9\uae30 \ucc98\ub9ac/2023-08-13-\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \ube44\ub3d9\uae30 \ucc98\ub9ac.md","title":"\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \ube44\ub3d9\uae30 \ucc98\ub9ac","description":"\uc774\uc804 \uae00","date":"2023-08-13T00:00:00.000Z","formattedDate":"2023\ub144 8\uc6d4 13\uc77c","tags":[{"label":"async","permalink":"/tags/async"},{"label":"event","permalink":"/tags/event"}],"readingTime":11.645,"hasTruncateMarker":false,"authors":[{"name":"\ud5c8\ube0c","title":"Backend","url":"https://github.com/greeng00se","imageURL":"https://github.com/greeng00se.png","key":"herb"}],"frontMatter":{"title":"\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \ube44\ub3d9\uae30 \ucc98\ub9ac","slug":"route-image-async-with-event","authors":["herb"],"tags":["async","event"]},"prevItem":{"title":"CloudWatch\ub97c \uc774\uc6a9\ud55c \ub85c\uae45, \uba54\ud2b8\ub9ad \ubaa8\ub2c8\ud130\ub9c1 \ud658\uacbd \uad6c\uc131","permalink":"/cloudwatch"},"nextItem":{"title":"\uc258 \ud504\ub86c\ud504\ud2b8 \ubcc0\uacbd\ud558\uae30","permalink":"/prompt"}},"content":"## \uc774\uc804 \uae00\\n\\n[\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uae30\uc220 \uc120\ud0dd](./route-image-intro)  \\n[\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uad6c\ud604](./route-image-implementation)\\n\\n## \uac1c\uc694\\n\\n\ud604\uc7ac \ucf54\ub4dc\uc5d0\uc11c\ub294 \uc5ec\ud589\uc744 \ub9c8\uce58\uac70\ub098 \uac10\uc0c1\uc744 \uc0dd\uc131\ud558\ub294 \uacbd\uc6b0 \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc694\uccad\uc774 \uc774\ub8e8\uc5b4\uc9d1\ub2c8\ub2e4.  \\n\uc774\ub54c \uc5ec\ud589\uc5d0 \ud3ec\ud568\ub41c \uc704\uce58\uc815\ubcf4\uc758 \uac1c\uc218\uc5d0 \uc815\ube44\ub840\ud558\uc5ec \uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc2dc\uac04\uc774 \uc99d\uac00\ud569\ub2c8\ub2e4.  \\n\ub530\ub77c\uc11c \ube44\ub3d9\uae30\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc694\uccad\uc744 \ucc98\ub9ac\ud558\uc5ec \uc0ac\uc6a9\uc790\uc758 \uacbd\ud5d8\uc744 \uac1c\uc120\uc2dc\ud0ac \uc218 \uc788\ub2e4\uace0 \uc0dd\uac01\ud588\uc2b5\ub2c8\ub2e4.  \\n\\n### \uc8fc\uae30\ub2a5\uc758 \uc751\ub2f5\uc18d\ub3c4 \uac1c\uc120\\n\\n\uc5ec\ud589 \uc885\ub8cc\uc640 \uac10\uc0c1 \uc0dd\uc131\uc774 \uc8fc\uae30\ub2a5\uc774\uace0, \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uae30\ub2a5\uc740 \ubd80\uae30\ub2a5\uc785\ub2c8\ub2e4.  \\n\ud558\uc9c0\ub9cc \ud604\uc7ac \uc5ec\ud589 \uc885\ub8cc\uc640 \uac10\uc0c1 \uc0dd\uc131\uc758 \uc751\ub2f5 \uc18d\ub3c4\uac00 \uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc2dc\uac04\uc5d0 \uc601\ud5a5\uc744 \ubc1b\uace0 \uc788\uc2b5\ub2c8\ub2e4.  \\n\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc740 \ube44\ub3d9\uae30 \ucc98\ub9ac\ud558\uc5ec\ub3c4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc0ac\uc6a9\uc5d0 \ubb38\uc81c\uac00 \ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.  \\n\uc18c\uc694 \uc2dc\uac04\uc774 1\ucd08 \uc774\uc0c1 \uac78\ub9ac\ub294 \uacbd\uc6b0\uac00 \uc874\uc7ac\ud558\uae30\uc5d0 \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc744 \ube44\ub3d9\uae30 \ucc98\ub9ac\ud558\uace0 \uc5ec\ud589 \uc885\ub8cc\uc640 \uac10\uc0c1 \uc0dd\uc131 \uae30\ub2a5\uc758 \uc751\ub2f5 \uc2dc\uac04\uc744 \uac1c\uc120\ud558\ub294 \uac83\uc774 \ub354 \uc911\uc694\ud558\ub2e4\uace0 \uc0dd\uac01\ud588\uc2b5\ub2c8\ub2e4.  \\n\\n### \ud655\uc7a5\uc131 \ub300\ube44\\n\\n\ud604\uc7ac 10\ubd84 \uac04\uaca9\uc73c\ub85c \uc704\uce58 \uc815\ubcf4\ub97c \uc11c\ubc84\uc5d0 \uc800\uc7a5\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.  \\n\uc870\uae08 \ub354 \uc9e7\uc740 \uac04\uaca9\uc73c\ub85c \uc704\uce58 \uc815\ubcf4\ub97c \uadf8\ub9ac\ub294 \uacbd\uc6b0 \ud558\ub098\uc758 \uc5ec\ud589\uc5d0 \ub9ce\uc740 \uc704\uce58 \uc815\ubcf4\uac00 \uc800\uc7a5\ub420 \uc218\ubc16\uc5d0 \uc5c6\uace0 \ub530\ub77c\uc11c \uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc5d0 \uac78\ub9ac\ub294 \uc2dc\uac04\uc774 \ub354 \uae38\uc5b4\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\ub530\ub77c\uc11c \ucd94\ud6c4\uc5d0 \ub354 \uc9e7\uc740 \uac04\uaca9\uc73c\ub85c \uc704\uce58 \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\ub294 \uacbd\uc6b0\ub97c \ub300\ube44\ud558\uc5ec \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc740 \ube44\ub3d9\uae30\ub85c \ucc98\ub9ac\ud558\ub294 \uac83\uc774 \ud569\ub2f9\ud558\ub2e4\uace0 \uc0dd\uac01\ud588\uc2b5\ub2c8\ub2e4.  \\n\\n## \ube44\ub3d9\uae30 \ucc98\ub9ac\\n\\n@Async\ub97c \uc0ac\uc6a9\ud558\uba74 \uac04\ub2e8\ud558\uac8c \uba54\uc11c\ub4dc\ub97c \ube44\ub3d9\uae30\ub85c \ub3d9\uc791\ud558\ub3c4\ub85d \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\n### \ube44\ub3d9\uae30 \uc124\uc815\\n\\n\uc0ac\uc6a9\ud558\uae30 \uc804\uc5d0 \uc124\uc815 \ud30c\uc77c\uc744 \ud558\ub098 \ub9cc\ub4e4\uc5b4\uc11c EnableAsync \uc124\uc815\uc744 \ud574\uc57c \ud569\ub2c8\ub2e4.  \\n\ud574\ub2f9 \uc124\uc815\uc744 \uc801\uc6a9\ud558\uba74 \ube44\ub3d9\uae30\uc801\uc73c\ub85c \uc2e4\ud589\ud558\ub824\ub294 \uba54\uc11c\ub4dc\uc5d0 @Async \uc560\ub108\ud14c\uc774\uc158\uc744 \ubd99\uc5ec\uc8fc\uae30\ub9cc \ud558\uba74 \ube44\ub3d9\uae30\ub85c \ub3d9\uc791\ud558\uac8c \ub429\ub2c8\ub2e4.  \\n\\n```java title=\\"AsyncConfig\\"\\n@EnableAsync\\n@Configuration\\npublic class AsyncConfig {\\n}\\n```\\n\\n\uc2a4\ud504\ub9c1 \ubd80\ud2b8\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \uae30\ubcf8\uc801\uc73c\ub85c \ube44\ub3d9\uae30 \ucc98\ub9ac\ub97c \ud560 \ub54c \ub9e4\ubc88 \uc0c8\ub85c\uc6b4 \uc2a4\ub808\ub4dc\ub97c \uc0dd\uc131\ud558\uae30 \ub54c\ubb38\uc5d0 \uc2a4\ub808\ub4dc \ud480 \uc124\uc815\uc744 \ub530\ub85c \ud574\uc918\uc57c \ud569\ub2c8\ub2e4.  \ud558\uc9c0\ub9cc \uc2a4\ud504\ub9c1 \ubd80\ud2b8\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 ThreadPoolTaskExecutor\ub97c \ub530\ub85c \uc124\uc815\ud558\uc9c0 \uc54a\uc544\ub3c4 \uae30\ubcf8\uc801\uc73c\ub85c \uc2a4\ud504\ub9c1 \ubd80\ud2b8\uac00 \uc0dd\uc131\uc744 \ub3c4\uc640\uc90d\ub2c8\ub2e4.  \\n\\n> In the absence of an Executor bean in the context, Spring Boot auto-configures a ThreadPoolTaskExecutor with sensible defaults that can be automatically associated to asynchronous task execution (@EnableAsync) and Spring MVC asynchronous request processing.\\n> 7.7. Task Execution and Scheduling, Spring Boot Docs\\n\\n### @Async \uc801\uc6a9\\n\\n\uc774\ubbf8\uc9c0 \uc0dd\uc131\uae30\uc5d0 Async \uc560\ub108\ud14c\uc774\uc158\uc744 \ubd99\uc5ec \ube44\ub3d9\uae30\ub85c \ub3d9\uc791\ud558\ub3c4\ub85d \uc124\uc815\ud569\ub2c8\ub2e4.  \\n\\n```java title=\\"RouteImageGenerator\\"\\n@Async\\npublic void generate(\\n        List<Double> latitudes,\\n        List<Double> longitudes,\\n        List<Double> pointedLatitudes,\\n        List<Double> pointedLongitudes,\\n        Long tripId\\n) {\\n    // \uc774\ubbf8\uc9c0 \uc0dd\uc131\\n    RouteImageDrawer routeImageDrawer = RouteImageDrawer.from(IMAGE_SIZE);\\n    Coordinates coordinates = Coordinates.of(latitudes, longitudes);\\n    Coordinates pointedCoordinates = Coordinates.of(pointedLatitudes, pointedLongitudes);\\n    drawImage(coordinates, routeImageDrawer, pointedCoordinates);\\n\\n    // \uc774\ubbf8\uc9c0 \uc800\uc7a5\\n    String imageName = routeImageUploader.upload(routeImageDrawer.bufferedImage());\\n\\n    // \uc790\uc6d0 \ud560\ub2f9 \ud574\uc81c\\n    routeImageDrawer.dispose();\\n\\n    // \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uac12 \ubcc0\uacbd\\n    Trip trip = tripRepository.findById(tripId)\\n        .orElseThrow();\\n    trip.changeRouteImageUrl(imageUrl);\\n    tripRepository.save(trip);\\n}\\n```\\n\\n### \ube44\ub3d9\uae30 \ucc98\ub9ac\uc2dc \ubb38\uc81c\uc810\\n\\n\ud604\uc7ac \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc744 \ud558\uace0 \uc800\uc7a5 \ud6c4, \uc800\uc7a5 \uacbd\ub85c\ub97c DB\uc5d0 \ubc18\uc601\ud574\uc57c \ud569\ub2c8\ub2e4.  \\n\ub530\ub77c\uc11c \ud328\ud0a4\uc9c0 \uac04 \uc21c\ud658 \ucc38\uc870 \ud615\ud0dc\uac00 \ub418\uba70 \uc758\uc874\uc131 \ubc29\ud5a5\uc774 \ubb38\uc81c\uac00 \ub429\ub2c8\ub2e4.  \\n\\n```mermaid\\ngraph LR\\n    trip[trip: \uc5ec\ud589 \uad00\ub828 \ud328\ud0a4\uc9c0] --\x3e draw[draw: \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uae30\ub2a5\uc744 \ud3ec\ud568\ud558\uace0 \uc788\ub294 \ud328\ud0a4\uc9c0]\\n    draw --\x3e trip\\n```\\n\\n\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uacfc \uc774\ubca4\ud2b8\ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc774 \uc788\uc2b5\ub2c8\ub2e4.  \\n\uc778\ud130\ud398\uc774\uc2a4\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \uad6c\uc870\ub85c \ubcc0\uacbd\ub429\ub2c8\ub2e4.  \\n\\n```mermaid\\ngraph LR\\n\\tsubgraph draw\\n\\t\\tdirection LR\\n\\t\\tRG[RouteImageGenerator] -- DB \ubc18\uc601 \uc694\uccad --\x3e ILR[ImageLinkTripRepository]\\n\\tend\\n    subgraph trip\\n\\t\\tdirection LR\\n\\t\\tTS[TripService] -- \uc774\ubbf8\uc9c0 \uc0dd\uc131 --\x3e RG\\n\\t\\tILRI[ImageLinkTripRepositoryImpl] -- \uad6c\ud604 --\x3e ILR\\n\\tend\\n\\n\\ttrip --\x3e draw\\n```\\n\\n\ud328\ud0a4\uc9c0 \uac04 \uc758\uc874\uc131\uc740 \ud574\uacb0\ub418\uc5c8\uc9c0\ub9cc, \uc774\ubbf8\uc9c0 \uacbd\ub85c \uc800\uc7a5\uc744 \uc704\ud574 tripId\ub97c \ubc1b\uc544\uc57c\ud558\ub294 \ub4f1\uc758 \ub17c\ub9ac\uc801\uc778 \uc758\uc874\uc131\uc740 \uc544\uc9c1 \ud574\uacb0\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.  \\n\ub530\ub77c\uc11c \uc774\ubca4\ud2b8\ub97c \uc0ac\uc6a9\ud558\uae30\ub85c \ud588\uc2b5\ub2c8\ub2e4.  \\n\\n## \uc774\ubca4\ud2b8 \uc0ac\uc6a9\\n\\n\uc2a4\ud504\ub9c1\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc774\ubca4\ud2b8\ub97c \uc0ac\uc6a9\ud558\uba74 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc758 \ube44\uad00\uc2ec\uc0ac(ex. \uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131)\uc744 \ud6a8\uc728\uc801\uc778 \ubc29\ubc95\uc73c\ub85c \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n### \uc774\ubca4\ud2b8 \ubc1c\ud589\\n\\n\uc774\ubca4\ud2b8\ub97c \uc0ac\uc6a9\ud558\ub824\uba74 \uba3c\uc800 \uc774\ubca4\ud2b8\ub97c \ubc1c\ud589\ud574\uc57c \ud569\ub2c8\ub2e4.  \\n\uc2a4\ud504\ub9c1\uc5d0\uc11c\ub294 ApplicationEventPublisher \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc774\ubca4\ud2b8\ub97c \ubc1c\ud589\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\ud574\ub2f9 \uc778\ud130\ud398\uc774\uc2a4\ub294 \ub0b4\ubd80\uc801\uc73c\ub85c ApplicationContext\uac00 \uad6c\ud604\ud558\uc5ec \uc774\ubca4\ud2b8\ub97c \ubc1c\ud589\ud558\uac8c \ub429\ub2c8\ub2e4.  \\n\\n```java title=\\"TripService & TripUpdateEvent\\"\\npublic void updateTripById(LoginUser loginUser, Long tripId, TripUpdateRequest tripUpdateRequest) {\\n    ...\\n\\n    // \uc774\ubca4\ud2b8 \ubc1c\ud589\\n    applicationEventPublisher.publishEvent(new TripUpdateEvent(trip.id()));\\n}\\n\\npublic record TripUpdateEvent(Long tripId) {\\n}\\n```\\n\\n\uc774\ubca4\ud2b8\ub97c \ubc1c\ud589\ud560 \ub54c \ubc1c\ud589\ud558\ub294 \uc774\ubca4\ud2b8\uba85\uc774 \uc911\uc694\ud569\ub2c8\ub2e4.  \\n\uc774\ubca4\ud2b8\ub97c \uad6c\ub3c5\ud558\ub294 \ub3c4\uba54\uc778\uc758 \ud589\uc704\ub97c \ub2f4\uace0 \uc788\ub294 \uc774\ubca4\ud2b8\ub97c \ubc1c\ud589(ex. RouteImageGenerateEvent)\ud55c\ub2e4\uba74 \ub17c\ub9ac\uc801\uc778 \uc758\uc874 \uad00\uacc4\uac00 \ub0a8\uc544\uc788\uae30\uc5d0 \uc774\ubca4\ud2b8\ub97c \uc801\uc808\ud788 \uc0ac\uc6a9\ud588\ub2e4\uace0 \ubcf4\uae30 \uc5b4\ub835\uc2b5\ub2c8\ub2e4.  \\n\ubc1c\ud589\ud558\ub294 \uc774\ubca4\ud2b8\uba85\uc740 \uc8fc\uae30\ub2a5\uc774 \uc5b4\ub5a4 \ud589\uc704(ex. TripUpdateEvent)\ub97c \ud588\ub294\uc9c0\uc5d0 \ub300\ud55c \uc815\ubcf4\uac00 \ub2f4\uaca8\uc788\ub294 \uc774\ubca4\ud2b8\uba85\uc73c\ub85c \ubc1c\ud589\ud558\ub294 \uac83\uc774 \uc911\uc694\ud569\ub2c8\ub2e4.  \\n\\n### \uc774\ubca4\ud2b8 \uad6c\ub3c5\\n\\n\uc774\ubca4\ud2b8\ub97c \uad6c\ub3c5\ud558\uc5ec \uc2e4\ud589\ud558\ub294 \uba54\uc11c\ub4dc\ub294 \ube44\ub3d9\uae30\ub85c \ucc98\ub9ac\ud558\uae30 \uc704\ud558\uc5ec `@Async` \uc560\ub108\ud14c\uc774\uc158\uc744 \uc801\uc6a9\ud588\uc2b5\ub2c8\ub2e4.  \\n\uc774\ubca4\ud2b8\uc758 \uad6c\ub3c5\uc740 \uc5ec\ud589\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \uc885\ub8cc\ub420 \ub54c \uc5ec\ud589\uc5d0 \ub300\ud55c \uc815\ubcf4\ub97c \uac00\uc9c0\uace0 \uacbd\ub85c \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud558\uae30 \uc704\ud574 `@TransactionalEventListener`\ub97c \uc0ac\uc6a9\ud588\uc2b5\ub2c8\ub2e4.  \\n\\n:::note TransactionPhase \uc124\uc815\\nTransactionPhase\uc744 \uc0ac\uc6a9\ud558\uc5ec \ud2b8\ub79c\uc7ad\uc158 \uc774\ubca4\ud2b8\ub97c \uc5b4\ub5a4 \ub2e8\uacc4\uc5d0\uc11c \uc218\uc2e0\ud558\uace0 \ucc98\ub9ac\ud560\uc9c0\ub97c \uc9c0\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\nAFTER_COMMIT(\uae30\ubcf8\uac12): \ud2b8\ub79c\uc7ad\uc158\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \ucee4\ubc0b \ub418\ub294 \uacbd\uc6b0 \uc774\ubca4\ud2b8 \uc2e4\ud589  \\nAFTER_ROLLBACK: \ud2b8\ub79c\uc7ad\uc158\uc774 \ub864\ubc31\ub418\ub294 \uacbd\uc6b0 \uc774\ubca4\ud2b8 \uc2e4\ud589  \\nAFTER_COMPLETION: \ud2b8\ub79c\uc7ad\uc158\uc774 \ucee4\ubc0b \ub610\ub294 \ub864\ubc31 \ub418\uc5c8\uc744 \uacbd\uc6b0 \uc774\ubca4\ud2b8 \uc2e4\ud589  \\nBEFORE_COMMIT: \ud2b8\ub79c\uc7ad\uc158\uc774 \ucee4\ubc0b \ub418\uae30 \uc804 \uc774\ubca4\ud2b8 \uc2e4\ud589  \\n:::\\n\\n\uc774\ubbf8\uc9c0 \uc0dd\uc131\uc758 \uacbd\uc6b0 \ud2b8\ub79c\uc7ad\uc158\uc5d0\uc11c \uc81c\uc678\ud558\uae30 \uc704\ud574 @Transactional \uc560\ub108\ud14c\uc774\uc158\uc744 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.  \\n\\n```java title=\\"TripUpdateEventHandler\\"\\n@Component\\npublic class TripUpdateEventHandler {\\n\\n    private final RouteImageGenerator routeImageGenerator;\\n    private final TripRepository tripRepository;\\n\\n    public TripUpdateEventHandler(RouteImageGenerator routeImageGenerator, TripRepository tripRepository) {\\n        this.routeImageGenerator = routeImageGenerator;\\n        this.tripRepository = tripRepository;\\n    }\\n\\n    @Async\\n    @TransactionalEventListener(phase = AFTER_COMMIT)\\n    public void handle(TripUpdateEvent tripUpdateEvent) {\\n        Trip trip = tripRepository.getTripWithPoints(tripUpdateEvent.tripId());\\n\\n        String imageUrl = routeImageGenerator.generate(\\n                trip.getLatitudes(),\\n                trip.getLongitudes(),\\n                trip.getPointedLatitudes(),\\n                trip.getPointedLongitudes()\\n        );\\n\\n        trip.changeRouteImageUrl(imageUrl);\\n        tripRepository.save(trip);\\n    }\\n}\\n```\\n\\n\uc774\ubca4\ud2b8\ub97c \uc0ac\uc6a9\ud568\uc73c\ub85c\uc368 \ud328\ud0a4\uc9c0 \uac04 \uc21c\ud658 \ucc38\uc870 \ubb38\uc81c\uac00 \ub2e4\uc74c\uacfc \uac19\uc774 \ud574\uacb0\ub418\uc5c8\uc2b5\ub2c8\ub2e4.  \\n\ub610\ud55c \uc8fc\uae30\ub2a5\uacfc \ubd80\uae30\ub2a5\uc744 \ubd84\ub9ac\ud568\uc73c\ub85c\uc368 \uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uae30\ub2a5\uc5d0 \ub300\ud55c \uc804\uccb4\uc801\uc778 \uacb0\ud569\ub3c4\ub97c \ub0ae\ucd9c \uc218 \uc788\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n```mermaid\\ngraph LR\\n    subgraph trip\\n        TripServcie -- \ubc1c\ud589 --\x3e TripUpdateEvent\\n        TripRepository\\n    end\\n\\n    subgraph draw\\n        TripUpdateEventHandler -- \uad6c\ub3c5 \ud6c4 \uc774\ubbf8\uc9c0 \uc0dd\uc131 --\x3e TripUpdateEvent\\n        TripUpdateEventHandler -- \uc0dd\uc131\ub41c \uc774\ubbf8\uc9c0 \uacbd\ub85c \uc800\uc7a5 --\x3e TripRepository\\n    end\\n```\\n\\n### \ud14c\uc2a4\ud2b8\\n\\n\ube44\ub3d9\uae30\ub85c \ub3d9\uc791\ud558\ub294 \uba54\uc11c\ub4dc\ub97c \ud14c\uc2a4\ud2b8\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc544\ub798\uc640 \uac19\uc740 \ubc29\ubc95\uc774 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\nimport Tabs from \\"@theme/Tabs\\";\\nimport TabItem from \\"@theme/TabItem\\";\\n\\n<Tabs>\\n<TabItem value=\\"\ube44\ub3d9\uae30 \uba54\uc11c\ub4dc\uac00 \uc885\ub8cc\ub420 \ub54c\uae4c\uc9c0 \ub300\uae30 \ud6c4 \uac80\uc99d\\" label=\\"\ube44\ub3d9\uae30 \uba54\uc11c\ub4dc\uac00 \uc885\ub8cc\ub420 \ub54c\uae4c\uc9c0 \ub300\uae30 \ud6c4 \uac80\uc99d\\">\\n\\n```java\\n@SpringBootTest\\npublic class TripUpdateEventHandlerIntegrationTest {\\n\\n    ...\\n\\n    @Test\\n    void \uc5ec\ud589\uc218\uc815_\uc774\ubca4\ud2b8\ub97c_\ubc1c\uc0dd\uc2dc\ud0a4\uba74_\uc774\ubbf8\uc9c0\ub97c_\uc0dd\uc131_\uc694\uccad\uc744_\ud55c\ub2e4() {\\n        // given\\n        TripUpdateEvent tripUpdateEvent = new TripUpdateEvent(1L);\\n        given(tripRepository.getTripWithPoints(tripUpdateEvent.tripId()))\\n                .willReturn(\uc5ec\ud589());\\n\\n        // when\\n        transactionTemplate.executeWithoutResult(action -> applicationEventPublisher.publishEvent(tripUpdateEvent));\\n\\n        // then\\n        then(routeImageGenerator)\\n                .should(Mockito.timeout(5000).times(1))\\n                .generate(any(), any(), any(), any());\\n    }\\n}\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\\"\ud14c\uc2a4\ud2b8 \ud560 \ub54c\ub9cc \ube44\ub3d9\uae30\ub97c \ub3d9\uae30\ub85c \ubcc0\uacbd\ud558\uc5ec \uac80\uc99d\\" label=\\"\ud14c\uc2a4\ud2b8 \ud560 \ub54c\ub9cc \ube44\ub3d9\uae30\ub97c \ub3d9\uae30\ub85c \ubcc0\uacbd\ud558\uc5ec \uac80\uc99d\\" default>\\n\\n```java\\n@ContextConfiguration(classes = TestSyncConfig.class)\\n@SpringBootTest\\npublic class TripUpdateEventHandlerIntegrationTest {\\n\\n    ...\\n\\n    @Test\\n    void \uc5ec\ud589\uc218\uc815_\uc774\ubca4\ud2b8\ub97c_\ubc1c\uc0dd\uc2dc\ud0a4\uba74_\uc774\ubbf8\uc9c0\ub97c_\uc0dd\uc131_\uc694\uccad\uc744_\ud55c\ub2e4() {\\n        // given\\n        TripUpdateEvent tripUpdateEvent = new TripUpdateEvent(1L);\\n        given(tripRepository.getTripWithPoints(tripUpdateEvent.tripId()))\\n                .willReturn(\uc5ec\ud589());\\n\\n        // when\\n        transactionTemplate.executeWithoutResult(action -> applicationEventPublisher.publishEvent(tripUpdateEvent));\\n\\n        // then\\n        then(routeImageGenerator)\\n                .should(times(1))\\n                .generate(any(), any(), any(), any());\\n    }\\n}\\n```\\n\\n</TabItem>\\n</Tabs>\\n\\n\ucc98\uc74c\uc5d0\ub294 \ud14c\uc2a4\ud2b8\uc5d0\uc11c\ub9cc \ub3d9\uae30\ub85c \uc124\uc815 \ud6c4 \uac80\uc99d\ud558\ub824\uace0 \ud588\uc2b5\ub2c8\ub2e4.  \\n\ud1b5\ud569 \ud14c\uc2a4\ud2b8\uc5d0\uc120 `\ud2b8\ub79c\uc7ad\uc158\uc774 \uc815\uc0c1 \uc885\ub8cc\ub418\uc5c8\uc744 \ub54c \ube44\ub3d9\uae30\ub85c \uc774\ubca4\ud2b8\ub97c \uad6c\ub3c5\ud558\uc5ec \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uba54\uc11c\ub4dc\ub97c \ud638\ucd9c\ud558\ub294\uc9c0` \uac80\uc99d\uc774 \ud544\uc694\ud588\uae30 \ub54c\ubb38\uc5d0 \ucd5c\uc885\uc801\uc73c\ub85c  `Mockito.timeout` \uba54\uc11c\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc5ec \ube44\ub3d9\uae30 \uba54\uc11c\ub4dc\uac00 \ud1b5\uacfc\ub420 \ub54c\uae4c\uc9c0 \ub300\uae30\ud558\ub294 \ubc29\ud5a5\uc73c\ub85c \ubcc0\uacbd\ud588\uc2b5\ub2c8\ub2e4.  \\n\\n## \uacb0\uacfc\\n\\n![./time.png](./time.png)\\n\\n\uc704 \uc751\ub2f5 \uc2dc\uac04\uc740 \uc704\uce58 \uc815\ubcf4 1000\uac1c\ub97c \uae30\uc900\uc73c\ub85c \ud14c\uc2a4\ud2b8\ud55c \uac12\uc785\ub2c8\ub2e4.  \\n\uc751\ub2f5 \uc2dc\uac04\uc5d0 \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc2dc\uac04\uc774 \ud3ec\ud568\ub418\uc9c0 \uc54a\uc544\uc11c \uc131\ub2a5\uc774 \uac1c\uc120\ub41c \uac83\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\n## \ucc38\uace0 \uc790\ub8cc\\n\\n[7.7. Task Execution and Scheduling, Spring Boot Docs](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.task-execution-and-scheduling)  \\n[Spring Events, Baeldung](https://www.baeldung.com/spring-events)  \\n[\ud68c\uc6d0\uc2dc\uc2a4\ud15c \uc774\ubca4\ud2b8\uae30\ubc18 \uc544\ud0a4\ud14d\ucc98 \uad6c\ucd95\ud558\uae30](https://techblog.woowahan.com/7835/)"},{"id":"prompt","metadata":{"permalink":"/prompt","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-08-01-\uc258 \ud504\ub86c\ud504\ud2b8 \ubcc0\uacbd\ud558\uae30/2023-08-01-\uc258 \ud504\ub86c\ud504\ud2b8 \ubcc0\uacbd\ud558\uae30.mdx","source":"@site/blog/2023-08-01-\uc258 \ud504\ub86c\ud504\ud2b8 \ubcc0\uacbd\ud558\uae30/2023-08-01-\uc258 \ud504\ub86c\ud504\ud2b8 \ubcc0\uacbd\ud558\uae30.mdx","title":"\uc258 \ud504\ub86c\ud504\ud2b8 \ubcc0\uacbd\ud558\uae30","description":"\uc11c\ubc84 \uc124\uc815\uc744 \ud558\ub2e4\ubcf4\uba74 \uc258\ub9cc \ubcf4\uace0 \ud504\ub85c\ub355\uc158 \uc11c\ubc84\uc778\uc9c0, \uac1c\ubc1c \uc11c\ubc84\uc778\uc9c0 \uad6c\ubd84\ud558\uae30 \uc5b4\ub824\uc6b8 \ub54c\uac00 \uc788\uc2b5\ub2c8\ub2e4.","date":"2023-08-01T00:00:00.000Z","formattedDate":"2023\ub144 8\uc6d4 1\uc77c","tags":[{"label":"linux","permalink":"/tags/linux"},{"label":"shell","permalink":"/tags/shell"}],"readingTime":2.865,"hasTruncateMarker":false,"authors":[{"name":"\ud5c8\ube0c","title":"Backend","url":"https://github.com/greeng00se","imageURL":"https://github.com/greeng00se.png","key":"herb"}],"frontMatter":{"title":"\uc258 \ud504\ub86c\ud504\ud2b8 \ubcc0\uacbd\ud558\uae30","slug":"prompt","authors":["herb"],"tags":["linux","shell"]},"prevItem":{"title":"\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \ube44\ub3d9\uae30 \ucc98\ub9ac","permalink":"/route-image-async-with-event"},"nextItem":{"title":"\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uad6c\ud604","permalink":"/route-image-implementation"}},"content":"\uc11c\ubc84 \uc124\uc815\uc744 \ud558\ub2e4\ubcf4\uba74 \uc258\ub9cc \ubcf4\uace0 \ud504\ub85c\ub355\uc158 \uc11c\ubc84\uc778\uc9c0, \uac1c\ubc1c \uc11c\ubc84\uc778\uc9c0 \uad6c\ubd84\ud558\uae30 \uc5b4\ub824\uc6b8 \ub54c\uac00 \uc788\uc2b5\ub2c8\ub2e4.  \\n\uc11c\ubc84\ubcc4\ub85c \uc258 \ud504\ub86c\ud504\ud2b8\ub97c \uc124\uc815\ud558\uba74 \uc774 \ubd88\ud3b8\ud568\uc744 \ud574\uacb0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\n### \uacc4\uc815 \ubcc4 \ud130\ubbf8\ub110 \uc124\uc815\\n\\nPS1\uc740 \ub9ac\ub205\uc2a4 \uae30\ubc18 \uc6b4\uc601 \uccb4\uc81c\uc5d0\uc11c \uc0ac\uc6a9\uc790\uc758 \uc258 \ud504\ub86c\ud504\ud2b8\ub97c \uc124\uc815\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\ub418\ub294 \ud658\uacbd \ubcc0\uc218\uc785\ub2c8\ub2e4.  \\n\ud574\ub2f9 \ud658\uacbd \ubcc0\uc218\ub97c \ubcc0\uacbd\ud558\uba74 \uc0ac\uc6a9\uc790\uba85, \uc2dc\uac04 \uc815\ubcf4 \ub4f1 \ud544\uc694\ud55c \uc815\ubcf4\ub97c \uc6d0\ud558\ub294 \ub300\ub85c \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n~/.bashrc \ud30c\uc77c\uc5d0 PS1\uc5d0 \ub300\ud55c \uac12\uc744 \uc124\uc815\ud55c\ub2e4\uba74 \ub3d9\uc77c\ud55c \uacc4\uc815\uc73c\ub85c \uc7ac\uc811\uc18d\ud558\uc5ec\ub3c4 \uc124\uc815\uc744 \uc720\uc9c0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\n### \uc774\uc2a4\ucf00\uc774\ud504 \ubb38\uc790\\n\\n\uc774\uc2a4\ucf00\uc774\ud504 \ubb38\uc790\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc258 \ud504\ub86c\ud504\ud2b8\uc5d0 \uc11c\ubc84\uc5d0 \ub300\ud55c \uc815\ubcf4\ub97c \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\n| \uc774\uc2a4\ucf00\uc774\ud504 \ubb38\uc790 | \uc124\uba85 |\\n| --- | --- |\\n| \\\\u | \uc0ac\uc6a9\uc790 \uc774\ub984 |\\n| \\\\h | \ud638\uc2a4\ud2b8 \uc774\ub984 |\\n| \\\\w | \ud604\uc7ac \uc791\uc5c5 \ub514\ub809\ud1a0\ub9ac (\uc804\uccb4 \uacbd\ub85c) |\\n| \\\\W | \ud604\uc7ac \uc791\uc5c5 \ub514\ub809\ud1a0\ub9ac (\ub514\ub809\ud1a0\ub9ac \uc774\ub984) |\\n| \\\\d | \ud604\uc7ac \ub0a0\uc9dc (YYYY-MM-DD) |\\n| \\\\t | \ud604\uc7ac \uc2dc\uac04 (HH:MM:SS) |\\n| \\\\n | \uc904 \ubc14\uafc8 \ubb38\uc790 |\\n| \\\\$ | \uc77c\ubc18 \uc0ac\uc6a9\uc790 $ root\uc758 \uacbd\uc6b0 # |\\n\\n### \uc0c9\uc0c1 \uc124\uc815\\n\\n`\\\\e[` - \uc0c9\uc0c1 \ubcc0\uacbd\uc744 \uc2dc\uc791\ud558\uace0 \uc2f6\uc744 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.  \\n`\uc0c9\uc0c1\ucf54\ub4dcm` - \uc0c9\uc0c1\uc744 \uc120\ud0dd\ud569\ub2c8\ub2e4.  \\n`\\\\e[0m` - \uc0c9\uc0c1 \ubcc0\uacbd\uc744 \uc885\ub8cc\ud558\uace0 \uc2f6\uc744 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\\n\\n```bash\\n\ube68\uac04\uc0c9 hello world \u2192 \\"\\\\e[31mhello world!\\\\e[0m\\"\\n```\\n\\necho -e \uc635\uc158\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc0c9\uc0c1\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \uc801\uc6a9\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\\n```bash\\necho -e \\"\\\\e[31mhello world! \\\\e[0m\\"\\n```\\n\\n### \uc0c9\uc0c1\ud45c\\n\\n| \uc0c9\uc0c1 | \uae00\uc790\uc0c9 | \ubc30\uacbd\uc0c9 |\\n| --- | --- | --- |\\n| Black | 30 | 40 |\\n| Red | 31 | 41 |\\n| Green | 32 | 42 |\\n| Yellow | 33 | 43 |\\n| Blue | 34 | 44 |\\n| Purple | 35 | 45 |\\n| Cyan | 36 | 46 |\\n| White | 37 | 47 |\\n\\n### ~/.bashrc \ud30c\uc77c\uc5d0 \uc801\uc6a9\\n\\n`sudo vim ~/.bashrc` \uc744 \uc785\ub825\ud558\uc5ec \uc124\uc815 \ud30c\uc77c\uc744 \uc5f0 \ud6c4\uc5d0 \uc801\uc6a9\ud558\uace0 \uc2f6\uc740 \ubb38\uc790\ub97c PS1 \ud658\uacbd\ubcc0\uc218\uc5d0 \ud560\ub2f9\ud558\uace0 \uc800\uc7a5\ud569\ub2c8\ub2e4.  \\n\\n```bash title=\\"~/.bashrc\\"\\nPS1=\\"\\\\e[32m[\\\\t TRIPDRAW-DEV \\\\u]\\\\$ \\\\e[0m\\"\\n```\\n\\n\uc801\uc6a9\uc740 source \uba85\ub839\uc5b4\ub97c \uc774\uc6a9\ud558\uba74 \ub429\ub2c8\ub2e4.  \\n\\n```bash\\nsource ~/.bashrc\\n```\\n\\n![./shell.png](./shell.png)\\n\\n### \ucc38\uace0 \uc790\ub8cc\\n\\n[Linux Hint](https://linuxhint.com/bash-ps1-customization/)"},{"id":"route-image-implementation","metadata":{"permalink":"/route-image-implementation","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-07-31-\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uad6c\ud604/2023-07-31-\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uad6c\ud604.mdx","source":"@site/blog/2023-07-31-\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uad6c\ud604/2023-07-31-\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uad6c\ud604.mdx","title":"\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uad6c\ud604","description":"\uac1c\uc694","date":"2023-07-31T00:00:00.000Z","formattedDate":"2023\ub144 7\uc6d4 31\uc77c","tags":[{"label":"image","permalink":"/tags/image"},{"label":"awt","permalink":"/tags/awt"}],"readingTime":11.955,"hasTruncateMarker":false,"authors":[{"name":"\ud5c8\ube0c","title":"Backend","url":"https://github.com/greeng00se","imageURL":"https://github.com/greeng00se.png","key":"herb"}],"frontMatter":{"title":"\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uad6c\ud604","slug":"route-image-implementation","authors":["herb"],"tags":["image","awt"]},"prevItem":{"title":"\uc258 \ud504\ub86c\ud504\ud2b8 \ubcc0\uacbd\ud558\uae30","permalink":"/prompt"},"nextItem":{"title":"\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uae30\uc220 \uc120\ud0dd","permalink":"/route-image-intro"}},"content":"## \uac1c\uc694\\n\\n\uc704\uc640 \uac19\uc774 \uc5ec\ud589\uc5d0 \ub300\ud55c \uacbd\ub85c\ub97c \ubcf4\uc5ec\uc8fc\uae30 \uc704\ud574 \uacbd\ub85c \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud558\ub294 \uae30\ub2a5\uc744 \ucd94\uac00\ud558\uc600\uc2b5\ub2c8\ub2e4.  \\n\uacbd\ub85c \uc774\ubbf8\uc9c0\uc5d0 \ub300\ud55c \uc694\uad6c\uc0ac\ud56d \ubc0f \uae30\uc220 \uc120\ud0dd\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc740 [\ub9c1\ud06c](./route-image-intro)\uc5d0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n### \uad6c\ud604 \uacb0\uacfc\\n\\n![./result.png](./result.png)\\n\\n\uc608\uc2dc \ub370\uc774\ud130\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.  \\n**\uc11c\uc6b8\uc5ed(\uc810)** \u2192 \uc2e0\uc0ac\uc5ed \u2192 \ub178\ub7c9\uc9c4\uc5ed \u2192 \ud64d\ub300\uc785\uad6c\uc5ed \u2192 \uc885\ub85c3\uac00\uc5ed \u2192 \uc625\uc218\uc5ed \u2192 **\uad6c\ub85c\uc5ed(\uc810)** \u2192 \uc2e0\ub9bc\uc5ed \u2192 \ubc1c\uc0b0\uc5ed\\n\\n```java title=\\"\uc608\uc2dc \ub370\uc774\ud130\\"\\nList<Double> x = List.of(\\n        126.97094933811682, 127.02154822802501, 126.94218991864345, 126.92402556641424,\\n        126.99265358592287, 127.01779856076462, 126.88474839801178, 126.92900751277035, 126.83930056313639\\n);\\nList<Double> y = List.of(\\n        37.55302829553499, 37.51619698970427, 37.51294119442773, 37.5565933969331,\\n        37.57034879708931, 37.54027238225762, 37.50129417536773, 37.48258811529137, 37.557607696911184\\n);\\nList<Double> xPoints = List.of(126.97094933811682, 126.88474839801178);\\nList<Double> yPoints = List.of(37.55302829553499, 37.50129417536773);\\n```\\n\\n### IMAGE_SIZE & ROUTE_SIZE\\n\\n```java title=\\"RouteImageGenerator.java\\"\\nprivate static final int IMAGE_SIZE = 800;\\nprivate static final int ROUTE_SIZE = 600;\\n```\\n\\n\ucf54\ub4dc\ub97c \ubcf4\uba74 \uc774\ubbf8\uc9c0 \ud06c\uae30\uc640 \uacbd\ub85c \ud06c\uae30\uac00 \uc788\uc2b5\ub2c8\ub2e4.  \\n\uc774\ubbf8\uc9c0 \ud06c\uae30\ub294 \ub9d0 \uadf8\ub300\ub85c \uc774\ubbf8\uc9c0\uc758 width\uc640 height\ub97c \uc758\ubbf8\ud569\ub2c8\ub2e4.  \\n\uacbd\ub85c \ud06c\uae30\uc758 \uacbd\uc6b0 \uc0c1\ud558\uc88c\uc6b0 100px \ub9cc\ud07c\uc758 \uac04\uaca9\uc744 \uc704\ud574 \uc874\uc7ac\ud569\ub2c8\ub2e4.  \\n\ub530\ub77c\uc11c \uc2e4\uc81c \uacbd\ub85c \uadf8\ub824\uc9c0\ub294 \ud06c\uae30\ub294 600 * 600 \uc0ac\uc774\uc988\ub85c \uc0dd\uc131\ub429\ub2c8\ub2e4.  \\n\\n![./600.png](./600.png)\\n\\n**\uc0ac\uc774\uc988 \ubcc0\uacbd\uc758 \uc774\uc720**\\n\\n255 * 255 \uc815\ub3c4\uc758 \uc791\uc740 \uc0ac\uc774\uc988\ub85c \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud574\ubcf4\ub824\uace0 \ud588\ub294\ub370 \ud654\uc9c8\uc774 \ub108\ubb34 \uc548\uc88b\uc544\uc11c 800\uc73c\ub85c \ubcc0\uacbd\ud588\uc2b5\ub2c8\ub2e4.\\n\\n## \uc8fc\uc694 \ud074\ub798\uc2a4\\n\\n### \uc694\uc57d\\n\\n| \ud074\ub798\uc2a4\uba85 | \uc124\uba85 | \ud2b9\uc774\uc0ac\ud56d |\\n| --- | --- | --- |\\n| Coordinate | \uc704\ub3c4, \uacbd\ub3c4\ub85c \uc774\ub8e8\uc5b4\uc9c4 \uc704\uce58 \uac12 | \uc88c\ud45c\ub97c \ub73b\ud558\uc9c0\ub9cc Point\uc640 \uad6c\ubd84\ud558\uae30 \uc704\ud574 longitude, latitude\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 x, y \uc0ac\uc6a9 |\\n| Coordinates | Coordinate\uc758 \uc77c\uae09 \uceec\ub809\uc158 | - |\\n| Position | \uc2e4\uc81c \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc5d0 \uc0ac\uc6a9\ud560 \uc704\uce58 \uac12 | Integer \ud0c0\uc785\uc758 x, y \uc0ac\uc6a9 |\\n| Positions | Positions\uc758 \uc77c\uae09 \uceec\ub809\uc158 | - |\\n| RouteImageDrawer | \uc2e4\uc81c \uc774\ubbf8\uc9c0\uc5d0 \uacbd\ub85c\ub97c \uadf8\ub824\uc8fc\ub294 \ud074\ub798\uc2a4 BufferedImage, Graphics2D\ub97c \uac00\uc9c0\uace0 \uc788\uc74c | \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc5d0 \ud544\uc694\ud55c \uc0c1\uc218\uac00 \uc815\uc758\ub418\uc5b4 \uc788\uc74c |\\n| RouteImageUploader | BufferedImage\ub97c \ubc1b\uc544 \uc11c\ubc84\uc5d0 \uc5c5\ub85c\ub4dc \ud558\ub294 \ud074\ub798\uc2a4 | \ud604\uc7ac \uc5c5\ub85c\ub4dc \uc704\uce58\uac00 \uc815\ud574\uc9c0\uc9c0 \uc54a\uc544 \uc77c\ub2e8 \uae30\ubcf8(\ud504\ub85c\uc81d\ud2b8 \ub8e8\ud2b8) \uc704\uce58\uc5d0 \uc0dd\uc131 |\\n| RouteImageGenerator | \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud558\uace0 \uc5c5\ub85c\ub4dc\ud558\ub294 \uc11c\ube44\uc2a4 | \uc5ec\ud589 \uc885\ub8cc, \uac10\uc0c1 \uc800\uc7a5\uc2dc \ud574\ub2f9 \ud074\ub798\uc2a4\ub97c \ud1b5\ud574 \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc694\uccad  |\\n| BufferedImage(AWT) | \uc774\ubbf8\uc9c0 \ub370\uc774\ud130\ub97c \ucc98\ub9ac\ud558\uace0 \uc870\uc791\ud558\ub294 \ub370 \uc0ac\uc6a9 | \uc67c\ucabd \uc0c1\ub2e8\uc758 \uc88c\ud45c\uac00 (0, 0) |\\n| Graphics2D(AWT) | \uc120 \uadf8\ub9ac\uae30, \uc0c9\uc0c1 \uad00\ub9ac \ub4f1\uc744 \uc9c0\uc6d0\ud558\ub294 \ud074\ub798\uc2a4 \uc2e4\uc81c \ud574\ub2f9 \ud074\ub798\uc2a4\uc758 draw \uba54\uc11c\ub4dc\ub97c \uacbd\ub85c\ub97c \uadf8\ub9bc | JDK1.2 \uc774\ud6c4\uc5d0 \ucd94\uac00\ub428, 2D(\ud3c9\uba74) \uadf8\ub798\ud53d \ud658\uacbd\uc744 \uc9c0\uc6d0, bufferedImage.createGraphics \uba54\uc11c\ub4dc\ub97c \ud1b5\ud574 \uc0dd\uc131 |\\n\\n### \uc758\uc874\uad00\uacc4\\n\\n```mermaid\\ngraph TD\\n  C1[Coordinates] --\x3e C[Coordinate]\\n  P1[Positions] --\x3e P[Position]\\n\\n\\tRID[RouteImageDrawer] -- \\"\uc911\uc559 \uc815\ub82c\ub41c Positions\ub97c \ubc1b\uc544 \uc774\ubbf8\uc9c0 \uc0dd\uc131\\" --\x3e P1\\n\\tRID --\x3e B[BufferedImage]\\n\\tRID --\x3e G[Graphics2D]\\n\\n\\tC1 -- \\"calculatePositions \uc2e4\uc81c \uc774\ubbf8\uc9c0\uc5d0 \uc0dd\uc131\uc5d0 \ud544\uc694\ud55c \uc704\uce58 \uacc4\uc0b0\\" --\x3e P1\\n\\n\\tRIU[RouteImageUploader] --\x3e B\\n\\tRIG[RouteImageGenerator] --\x3e RID\\n\\tRIG --\x3e RIU\\n\\tRIG --\x3e C1\\n\\tRIG --\x3e P1\\n```\\n\\n### Coordinates(\uc704\ub3c4, \uacbd\ub3c4\uc758 \uc77c\uae09 \uceec\ub809\uc158)\\n\\n`List<Double>` 2\uac1c(\uc704\ub3c4, \uacbd\ub3c4)\uc778 \ud615\ud0dc\ub85c \uad00\ub9ac\ud558\ub294 \ubc29\ubc95\uc774 \uc788\uc5c8\uc9c0\ub9cc, \uc704\uce58 \uc810\uc744 \uc5ec\ub7ec\uac1c \ucc0d\ub294 \ubd80\ubd84\uc5d0\uc11c \ub85c\uc9c1\uc774 \ubcf5\uc7a1\ud574 \uc9c8 \uac83 \uac19\uc544\uc11c Coordinate(x, y)\uc640 \uc77c\uae09 \uceec\ub809\uc158\uc778 Coordinates\ub85c \uad00\ub9ac\ud558\uae30\ub85c \ud588\uc2b5\ub2c8\ub2e4.  \\nCoordinates \ud074\ub798\uc2a4\uc5d0\ub294 \ub2e4\uc74c \ub450 \uac1c\uc758 \uc778\ud130\ud398\uc774\uc2a4\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.\\n\\n- calculatePositions: \uacbd\ub85c \uc774\ubbf8\uc9c0\uc758 \ud06c\uae30\ub97c \ubc1b\uc544 \uc2e4\uc81c \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc2dc \uc0ac\uc6a9\ub420 Positions\ub97c \ubc18\ud658\\n- indexOf: \ub2e4\ub978 Coordinates\ub97c \ubc1b\uc544 \ub3d9\uc77c\ud55c \uc704\uce58\uc810\uc5d0 \ud574\ub2f9\ud558\ub294 \uc778\ub371\uc2a4\ub97c \ubc18\ud658\ud558\ub294 \\n\\nPositions \uacc4\uc0b0 \ub85c\uc9c1\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.  \\n\uc704\ub3c4, \uacbd\ub3c4 \uac01\uac01\uc5d0 \ub300\ud55c \ubd80\ubd84\uc744 \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc2dc \ud544\uc694\ud55c \uac12\uc73c\ub85c \ubcc0\ud658\ud569\ub2c8\ub2e4.\\n\\n```java title=\\"Coordinates.java\\"\\n// \ud638\ucd9c\\n// List<Integer> xPositions = toPositions(xValues, maxDifference, routeImageSize);\\n// List<Integer> yPositions = toPositions(yValues, maxDifference, routeImageSize);\\n\\nprivate List<Integer> toPositions(List<Double> values, Double maxDifference, Integer routeImageSize) {\\n    Double minValue = Collections.min(values);\\n    return values.stream()\\n            .map(value -> normalizeCoordinate(value, maxDifference, minValue))\\n            .map(value -> mapToPosition(value, routeImageSize))\\n            .toList();\\n}\\n\\nprivate double normalizeCoordinate(Double coordinate, Double maxDifference, Double minValue) {\\n    return (coordinate - minValue) / maxDifference;\\n}\\n\\nprivate int mapToPosition(Double coordinate, Integer routeImageSize) {\\n    return (int) (coordinate * routeImageSize);\\n}\\n```\\n\\n\uc704\ub3c4\ub85c \uc608\uc2dc\ub97c \ub4e4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n1. Collections.min(values) \u2192 \uc704\ub3c4\ub97c \ubc1b\uc544 \uc704\ub3c4 \ub9ac\uc2a4\ud2b8\uc758 \ucd5c\uc18c\uac12\uc744 \uad6c\ud569\ub2c8\ub2e4.\\n2. normalizeCoordinate \u2192 \uac01 \uac12\uc5d0\uc11c \ucd5c\uc18c\uac12\uc744 \ube7c\uace0 0 ~ 1 \uc0ac\uc774 \uac12\uc73c\ub85c \ubcc0\ud658 \ud6c4 **\uc704\uacbd\ub3c4\uc758 \ucd5c\ub300 \ucc28\uc774**\ub85c \ub098\ub215\ub2c8\ub2e4.\\n3. mapToPosition \u2192 \uadf8\ub798\ud504 \ud06c\uae30\ub97c \ubc1b\uc544 0 ~ 1 \uc0ac\uc774 \uac12\uc744 \uc2e4\uc81c \uc774\ubbf8\uc9c0\ub97c \uc704\ud55c \uc704\uce58\uac12\uc73c\ub85c \ubcc0\ud658\ud569\ub2c8\ub2e4.\\n\\n### Positions(\uc2e4\uc81c \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc5d0 \uc0ac\uc6a9\ud560 \uc704\uce58)\\n\\nPositions \ud074\ub798\uc2a4\uc5d0\ub294 \ub2e4\uc74c \ub2e4\uc12f \uac1c\uc758 \uc778\ud130\ud398\uc774\uc2a4\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.\\n\\n- align: \uc774\ubbf8\uc9c0 \uc0ac\uc774\uc988\uc640 \uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0ac\uc774\uc988\ub97c \ubc1b\uc544 Position \uac12\ub4e4\uc744 \uc911\uc559 \uc815\ub82c\ud569\ub2c8\ub2e4.\\n- getPositionsByIndexes: \uc778\ub371\uc2a4 \ub9ac\uc2a4\ud2b8\ub97c \ubc1b\uc544 \uc785\ub825\ubc1b\uc740 \uc778\ub371\uc2a4\uc5d0 \ud574\ub2f9\ud558\ub294 \uac12\ub4e4\uc744 \ubc18\ud658\ud569\ub2c8\ub2e4.\\n- size: \ud06c\uae30\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4.\\n- xPositions: x \uac12\ub4e4\uc744 \ubc18\ud658\ud569\ub2c8\ub2e4.\\n- yPositions: y \uac12\ub4e4\uc744 \ubc18\ud658\ud569\ub2c8\ub2e4.\\n\\n\uc911\uc559 \uc815\ub82c \ub85c\uc9c1\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.  \\n\\n```java title=\\"Positions.java\\"\\npublic Positions align(int imageSize, int routeSize) {\\n    int xOffset = calculateOffset(Position::x, imageSize);\\n    int yOffset = calculateOffset(Position::y, imageSize);\\n\\n    return items.stream()\\n            .map(item -> new Position(item.x() + xOffset, imageSize - (item.y() + yOffset)))\\n            .collect(collectingAndThen(toList(), Positions::new));\\n}\\n\\nprivate int calculateOffset(ToIntFunction<Position> positionToInteger, int imageSize) {\\n    List<Integer> positions = items.stream()\\n            .mapToInt(positionToInteger)\\n            .boxed()\\n            .toList();\\n\\n    int midValue = (Collections.min(positions) + Collections.max(positions)) / 2;\\n    return imageSize / 2 - midValue;\\n}\\n```\\n\\n\uc0c1\ud558\uc88c\uc6b0 \uc5ec\ubc31\uc744 \ub3d9\uc77c\ud558\uac8c \uc8fc\uae30 \uc704\ud574\uc11c offset \uac12\uc744 \uad6c\ud574\uc11c x, y \uac12\uc5d0 \uac01\uac01 \ub354\ud558\ub294 \ud615\ud0dc\ub85c \uc911\uc559 \uc815\ub82c\uc744 \uc218\ud589\ud588\uc2b5\ub2c8\ub2e4.  \\nBufferedImage\ub97c \uc0ac\uc6a9\ud560 \ub54c \uc67c\ucabd \uc0c1\ub2e8\uc758 \uc88c\ud45c (0, 0) \uae30\uc900\uc73c\ub85c \uc544\ub798\ub85c \ub0b4\ub824\uac08\uc218\ub85d y \uac12\uc774 \ucee4\uc9c0\uace0, \uc624\ub978\ucabd\uc73c\ub85c \uac08 \uc218\ub85d x \uac12\uc774 \ucee4\uc9d1\ub2c8\ub2e4.  \\n\\n![./800.png](./800.png)\\n\\n\ub530\ub77c\uc11c \ucd5c\uc885\uc801\uc73c\ub85c \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud558\uae30 \uc704\ud55c \uac12\uc744 \ub2e4\uc74c\uacfc \uac19\uc774 \uad6c\ud588\uc2b5\ub2c8\ub2e4.\\n\\nx \uac12 \u2192 \uacc4\uc0b0\ud55c offset \uadf8\ub300\ub85c \ub354\ud569\ub2c8\ub2e4.  \\ny \uac12 \u2192 imageSize(800)\uc5d0\uc11c y + offset \uac12\uc744 \ube8d\ub2c8\ub2e4.  \\n\\n### RouteImageDrawer(\uc2e4\uc81c \uc774\ubbf8\uc9c0\uc5d0 \uacbd\ub85c\ub97c \uadf8\ub824\uc8fc\ub294 \ud074\ub798\uc2a4)\\n\\nBufferedImage, Graphics2D\ub97c \ud544\ub4dc\ub85c \uac00\uc9c0\uace0 \uc788\ub294 \ud074\ub798\uc2a4\uc785\ub2c8\ub2e4.  \\n\uadf8\ub9bc\uc744 \uadf8\ub9ac\uae30 \uc704\ud574 \uc124\uc815\ud55c \uc0c1\uc218\ub4e4\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4.\\n\\n```java title=\\"RouteImageDrawer.java\\"\\n// RGB\uc5d0 \uac01\uac01 8\ube44\ud2b8\uc529 \ud560\ub2f9\ud55c \uac12\uc744 24\ube44\ud2b8 \ud2b8\ub8e8\uceec\ub7ec\ub77c \ubd80\ub985\ub2c8\ub2e4.\\n// \ud574\ub2f9 \uc124\uc815\uc740 24\ube44\ud2b8 + 8\ube44\ud2b8(alpha, \ud22c\uba85\ub3c4)\ub97c \ucd94\uac00\ud55c 32\ube44\ud2b8 \uc774\ubbf8\uc9c0 \ud0c0\uc785\uc785\ub2c8\ub2e4.\\n// \uc774\ub97c RGBA\ub77c\uace0 \ubd80\ub985\ub2c8\ub2e4.\\nprivate static final int IMAGE_TYPE = BufferedImage.TYPE_INT_ARGB;\\n// \ubc30\uacbd \ud22c\uba85\uc0c9\\nprivate static final Color TRANSPARENT = new Color(0, 0, 0, 0);\\n// \uacbd\ub85c\ub97c \uc704\ud55c STROKE\\nprivate static final int LINE_STROKE_WIDTH = 7;\\nprivate static final Stroke LINE_STROKE = new BasicStroke(LINE_STROKE_WIDTH, CAP_ROUND, JOIN_ROUND);\\n// \uc704\uce58 \uc810\uc744 \uc704\ud55c STROKE\\nprivate static final int POINT_STROKE_WIDTH = 20;\\nprivate static final Stroke POINT_STROKE = new BasicStroke(POINT_STROKE_WIDTH, CAP_ROUND, JOIN_ROUND);\\n// \uc548\ud2f0\uc568\ub9ac\uc5b4\uc2f1 \ub4f1 \ud654\uc9c8\uc774 \uc548\uc88b\uc740 \uc774\ubbf8\uc9c0\ub97c \uac1c\uc120\ud558\uae30 \uc704\ud55c \uc124\uc815\\nprivate static final Map<Object, Object> renderingHints = Map.of(\\n        RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON,\\n        RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY,\\n        RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC\\n);\\n```\\n\\nRouteImageDrawer \ud074\ub798\uc2a4\uc5d0\ub294 \ub2e4\uc74c \uc138 \uac1c\uc758 \uc778\ud130\ud398\uc774\uc2a4\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.\\n\\n- drawLine: \uc120\uc744 \uadf8\ub9bd\ub2c8\ub2e4.\\n- drawPoint: \uc810\uc744 \ucc0d\uc2b5\ub2c8\ub2e4.\\n- dispose: \uc790\uc6d0 \ud560\ub2f9\uc744 \ud574\uc81c\ud569\ub2c8\ub2e4. \\n\\ndispose\uc758 \uacbd\uc6b0 \ub0b4\ubd80\uc5d0\uc11c \uc0dd\uc131\ub41c graphics2D\uc5d0 \ub300\ud55c \uc790\uc6d0 \ud560\ub2f9\uc744 \ud574\uc81c\ud558\ub294 \uba54\uc11c\ub4dc\uc778 graphics2D.dispose\ub97c \ud638\ucd9c\ud569\ub2c8\ub2e4.\\n\\n## \uc774\ubbf8\uc9c0 \uc0dd\uc131 Flow\\n\\n### 1. \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc900\ube44\\n\\n```mermaid\\nsequenceDiagram\\n    \uc678\ubd80 \ud074\ub798\uc2a4 ->> RouteImageGenerator: \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc694\uccad(\uc704\uacbd\ub3c4, \uc704\uce58 \uc810\uc744 \ucc0d\uc744 \uac12 \uc804\ub2ec)\\n    RouteImageGenerator->>RouteImageDrawer: ImageSize\ub97c \uc804\ub2ec\ud558\uc5ec \uac1d\uccb4 \uc0dd\uc131, \ub0b4\ubd80\uc5d0\uc11c BufferedImage, Graphincs2D \uc0dd\uc131\\n    RouteImageGenerator->>Coordinates1(\uc704\uacbd\ub3c4): \uc704\uacbd\ub3c4 \uc774\uc6a9\ud558\uc5ec Coordinates1 \uc0dd\uc131\\n    RouteImageGenerator->>Coordinates2(\uc704\uce58\uc810): \uc704\uce58\uc810 \uc774\uc6a9\ud558\uc5ec Coordinates2 \uc0dd\uc131\\n\\n```\\n\\n### 2. \uc120 \uadf8\ub9ac\uae30 \uc694\uccad\\n\\n```mermaid\\nsequenceDiagram\\n    RouteImageGenerator->>Coordinates1(\uc704\uacbd\ub3c4): \uc815\ub82c\ub41c Positions\ub97c \uc0dd\uc131 \uc694\uccad\\n    Coordinates1(\uc704\uacbd\ub3c4)->>RouteImageGenerator: \uc815\ub82c\ub41c Positions \ubc18\ud658\\n    RouteImageGenerator->>RouteImageDrawer: \uc815\ub82c\ub41c Positions\ub97c \uacbd\ub85c \uadf8\ub9ac\uae30 \uc694\uccad\\n```\\n\\n### 3. \uc704\uce58 \uc810 \uadf8\ub9ac\uae30 \uc694\uccad\\n\\n```mermaid\\nsequenceDiagram\\n    RouteImageGenerator->>Coordinates1(\uc704\uacbd\ub3c4): Coordinate2(\uc704\uce58\uc810)\ub97c \uc804\ub2ec\ud558\uace0 \ud574\ub2f9 \uc704\uce58\uc810\uacfc \uc77c\uce58\ud558\ub294 Coordinate\uc758 \uc778\ub371\uc2a4 \uc0dd\uc131 \uc694\uccad\\n    Coordinates1(\uc704\uacbd\ub3c4)->>RouteImageGenerator: \uc704\uce58\uc810\uc5d0 \ud574\ub2f9\ud558\ub294 \uc778\ub371\uc2a4(List<Integer>) \ubc18\ud658\\n    RouteImageGenerator->>\uc815\ub82c\ub41c Positions: \uc778\ub371\uc2a4(List<Integer>)\ub97c \uc804\ub2ec\ud558\uc5ec \uc778\ub371\uc2a4\uc5d0 \ud574\ub2f9\ud558\ub294 Positions \uc0dd\uc131 \uc694\uccad\\n    \uc815\ub82c\ub41c Positions->>RouteImageGenerator: \uc704\uce58\uc810\uc5d0 \ud574\ub2f9\ud558\ub294 Positions \ubc18\ud658(pointPositions)\\n\\n    RouteImageGenerator->>RouteImageDrawer: pointPositions\ub97c \uc804\ub2ec\ud558\uc5ec \uc704\uce58 \uc810 \uadf8\ub9ac\uae30 \uc694\uccad\\n```\\n\\n### 4. \uc5c5\ub85c\ub4dc \uc694\uccad\\n\\n```mermaid\\nsequenceDiagram\\n  \\tRouteImageGenerator->>RouteImageUploader: bufferedImage(RouteImageDrawer\uc5d0\uc11c getter \uc0ac\uc6a9)\ub97c \uc804\ub2ec\ud558\uc5ec \uc774\ubbf8\uc9c0 \uc800\uc7a5 \uc694\uccad\\n  \\tRouteImageUploader->>RouteImageGenerator: \uc800\uc7a5 \ud6c4 \uc800\uc7a5\ub41c \uc774\ubbf8\uc9c0\uba85(\ub610\ub294 url) \ubc18\ud658\\n  \\tRouteImageGenerator->>\uc678\ubd80 \ud074\ub798\uc2a4: \uc800\uc7a5\ub41c \uc774\ubbf8\uc9c0\uba85(\ub610\ub294 url) \ubc18\ud658\\n```\\n\\n### \uc804\uccb4 Flow\\n\\n```mermaid\\nsequenceDiagram\\n    \uc678\ubd80 \ud074\ub798\uc2a4 ->> RouteImageGenerator: \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc694\uccad(\uc704\uacbd\ub3c4, \uc704\uce58 \uc810\uc744 \ucc0d\uc744 \uac12 \uc804\ub2ec)\\n    RouteImageGenerator->>RouteImageDrawer: ImageSize\ub97c \uc804\ub2ec\ud558\uc5ec \uac1d\uccb4 \uc0dd\uc131, \ub0b4\ubd80\uc5d0\uc11c BufferedImage, Graphincs2D \uc0dd\uc131\\n    RouteImageGenerator->>Coordinates1(\uc704\uacbd\ub3c4): \uc704\uacbd\ub3c4 \uc774\uc6a9\ud558\uc5ec Coordinates1 \uc0dd\uc131\\n    RouteImageGenerator->>Coordinates2(\uc704\uce58\uc810): \uc704\uce58\uc810 \uc774\uc6a9\ud558\uc5ec Coordinates2 \uc0dd\uc131\\n    RouteImageGenerator->>Coordinates1(\uc704\uacbd\ub3c4): \uc815\ub82c\ub41c Positions\ub97c \uc0dd\uc131 \uc694\uccad\\n    Coordinates1(\uc704\uacbd\ub3c4)->>RouteImageGenerator: \uc815\ub82c\ub41c Positions \ubc18\ud658\\n    RouteImageGenerator->>RouteImageDrawer: \uc815\ub82c\ub41c Positions\ub97c \uacbd\ub85c \uadf8\ub9ac\uae30 \uc694\uccad\\n    RouteImageGenerator->>Coordinates1(\uc704\uacbd\ub3c4): Coordinate2(\uc704\uce58\uc810)\ub97c \uc804\ub2ec\ud558\uace0 \ud574\ub2f9 \uc704\uce58\uc810\uacfc \uc77c\uce58\ud558\ub294 Coordinate\uc758 \uc778\ub371\uc2a4 \uc0dd\uc131 \uc694\uccad\\n    Coordinates1(\uc704\uacbd\ub3c4)->>RouteImageGenerator: \uc704\uce58\uc810\uc5d0 \ud574\ub2f9\ud558\ub294 \uc778\ub371\uc2a4(List<Integer>) \ubc18\ud658\\n    RouteImageGenerator->>\uc815\ub82c\ub41c Positions: \uc778\ub371\uc2a4(List<Integer>)\ub97c \uc804\ub2ec\ud558\uc5ec \uc778\ub371\uc2a4\uc5d0 \ud574\ub2f9\ud558\ub294 Positions \uc0dd\uc131 \uc694\uccad\\n    \uc815\ub82c\ub41c Positions->>RouteImageGenerator: \uc704\uce58\uc810\uc5d0 \ud574\ub2f9\ud558\ub294 Positions \ubc18\ud658(pointPositions)\\n\\n    RouteImageGenerator->>RouteImageDrawer: pointPositions\ub97c \uc804\ub2ec\ud558\uc5ec \uc704\uce58 \uc810 \uadf8\ub9ac\uae30 \uc694\uccad\\n    RouteImageGenerator->>RouteImageUploader: bufferedImage(RouteImageDrawer\uc5d0\uc11c getter \uc0ac\uc6a9)\ub97c \uc804\ub2ec\ud558\uc5ec \uc774\ubbf8\uc9c0 \uc800\uc7a5 \uc694\uccad\\n    RouteImageUploader->>RouteImageGenerator: \uc800\uc7a5 \ud6c4 \uc800\uc7a5\ub41c \uc774\ubbf8\uc9c0\uba85(\ub610\ub294 url) \ubc18\ud658\\n    RouteImageGenerator->>\uc678\ubd80 \ud074\ub798\uc2a4: \uc800\uc7a5\ub41c \uc774\ubbf8\uc9c0\uba85(\ub610\ub294 url) \ubc18\ud658\\n\\t\\n```"},{"id":"route-image-intro","metadata":{"permalink":"/route-image-intro","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-07-27-\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uae30\uc220 \uc120\ud0dd/2023-07-27-\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uae30\uc220 \uc120\ud0dd.mdx","source":"@site/blog/2023-07-27-\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uae30\uc220 \uc120\ud0dd/2023-07-27-\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uae30\uc220 \uc120\ud0dd.mdx","title":"\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uae30\uc220 \uc120\ud0dd","description":"./route.png","date":"2023-07-27T00:00:00.000Z","formattedDate":"2023\ub144 7\uc6d4 27\uc77c","tags":[{"label":"image","permalink":"/tags/image"},{"label":"awt","permalink":"/tags/awt"}],"readingTime":5.495,"hasTruncateMarker":false,"authors":[{"name":"\ud5c8\ube0c","title":"Backend","url":"https://github.com/greeng00se","imageURL":"https://github.com/greeng00se.png","key":"herb"}],"frontMatter":{"title":"\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uae30\uc220 \uc120\ud0dd","slug":"route-image-intro","authors":["herb"],"tags":["image","awt"]},"prevItem":{"title":"\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uad6c\ud604","permalink":"/route-image-implementation"},"nextItem":{"title":"Docusaurus \uc774\uc6a9\ud558\uc5ec \ud300 \ube14\ub85c\uadf8 \ub9cc\ub4e4\uae30","permalink":"/docusaurus"}},"content":"![./route.png](./route.png)\\n\\n## \uc774\ubbf8\uc9c0 \uc0dd\uc131\uc744 \uc704\ud574 \uc5b4\ub5a4 \uae30\ub2a5\uc774 \ud544\uc694\ud558\uace0 \ub204\uac00 \ud558\uae30\ub85c \uacb0\uc815\ud588\ub098\uc694?\\n\\n\uc704 \uc640\uc774\uc5b4 \ud504\ub808\uc784\uc5d0\uc11c `\uc5ec\ud589 \ud788\uc2a4\ud1a0\ub9ac`\uc640 `\uc5ec\ud589\uc5d0 \ub300\ud55c \uac10\uc0c1\uc744 \uc704\ud55c \uacbd\ub85c \uc774\ubbf8\uc9c0`\uc758 \uacbd\uc6b0, \ub9f5 API\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \ub3c4\ud615 \uadf8\ub9ac\uae30 API(\ub124\uc774\ubc84 \ub9f5 API \uae30\uc900 Polyline)\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.  \\n\ub530\ub77c\uc11c \uc774\ubbf8\uc9c0\ub97c \uc9c1\uc811 \uc0dd\uc131\ud558\uac70\ub098, \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \uc9c1\uc811 \uc704\uacbd\ub3c4\ub97c \uc774\uc6a9\ud558\uc5ec \uadf8\ub824\uc57c \ud569\ub2c8\ub2e4.\\n\\n\ud574\ub2f9 \uc694\uad6c\uc0ac\ud56d\uc744 \ud574\uacb0\ud558\uae30 \uc704\ud574\uc11c\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \uae30\ub2a5\uc744 \uac00\uc9c4 \ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 \ud544\uc694\ud569\ub2c8\ub2e4.\\n\\n- \uc774\ubbf8\uc9c0 \uc0dd\uc131\\n- \uc120\uacfc \uc810 \ud45c\ud604\\n- \ud22c\uba85\ud55c \ubc30\uacbd\uc0c9\\n\\n\uc800\ud76c\ub294 \ud604\uc7ac \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \ubc14\uc05c \uc77c\uc815\uacfc, \uae30\ub2a5 \uad6c\ud604\uc5d0 \uc57d\uac04\uc758 \uc5f0\uc0b0\uc774 \ub4e4\uc5b4\uac04\ub2e4\ub294 \ubd80\ubd84\uc744 \uace0\ub824\ud558\uc5ec \ubc31\uc5d4\ub4dc\uc5d0\uc11c \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud558\uae30\ub85c \uacb0\uc815\uc744 \ub0b4\ub838\uc2b5\ub2c8\ub2e4.\\n\\n## \uc5b4\ub5a4 \uae30\uc220\uc744 \uace0\ub824\ud574\ubcf4\uc558\ub098\uc694?\\n\\n\uc774\ubbf8\uc9c0 \uc0dd\uc131\uc744 \uc704\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 \ub77c\uc774\ube0c\ub7ec\ub9ac \ub610\ub294 \uae30\uc220\ub4e4\uc744 \ud655\uc778\ud574 \ubcf4\uc558\uc2b5\ub2c8\ub2e4.   \\n\\n- Python\uc758 Matplotlib\\n- **AWT(Abstract Window Toolkit) [\ucd5c\uc885 \uc120\ud0dd]**\\n- \uc774\ubbf8\uc9c0 \ucc98\ub9ac \ub77c\uc774\ube0c\ub7ec\ub9ac \ubc0f Java\uc5d0\uc11c \ub0b4\ubd80\uc801\uc73c\ub85c Matplotlib \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac\\n- Java Swing, Java FX\\n\\n## Python & Matplotlib\\n\\n\ub370\uc774\ud130 \uc2dc\uac01\ud654 \ub77c\uc774\ube0c\ub7ec\ub9ac  \\n\uc774\ubbf8\uc9c0 \uc0dd\uc131 \ubc0f \ub85c\uceec\uc5d0 \uc800\uc7a5\uae4c\uc9c0 \uac78\ub9ac\ub294 \uc2dc\uac04: 0.2\ucd08   \\n\\n- \ucf54\ub4dc\uac00 \uac04\ub2e8\ud574\uc11c \uc720\uc9c0 \ubcf4\uc218\uc131\uc774 \uc88b\uc2b5\ub2c8\ub2e4.  \\n- AWS Lambda \uac19\uc740 \uc11c\ubc84\ub9ac\uc2a4 \ucef4\ud4e8\ud305 \uc11c\ube44\uc2a4\ub098 FastAPI\uc640 \uac19\uc740 \uc6f9 \ud504\ub808\uc784\uc6cc\ud06c\ub85c \ucd94\uac00\uc801\uc778 API\ub97c \uad6c\ud604\ud574\uc57c \ud569\ub2c8\ub2e4.\\n- Spring Boot\uc5d0\uc11c \ucd94\uac00\uc801\uc778 API \ud638\ucd9c\uc744 \ud574\uc57c\ud558\uace0, \ud655\uc7a5\uc131\uacfc \ube44\ub3d9\uae30 \ucc98\ub9ac \ub4f1 \uace0\ub824 \ud574\uc57c \ud560 \ubd80\ubd84\uc774 \ub9ce\uc2b5\ub2c8\ub2e4.\\n\\n## Java AWT \uc774\uc678\uc758 \ub77c\uc774\ube0c\ub7ec\ub9ac\\n\\nPython\uc774 \uc544\ub2cc Java\uc5d0\uc11c\uc758 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub3c4 \uace0\ub824\ub97c \ud574\ubd24\uc9c0\ub9cc \uc694\uad6c\uc0ac\ud56d\uc5d0 \uc801\ud569\ud558\uc9c0 \uc54a\uac70\ub098, \uc801\uc740 \uc694\uad6c\uc0ac\ud56d\uc5d0 \ube44\ud574 \ubb34\uac70\uc6b4 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub4e4\uc774 \ub9ce\uc558\uc2b5\ub2c8\ub2e4.\\n\\n\ub77c\uc774\ube0c\ub7ec\ub9ac | \uc124\uba85 | \uc81c\uc678 \uc774\uc720\\n-- | -- | --\\nSwing | AWT \uc774\ud6c4\uc5d0 \ub098\uc628 GUI \ub77c\uc774\ube0c\ub7ec\ub9ac, \ub124\uc774\ud2f0\ube0c UI\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 \ubaa8\ub4e0 \uc6b4\uc601\uccb4\uc81c \uc0c1\uc5d0\uc11c \ub3d9\uc77c\ud55c UI\ub97c \uac00\uc9c0\ub3c4\ub85d \ud568 | \uc694\uad6c\uc0ac\ud56d\uc5d0 \ube44\ud574 \ubb34\uac81\uace0 \ubcf5\uc7a1\ub3c4\uac00 \ub192\uc74c\\nJavaFX | Swing \uc774\ud6c4\uc5d0 \ub098\uc628 GUI \ub77c\uc774\ube0c\ub7ec\ub9ac, 3\ucc28\uc6d0 \uadf8\ub798\ud53d\uc744 \uc9c0\uc6d0\ud568 | \uc694\uad6c\uc0ac\ud56d\uc5d0 \ube44\ud574 \ubb34\uac81\uace0 \ubcf5\uc7a1\ub3c4\uac00 \ub192\uc74c\\n[simple-java-plot](https://github.com/yuriy-g/simple-java-plot) | AWT\ub85c \uad6c\ud604\ub41c \ud50c\ub85c\ud305 \ub77c\uc774\ube0c\ub7ec\ub9ac | AWT \uae30\ubc18\uc774\uae34 \ud558\uc9c0\ub9cc \uc9c1\uc811 AWT\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc5d0 \ube44\ud574 \uba54\ub9ac\ud2b8\uac00 \uc5c6\uc74c, \ucee4\uc2a4\ud140 \uc124\uc815 \uae30\ub2a5\uc774 \uc5c6\uc74c\\n[matplotlib4j](https://github.com/sh0nk/matplotlib4j) | Matplotlib\ub97c Java\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uac8c \ud558\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac | \ub0b4\ubd80\uc801\uc73c\ub85c \ud30c\uc774\uc36c \uc0ac\uc6a9\ud558\uae30\uc5d0 \ubb34\uac70\uc6c0, \ubc30\uacbd \ud22c\uba85\ud654 \uae30\ub2a5 \uc5c6\uc74c\\n\\n## Java & AWT(Abstract Window Toolkit)\\n\\n\uadf8\ub798\ud53d\uacfc \uc774\ubbf8\uc9c0\ub97c \uadf8\ub9ac\uae30 \uc704\ud55c \ub3c4\uad6c  \\n\uc774\ubbf8\uc9c0 \uc0dd\uc131 \ubc0f \ub85c\uceec\uc5d0 \uc800\uc7a5\uae4c\uc9c0 \uac78\ub9ac\ub294 \uc2dc\uac04: 1.75\ucd08  \\n\\n- \ud50c\ub85c\ud305 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\ubcf4\ub2e4 \uad6c\ud604\uc758 \ub09c\uc774\ub3c4\uac00 \ub2e4\uc18c \uc874\uc7ac\ud569\ub2c8\ub2e4.\\n- \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc2dc\uac04\uc774 \ub2e4\uc18c \uc18c\uc694\ub418\uae30 \ub54c\ubb38\uc5d0 \ube60\ub978 \uc751\ub2f5 \ubc18\ud658\uc744 \uc704\ud574 \ube44\ub3d9\uae30 \ucc98\ub9ac\ub97c \uace0\ub824\ud560 \uc218 \uc788\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4.\\n- \ucd94\uac00\uc801\uc778 api \ud638\ucd9c\uc744 \ud558\uc9c0 \uc54a\uc544\ub3c4 \ub429\ub2c8\ub2e4.\\n\\n## \uc5b4\ub5a4 \uae30\uc220\uc744 \uc0ac\uc6a9\ud560 \uc608\uc815\uc778\uac00\uc694?\\n\\nAWT\uc758 \uacbd\uc6b0 Matplotlib\uc5d0 \ube44\ud574 \uad6c\ud604\uc758 \ub09c\uc774\ub3c4\uac00 \ub2e4\uc18c \uc788\uace0, \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc2dc\uac04\uc774 \ub354 \ub9ce\uc774 \uac78\ub9ac\ub294 \ub2e8\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4.  \\n\ud558\uc9c0\ub9cc \ucd94\uac00\uc801\uc778 api \ud638\ucd9c\uc744 \ud558\uc9c0 \uc54a\uc544\ub3c4 \ub418\ub294 \ubd80\ubd84, Python\uc744 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \ucd94\uac00\uc801\uc778 \uc6f9 \ud504\ub808\uc784\uc6cc\ud06c\uc758 \ud559\uc2b5 \ube44\uc6a9\uc744 \uace0\ub824\ud558\uc5ec AWT\ub97c \uc0ac\uc6a9\ud558\uae30\ub85c \uacb0\uc815\ud588\uc2b5\ub2c8\ub2e4.\\n\\n## \uc720\uc9c0 \ubcf4\uc218\\n\\nAWT\ub77c\ub294 \uc0dd\uc18c\ud55c \uae30\uc220\uc744 \uc0ac\uc6a9\ud558\uae30 \ub54c\ubb38\uc5d0 \uc720\uc9c0 \ubcf4\uc218\uc131\uc744 \uc704\ud574 \ud300\uc6d0\ub4e4\uacfc \uacf5\uc720\ud558\ub294 \uac83\uc774 \uc911\uc694\ud558\ub2e4\uace0 \uc0dd\uac01\ud588\uc2b5\ub2c8\ub2e4.  \\n\ub530\ub77c\uc11c \ub2e4\uc74c\uacfc \uac19\uc740 \ubc29\ubc95\uc73c\ub85c \uacf5\uc720\ud558\uae30\ub85c \ud588\uc2b5\ub2c8\ub2e4.  \\n\\n1. \ucf54\ub4dc \ub9ac\ubdf0\uc640 PR\uc744 \ud1b5\ud574 \uc791\uc131\ud55c AWT \ucf54\ub4dc\uc5d0 \ub300\ud55c \uc124\uba85 \ubc0f \ub9ac\ubdf0 \ubc1b\uc2b5\ub2c8\ub2e4. \\n2. AWT\ub97c \uc0ac\uc6a9\ud55c \ubd80\ubd84\uc744 \ubb38\uc11c\ud654\ud558\uc5ec \uacf5\uc720\ud569\ub2c8\ub2e4."},{"id":"docusaurus","metadata":{"permalink":"/docusaurus","editUrl":"https://github.com/trip-draw/trip-draw.github.io/tree/main/blog/2023-07-12-Docusaurus \uc774\uc6a9\ud558\uc5ec \ud300 \ube14\ub85c\uadf8 \ub9cc\ub4e4\uae30/index.mdx","source":"@site/blog/2023-07-12-Docusaurus \uc774\uc6a9\ud558\uc5ec \ud300 \ube14\ub85c\uadf8 \ub9cc\ub4e4\uae30/index.mdx","title":"Docusaurus \uc774\uc6a9\ud558\uc5ec \ud300 \ube14\ub85c\uadf8 \ub9cc\ub4e4\uae30","description":"\uc548\ub155\ud558\uc138\uc694. \ud2b8\ub9bd\ub4dc\ub85c\uc6b0 \ud300\uc758 \ud5c8\ube0c\uc785\ub2c8\ub2e4.","date":"2023-07-12T00:00:00.000Z","formattedDate":"2023\ub144 7\uc6d4 12\uc77c","tags":[{"label":"Documentation","permalink":"/tags/documentation"}],"readingTime":10.905,"hasTruncateMarker":false,"authors":[{"name":"\ud5c8\ube0c","title":"Backend","url":"https://github.com/greeng00se","imageURL":"https://github.com/greeng00se.png","key":"herb"}],"frontMatter":{"title":"Docusaurus \uc774\uc6a9\ud558\uc5ec \ud300 \ube14\ub85c\uadf8 \ub9cc\ub4e4\uae30","slug":"docusaurus","authors":["herb"],"tags":["Documentation"]},"prevItem":{"title":"\uacbd\ub85c \uc774\ubbf8\uc9c0 \uc0dd\uc131\ud558\uae30 - \uae30\uc220 \uc120\ud0dd","permalink":"/route-image-intro"}},"content":"\uc548\ub155\ud558\uc138\uc694. \ud2b8\ub9bd\ub4dc\ub85c\uc6b0 \ud300\uc758 \ud5c8\ube0c\uc785\ub2c8\ub2e4.  \\n\ub178\uc158 \uac19\uc740 \ud234\ub85c \uc815\ub9ac\ud558\ub294 \uac83\ub3c4 \uc88b\uc9c0\ub9cc, \uc6f9 \ud398\uc774\uc9c0\uc758 \ud615\ud0dc\ub85c \uad00\ub9ac\ud558\ub294 \uac83\ub3c4 \uc88b\ub2e4\uace0 \uc0dd\uac01\ub418\uc5b4 \ud300 \ube14\ub85c\uadf8\ub97c \uc2dc\uc791\ud558\uae30\ub85c \ud588\uc2b5\ub2c8\ub2e4.  \\n\uc800\ud76c \ud300\uc5d0\uc11c\ub294 \uae30\ubcf8 \uc124\uc815\uc5d0 \uc2dc\uac04\uc774 \uc870\uae08 \uac78\ub9ac\uae30\ub294 \ud558\uc9c0\ub9cc \uc81c\uacf5\ud558\ub294 \uae30\ub2a5\uc774 \ub9ce\uace0, \ubb38\uc11c \uc790\uccb4\uc758 \uac00\ub3c5\uc131\ub3c4 \uc88b\uae30 \ub54c\ubb38\uc5d0 Docusaurus\ub97c \uc774\uc6a9\ud558\uae30\ub85c \ud588\uc2b5\ub2c8\ub2e4.  \\n\\n## \uc124\uce58\\n\\n[\uacf5\uc2dd \ud648\ud398\uc774\uc9c0](https://docusaurus.io/docs/installation)\uc5d0 \ub4e4\uc5b4\uac00\uc11c \ucd5c\uc2e0 \ubc84\uc804\uc744 \uc124\uce58\ud569\ub2c8\ub2e4.\\n\\n```bash\\nyarn create docusaurus\\n```\\n\\n## \ubc30\ud3ec\\n\\n[\ubc30\ud3ec \uc548\ub0b4 \ubb38\uc11c](https://docusaurus.io/docs/next/deployment#deploying-to-github-pages)  \\nnetlify\ub098 vercel \uac19\uc740 \uc11c\ubc84\ub9ac\uc2a4 \ud50c\ub7ab\ud3fc\uc73c\ub85c \ube60\ub978 \uc2dc\uac04\uc548\uc5d0 \ubc30\ud3ec\ub97c \ud560 \uc218 \uc788\uc9c0\ub9cc, github organization\uc744 \uc774\uc6a9\ud558\uc5ec github\uc73c\ub85c \ubc30\ud3ec\ud558\uae30\ub85c \ud588\uc2b5\ub2c8\ub2e4.\\n\\n### \ub808\ud3ec\uc9c0\ud1a0\ub9ac \uc0dd\uc131\\n\\norganization\uc744 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 `organization.github.io` \ud615\ud0dc\uc758 \ub808\ud3ec\uc9c0\ud1a0\ub9ac\ub97c \uc0dd\uc131\ud574\uc11c \uc0ac\uc6a9\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n### \uc124\uc815 \ud30c\uc77c \uc218\uc815\\n\\n```js title=\\"docusaurus.config\\"\\nmodule.exports = {\\n  // ...\\n  url: \\"https://trip-draw.github.io\\",\\n  baseUrl: \\"/\\",\\n  projectName: \\"trip-draw.github.io\\",\\n  organizationName: \\"trip-draw\\",\\n  trailingSlash: false,\\n  // ...\\n};\\n```\\n\\n### \ud1a0\ud070 \uc124\uc815\\n\\ngithub action\uc73c\ub85c \ubc30\ud3ec\ud558\uae30 \uc704\ud574 \ubc30\ud3ec\uc6a9 \ud1a0\ud070\uc744 \ud558\ub098 \uc0dd\uc131\ud558\uc5ec \uc0dd\uc131\ud55c \ub808\ud3ec\uc9c0\ud1a0\ub9ac\uc5d0 Repository secrets\uc73c\ub85c \uc124\uc815\ud569\ub2c8\ub2e4.  \\n\ud1a0\ud070\uc758 \uc2a4\ucf54\ud504\ub294 [repo, user, workflow] \uc744 \uc124\uc815\ud588\uc2b5\ub2c8\ub2e4.\\n\\n![github](./github.png)\\n\\n### \ube0c\ub79c\uce58 \uc0dd\uc131\\n\\ngithub\uc5d0\uc11c gh-pages \ube0c\ub79c\uce58\ub97c \ud558\ub098 \uc0dd\uc131\ud569\ub2c8\ub2e4.  \\nrepository -> settings -> pages -> branch\uc5d0\uc11c \uc0dd\uc131\ud55c gh-pages\ub85c \ube0c\ub79c\uce58\ub97c \ubcc0\uacbd\ud569\ub2c8\ub2e4.  \\n\uc124\uc815\ud55c \ube0c\ub79c\uce58\uac00 \ubc30\ud3ec \ube0c\ub79c\uce58\uac00 \ub418\uba70, \ud574\ub2f9 \ube0c\ub79c\uce58\uc5d0 \uc788\ub294 \ud30c\uc77c\ub4e4\uc744 \uc774\uc6a9\ud574\uc11c \uc815\uc801 \uc6f9\uc0ac\uc774\ud2b8\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.\\n\\n### \uc6cc\ud06c\ud50c\ub85c \uc791\uc131\\n\\nDocusaurus 2.0 \uae30\uc900 Node.js 16.14 \uc774\uc0c1\uc758 \ubc84\uc804\uc744 \uc0ac\uc6a9\ud574\uc57c \ud569\ub2c8\ub2e4.  \\n\ubc30\ud3ec\uc2dc\uc5d0\ub294 Repository secrets\uc73c\ub85c \uc124\uc815\ud55c DEPLOY_TOKEN\uc744 \uc774\uc6a9\ud569\ub2c8\ub2e4.\\n\\n```yml title=\\".github/workflows/deploy.yml\\"\\nname: blog\\n\\non:\\n  push:\\n    branches: [main]\\n\\njobs:\\n  deploy:\\n    name: Deploy to GitHub Pages\\n    runs-on: ubuntu-latest\\n    steps:\\n      - uses: actions/checkout@v2\\n      - uses: actions/setup-node@v3\\n        with:\\n          node-version: 18\\n          cache: yarn\\n\\n      - name: Install dependencies\\n        run: yarn install --frozen-lockfile\\n      - name: Build website\\n        run: yarn build\\n\\n      - name: Deploy to GitHub Pages\\n        uses: peaceiris/actions-gh-pages@v3\\n        with:\\n          github_token: ${{ secrets.DEPLOY_TOKEN }}\\n          publish_dir: ./build\\n          user_name: github-actions[bot]\\n          user_email: 41898282+github-actions[bot]@users.noreply.github.com\\n```\\n\\n## \ub313\uae00 \uae30\ub2a5\\n\\nutterance, giscus \ub4f1 \ub9ce\uc740 \ub313\uae00 \uc11c\ube44\uc2a4\uac00 \uc788\uc9c0\ub9cc github\uc758 disccutions \uae30\ub2a5\uc744 \uc774\uc6a9\ud558\ub294 giscus\ub97c \uc120\ud0dd\ud588\uc2b5\ub2c8\ub2e4.\\n\\n### giscus \uc124\uc815\\n\\ngiscus\ub294 \uc544\ub798\uc640 \uac19\uc740 \uc124\uc815\uc744 \ub9cc\uc871\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n1. \uacf5\uac1c \uc800\uc7a5\uc18c\uc5ec\uc57c \ud569\ub2c8\ub2e4.\\n2. giscus \uc571\uc774 \uc124\uce58\ub418\uc5b4 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4.\\n3. Discussions \uae30\ub2a5\uc774 \ud574\ub2f9 \uc800\uc7a5\uc18c\uc5d0\uc11c \ud65c\uc131\ud654\ub418\uc5b4 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4.\\n\\n[giscus](https://giscus.app/ko)\uc5d0 \ub354\uc6b1 \uc790\uc138\ud55c \ub0b4\uc6a9\uc774 \ub098\uc640\uc788\uc2b5\ub2c8\ub2e4.\\n\\n### docusaurus \uc124\uc815\\n\\n[swizzling](https://docusaurus.io/ko/docs/next/swizzling)\uc744 \uc774\uc6a9\ud558\uc5ec \ucef4\ud3ec\ub10c\ud2b8\ub97c \uac10\uc2f8\uc11c \ub313\uae00 \uae30\ub2a5\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.  \\n\uc774\ub97c \uc801\uc6a9\ud55c\ub2e4\uba74 \uae30\uc874\uc5d0 \uac8c\uc2dc\ubb3c\uc744 giscus\uac00 \ud3ec\ud568\ub41c \ub9ac\uc561\ud2b8 \ucef4\ud3ec\ub10c\ud2b8\ub85c \uac10\uc2f8\ub294 \ud615\ud0dc\uac00 \ub429\ub2c8\ub2e4.  \\n\uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc774\uc6a9\ud558\uc5ec BlogPostItem\uc744 \ucd94\ucd9c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n```bash\\nyarn run swizzle @docusaurus/theme-classic BlogPostItem -- --wrap\\n```\\n\\n\uba85\ub839\uc5b4\ub97c \uc785\ub825\ud558\uba74 `/src/theme/BlogPostItem/index.js` \uc704\uce58\uc5d0 \ud30c\uc77c\uc774 \uc0dd\uc131\ub429\ub2c8\ub2e4.  \\n\ud30c\uc77c\uc758 \ub0b4\uc6a9\uc744 \uc544\ub798\uc640 \uac19\uc774 \uc218\uc815\ud558\uace0, \uc774\ub54c setAttribute \ubd80\ubd84\uc740 \uc801\uc808\ud558\uac8c giscus \uc124\uc815\uc744 \uc774\uc6a9\ud569\ub2c8\ub2e4.\\n\\n```js title=\\"/src/theme/BlogPostItem/index.js\\"\\nimport OriginalBlogPostItem from \\"@theme-original/BlogPostItem\\";\\nimport React, { useEffect, useRef } from \\"react\\";\\n// @ts-expect-error internal code\\nimport { useColorMode } from \\"@docusaurus/theme-common\\";\\nimport { useBlogPost } from \\"@docusaurus/theme-common/internal\\";\\n\\nconst giscusSelector = \\"iframe.giscus-frame\\";\\n\\nfunction BlogPostItem(props) {\\n  const { colorMode } = useColorMode();\\n  const { isBlogPostPage } = useBlogPost();\\n  const giscusTheme = colorMode === \\"dark\\" ? \\"dark\\" : \\"light\\";\\n  const containerRef = useRef(null);\\n\\n  useEffect(() => {\\n    if (!isBlogPostPage) return;\\n\\n    const giscusEl = containerRef.current.querySelector(giscusSelector);\\n\\n    const createGiscusEl = () => {\\n      const script = document.createElement(\\"script\\");\\n\\n      script.src = \\"https://giscus.app/client.js\\";\\n      script.setAttribute(\\"data-repo\\", \\"trip-draw/trip-draw.github.io\\");\\n      script.setAttribute(\\"data-repo-id\\", \\"R_kgDOJ1esvg\\");\\n      script.setAttribute(\\"data-category\\", \\"Announcements\\");\\n      script.setAttribute(\\"data-category-id\\", \\"DIC_kwDOJ1esvs4CXkqs\\");\\n      script.setAttribute(\\"data-mapping\\", \\"pathname\\");\\n      script.setAttribute(\\"data-strict\\", \\"0\\");\\n      script.setAttribute(\\"data-reactions-enabled\\", \\"1\\");\\n      script.setAttribute(\\"data-emit-metadata\\", \\"0\\");\\n      script.setAttribute(\\"data-input-position\\", \\"bottom\\");\\n      script.setAttribute(\\"data-theme\\", giscusTheme);\\n      script.setAttribute(\\"data-lang\\", \\"ko\\");\\n      script.crossOrigin = \\"anonymous\\";\\n      script.async = true;\\n\\n      containerRef.current.appendChild(script);\\n    };\\n\\n    const postThemeMessage = () => {\\n      const message = {\\n        setConfig: {\\n          theme: giscusTheme,\\n        },\\n      };\\n\\n      giscusEl.contentWindow.postMessage(\\n        { giscus: message },\\n        \\"https://giscus.app\\"\\n      );\\n    };\\n\\n    giscusEl ? postThemeMessage() : createGiscusEl();\\n  }, [giscusTheme]);\\n\\n  return (\\n    <>\\n      <OriginalBlogPostItem {...props} />\\n      {isBlogPostPage && <div ref={containerRef} />}\\n    </>\\n  );\\n}\\n\\nexport default BlogPostItem;\\n```\\n\\n## \uc54c\uace0\ub9ac\uc544 \uc124\uc815 \ubc0f \uc9c1\uc811 \uad00\ub9ac\ud558\uae30\\n\\n\uc54c\uace0\ub9ac\uc544\ub97c \uc0ac\uc6a9\ud558\uba74 \uac80\uc0c9 \uae30\ub2a5\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  \\n\uc720\ub8cc \ud50c\ub79c\uc774\ub098 netlify\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \ud06c\ub864\ub7ec\ub97c \ub530\ub85c \uc81c\uacf5\ud574 \uc8fc\uc9c0\ub9cc, \ube44\uc6a9\uc0c1 \uc9c1\uc811 \uc778\ub371\uc2a4\ub97c \ub4f1\ub85d\ud558\uae30\ub85c \ud588\uc2b5\ub2c8\ub2e4.\\n\\n\ubb34\ub8cc \ud50c\ub79c\uc740 \uc9c1\uc811 \uc778\ub371\uc2a4\ub97c \uc218\uc9d1\ud558\ub294 \ubc29\ubc95\uacfc, [docsearch](https://docsearch.algolia.com/)\ub97c \uc774\uc6a9\ud558\ub294 \ubc29\ubc95\uc774 \uc788\uc2b5\ub2c8\ub2e4.  \\ndocsearch\uc5d0 \ub4f1\ub85d\ud55c\ub2e4\uba74 \uc77c\uc8fc\uc77c\uc5d0 \ud55c \ubc88\uc529 \ud06c\ub864\ub9c1\uc774 \uc9c4\ud589\ub418\uc9c0\ub9cc \uc989\uc2dc \uc801\uc6a9\uc2dc\ud0a4\uae30 \uc704\ud574 \uc9c1\uc811 \uc778\ub371\uc2a4\ub97c \uc218\uc9d1\ud558\ub294 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud558\uae30\ub85c \ud588\uc2b5\ub2c8\ub2e4.\\n\\n- [\uc9c1\uc811 \uc778\ub371\uc2a4 \uc218\uc9d1](https://docsearch.algolia.com/docs/legacy/run-your-own/)\\n- [\uc124\uc815 \ud30c\uc77c](https://docsearch.algolia.com/docs/legacy/config-file)\\n\\n### \uc54c\uace0\ub9ac\uc544 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc0dd\uc131 \ubc0f \ud0a4 \ud655\uc778\\n\\n\ud68c\uc6d0\uac00\uc785\uc744 \ud558\uace0 \uc0c8\ub85c\uc6b4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc0dd\uc131\uc744 \ub204\ub985\ub2c8\ub2e4.  \\n\uc0dd\uc131\uc744 \ub2e4 \ub9c8\uce58\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 api \ud0a4\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![algolia](./algolia.png)\\n\\n### \ud0a4 \uc0dd\uc131\\n\\n\uc9c1\uc811 \uc778\ub371\uc2a4\ub97c \uc218\uc9d1\ud558\uae30 \uc704\ud55c \ud0a4\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.  \\naddObject, editSettings, deleteIndex acl(\uc811\uadfc \uc81c\uc5b4 \ubaa9\ub85d)\uc774 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4.\\n\\n![key](./key.png)\\n\\n### .env \ud30c\uc77c \uc0dd\uc131\\n\\n\ud504\ub85c\uc81d\ud2b8 \ud3f4\ub354 \uc0c1\ub2e8\uc5d0 .env \ud30c\uc77c\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4.\\n\\n```bash title=\\".env\\"\\nAPPLICATION_ID=MVIU5UEMOM\\nAPI_KEY=\uc778\ub371\uc2a4_\uc0dd\uc131\uc6a9_\ud0a4\\n```\\n\\n### config \ud30c\uc77c \uc0dd\uc131\\n\\n\ub9c8\ucc2c\uac00\uc9c0\ub85c \ucd5c\uc0c1\ub2e8\uc5d0 config.json \ud30c\uc77c\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4.\\n\uc124\uc815 \ud30c\uc77c\uc740 \ud574\ub2f9 [\ub9c1\ud06c](https://docsearch.algolia.com/docs/legacy/config-file)\ub098 Docusaurus\uc758 [\uc124\uc815 \ud30c\uc77c](https://github.com/algolia/docsearch-configs/blob/master/configs/docusaurus-2.json)\uc744 \ucc38\uace0\ud558\uba74 \uc88b\uc2b5\ub2c8\ub2e4.\\n\\n```json title=\\"config.json\\"\\n{\\n  \\"index_name\\": \\"gh\\",\\n  \\"start_urls\\": [\\"https://trip-draw.github.io/\\"],\\n  \\"sitemap_urls\\": [\\"https://trip-draw.github.io/sitemap.xml\\"],\\n  \\"sitemap_alternate_links\\": true,\\n  \\"stop_urls\\": [\\"/tests\\"],\\n  \\"selectors\\": {\\n    \\"lvl0\\": {\\n      \\"selector\\": \\"(//ul[contains(@class,\'menu__list\')]//a[contains(@class, \'menu__link menu__link--sublist menu__link--active\')]/text() | //nav[contains(@class, \'navbar\')]//a[contains(@class, \'navbar__link--active\')]/text())[last()]\\",\\n      \\"type\\": \\"xpath\\",\\n      \\"global\\": true,\\n      \\"default_value\\": \\"Documentation\\"\\n    },\\n    \\"lvl1\\": \\"header h1\\",\\n    \\"lvl2\\": \\"article h2\\",\\n    \\"lvl3\\": \\"article h3\\",\\n    \\"lvl4\\": \\"article h4\\",\\n    \\"lvl5\\": \\"article h5, article td:first-child\\",\\n    \\"lvl6\\": \\"article h6\\",\\n    \\"text\\": \\"article p, article li, article td:last-child\\"\\n  },\\n  \\"strip_chars\\": \\" .,;:#\\",\\n  \\"custom_settings\\": {\\n    \\"separatorsToIndex\\": \\"_\\",\\n    \\"attributesForFaceting\\": [\\"language\\", \\"version\\", \\"type\\", \\"docusaurus_tag\\"],\\n    \\"attributesToRetrieve\\": [\\n      \\"hierarchy\\",\\n      \\"content\\",\\n      \\"anchor\\",\\n      \\"url\\",\\n      \\"url_without_anchor\\",\\n      \\"type\\"\\n    ]\\n  },\\n  \\"conversation_id\\": [\\"833762294\\"],\\n  \\"nb_hits\\": 46250\\n}\\n```\\n\\n### docker \uc774\uc6a9\ud558\uc5ec \ud06c\ub864\ub9c1\\n\\ndocker\uc640 jq\uac00 \ud544\uc694\ud569\ub2c8\ub2e4.  \\njq\uac00 \uc124\uce58\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc73c\uba74 mac \uae30\uc900 brew\ub97c \uc774\uc6a9\ud574\uc11c \uc124\uce58\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n```bash\\nbrew install jq\\n```\\n\\n\ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \uc774\uc6a9\ud558\uc5ec .env\uc640 config.json\uc744 \uc774\uc6a9\ud558\uc5ec \ud06c\ub864\ub9c1\uc744 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n```bash\\ndocker run -it --env-file=.env -e \\"CONFIG=$(cat ./config.json | jq -r tostring)\\" algolia/docsearch-scraper\\n```\\n\\n### docusaurus \uc124\uc815\\n\\n\uc804\uc5d0 \ud655\uc778\ud55c APP ID, Search-Only API KEY, IndexName\uc744 \uc774\uc6a9\ud558\uc5ec docusaurus.config \ud30c\uc77c\uc5d0 \uc124\uc815\ud569\ub2c8\ub2e4.\\n\\n```js title=\\"docusaurus.config\\"\\nthemeConfig:\\n  /** @type {import(\'@docusaurus/preset-classic\').ThemeConfig} */\\n  ({\\n    ...\\n    algolia: {\\n      appId: \'MVIU5UEMOM\', // Application ID\\n      apiKey: \'b68f378013817d9a190df88cdde226a0\', // Search-Only API Key\\n      indexName: \'teco\', // config.json\uc5d0 \uc124\uc815\ud55c \uc778\ub371\uc2a4\uba85\\n      contextualSearch: true,\\n    },\\n  })\\n```\\n\\n## \ubd80\uac00 \uc124\uc815\\n\\n### \ud654\uba74 \uc0c1\ub2e8 Github Icon\\n\\n\ud30c\uc77c \ucd5c\ud558\ub2e8\uc5d0 \uc544\ub798 css \uad6c\ubb38\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n```css title=\\"/src/css/custom.css\\"\\n.header-github-link:hover {\\n  opacity: 0.6;\\n}\\n\\n.header-github-link:before {\\n  content: \\"\\";\\n  width: 24px;\\n  height: 24px;\\n  display: flex;\\n  background: url(\\"data:image/svg+xml,%3Csvg viewBox=\'0 0 24 24\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\'/%3E%3C/svg%3E\\")\\n    no-repeat;\\n}\\n\\nhtml[data-theme=\\"dark\\"] .header-github-link:before {\\n  background: url(\\"data:image/svg+xml,%3Csvg viewBox=\'0 0 24 24\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath fill=\'white\' d=\'M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\'/%3E%3C/svg%3E\\")\\n    no-repeat;\\n}\\n```\\n\\nthemeconfig -> navbar\uc5d0 github link\ub97c \uc124\uc815\ud55c\ub2e4.\\n\\n```js title=\\"docusaurus.config\\"\\nnavbar: {\\n  title: \'TripDraw\',\\n  items: [\\n    {\\n      href: \\"https://github.com/woowacourse-teams/2023-trip-draw\\",\\n      position: \\"right\\",\\n      className: \\"header-github-link\\",\\n      \\"aria-label\\": \\"GitHub repository\\",\\n    },\\n  ],\\n},\\n```\\n\\n### \ucf54\ub4dc\ube14\ub7ed\\n\\njava\ub098 kotlin\uc758 \uacbd\uc6b0 \uae30\ubcf8\uc801\uc73c\ub85c \ud558\uc774\ub77c\uc774\ud305\uc744 \uc9c0\uc6d0\ud574 \uc8fc\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.  \\n\ub530\ub77c\uc11c prism \uc124\uc815\uc744 \uc544\ub798\uc640 \uac19\uc774 \ubcc0\uacbd\ud574 \uc918\uc57c \ud569\ub2c8\ub2e4.\\n\\n```js title=\\"docusaurus.config\\"\\nprism: {\\n  theme: lightCodeTheme,\\n  darkTheme: darkCodeTheme,\\n  additionalLanguages: [\'java\', \'kotlin\'],\\n}\\n```\\n\\n### mermaid\\n\\nmermaid\ub97c \uc0ac\uc6a9\ud558\ub824\uba74 `@docusaurus/theme-mermaid` \ub97c \uc124\uce58\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n```bash\\nyarn add @docusaurus/theme-mermaid\\n```\\n\\n\uc124\uce58 \ud6c4 \uc544\ub798\uc640 \uac19\uc774 \uc124\uc815\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n```js title=\\"docusaurus.config\\"\\nconst config = {\\n  ...\\n  markdown: {\\n    mermaid: true,\\n  },\\n  themes: [\\n    \'@docusaurus/theme-mermaid\'\\n  ],\\n};\\n```\\n\\nthemeConfig\uc5d0\uc11c mermaid\uc758 \ud14c\ub9c8\ub97c \uc9c0\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n```js title=\\"docusaurus.config\\"\\nthemeConfig:\\n    /** @type {import(\'@docusaurus/preset-classic\').ThemeConfig} */\\n    ({\\n      ...\\n      mermaid: {\\n        theme: {\\n          light: \'neutral\',\\n          dark: \'dark\'\\n        },\\n      },\\n    }),\\n```\\n\\n### \uad6d\uc81c\ud654 \uc124\uc815\\n\\n\uad6d\uc81c\ud654 \uc124\uc815\uc744 \ud55c\ub2e4\uba74 `Older Entries` \ud615\ud0dc\uc758 \uc124\uba85\uc774 `\ub2e4\uc74c \ud398\uc774\uc9c0` \ub85c \ubcc0\uacbd\ub429\ub2c8\ub2e4.  \\n\uc124\uc815\ud30c\uc77c\uc5d0\uc11c i18n\uc5d0 \uc788\ub294 \ub85c\ucf00\uc77c \uc124\uc815\uc744 ko\ub85c \ubcc0\uacbd\ud558\uba74 \ub429\ub2c8\ub2e4.\\n\\n```js title=\\"docusaurus.config\\"\\ni18n: {\\n  defaultLocale: \\"ko\\",\\n  locales: [\\"ko\\"],\\n},\\n```\\n\\n### \ube14\ub85c\uadf8 \uae00 author\\n\\n\ud300\uc6d0 \ubcc4\ub85c \ubb38\uc11c\ub97c \uad00\ub9ac\ud55c\ub2e4\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \uc5b4\ub5a4 \ud300\uc6d0\uc774 \uae00\uc744 \uc791\uc131\ud588\ub294\uc9c0 \uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n![author](./author.png)\\n\\n`authors.yml` \ud30c\uc77c\uc744 \uc774\uc6a9\ud558\uc5ec \uc0ac\uc6a9\uc790\uc5d0 \ub300\ud55c \uae30\ubcf8 \uc124\uc815\uc744 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n```yml title=\\"/blog/authors.yml\\"\\nherb:\\n  name: \ud5c8\ube0c\\n  title: Backend\\n  url: https://github.com/greeng00se\\n  image_url: https://github.com/greeng00se.png\\n```\\n\\n\ube14\ub85c\uadf8 \uae00\uc744 \uc791\uc131\ud560 \ub54c \ub2e4\uc74c\uacfc \uac19\uc774 authors\uc5d0 \ub123\uc5b4\uc8fc\uae30\ub9cc \ud558\uba74 \ub429\ub2c8\ub2e4.\\n\\n```mdx\\n---\\ntitle: Docusaurus \uc774\uc6a9\ud558\uc5ec \ud300 \ube14\ub85c\uadf8 \ub9cc\ub4e4\uae30\\nslug: 1\\nauthors: [herb]\\ntags: [Documentation]\\n---\\n\\n\uccab \ubc88\uc9f8 \ubb38\uc11c \ub0b4\uc6a9\\n```"}]}')}}]);